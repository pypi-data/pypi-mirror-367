Metadata-Version: 2.4
Name: func-retry
Version: 0.1.4
Summary: retry utils
Author-email: fjklqq <fjklqq@gmail.com>
License-File: LICENSE
Requires-Python: >=3.7
Description-Content-Type: text/markdown

# func-retry

## ğŸ“¦ å®‰è£…

```bash
pip install func-retry
```

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### Sync

```python
from func_retry import retry


@retry(times=3, delay=1)
def fetch_data():
    print("Fetching data...")
    raise Exception("Failed to fetch")


fetch_data()
```

### Async

```python
import asyncio
from func_retry import retry


@retry(times=3, delay=1)
async def fetch_data_async():
    print("Fetching data asynchronously...")
    raise Exception("Async fetch failed")


asyncio.run(fetch_data_async())
```

### Callback

```python
def log_error(current_error, current_retry_times, args, kwargs):
    print(f"Func run failed with error: {current_error}")


@retry(times=3, callback=log_error)
def test_func():
    raise Exception("Test exception")


test_func()
```

## ğŸ§© API è¯´æ˜

### `@retry(exc=Exception, times=3, delay=None, callback=None)`

#### å‚æ•°è¯´æ˜

| å‚æ•°å         | ç±»å‹                                                                | æè¿°                                 |
|-------------|-------------------------------------------------------------------|------------------------------------|
| `exc`       | `Exception` æˆ–å…¶å­ç±»                                                  | éœ€è¦æ•è·å¹¶é‡è¯•çš„å¼‚å¸¸ç±»å‹ï¼Œé»˜è®¤æ˜¯ `Exception`       |
| `times`     | `Optional[int]`                                                   | æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤ä¸º `3`ï¼Œè‹¥ä¸º `None` åˆ™æ— é™é‡è¯•ç›´åˆ°æˆåŠŸ |
| `delay`     | `Optional[int]`                                                   | æ¯æ¬¡é‡è¯•ä¹‹é—´çš„ç­‰å¾…æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä¸å»¶è¿Ÿ               |
| `default`   | `Optional[Any]`                                                   | æœ€ç»ˆé»˜è®¤è¿”å›å€¼ã€‚**å¦‚æœæœªè®¾ç½®ï¼Œåˆ™ä¼šæŠ›å‡ºè¿è¡Œä¸­çš„å¼‚å¸¸**       |
| `print_exc` | `bool`                                                            | æ‰“å°å‡½æ•°è¿è¡Œå¼‚å¸¸ä¿¡æ¯                         |
| `callback`  | `Callable[[Exception, int, Tuple, Dict], Union[Awaitable, None]]` | å¯é€‰å›è°ƒå‡½æ•°ï¼Œåœ¨æ¯æ¬¡å¤±è´¥åè°ƒç”¨                    |
