[project]
name = "digitalis"
version = "0.6.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.10"
dependencies = [
    "cachetools>=6.1.0",
    "lark>=1.2.2",
    "mcap>=1.3.0",
    "mcap-ros2-support>=0.5.5",
    "pointcloud2>=0.2.3",
    "textual>=5.1.1",
    "textual-image>=0.8.3",
    "textual-slider>=0.2.0",
    # only available on mac arm
    "textual-speedups>=0.2.0 ; sys_platform == 'darwin' and platform_machine == 'arm64'",
    "websockets>=15.0.1",
]

[project.scripts]
digitalis = "digitalis.app:main"

[build-system]
requires = ["uv_build>=0.8.1,<0.9.0"]
build-backend = "uv_build"


[tool.ruff]
line-length = 100

src = ['src']

target-version = 'py310'

extend-exclude = [
    # Keep generated lark files as is
    "*_lark.py",
]

[tool.ruff.lint]
exclude = ['msgs']
select = ['ALL']

ignore = [
    'ANN401',  # dynamically-typed-expression
    'C901',    # complex-structure
    'D',       # pydocstyle
    'EM101',   # raw-string-in-exception
    'EM102',   # f-string-in-exception
    'FIX002',  # TODO
    'PLR2004', # MagicValueComparisons
    'S101',    # AssertUsed
    'TD',      # TODO
    'TRY003',  # raise-vanilla-args

    # formater
    'COM812', # missing-trailing-comma
    'ISC001', # single-line-implicit-string-concatenation

    'UP038', # Depreacted rule

    'FBT001',
    'FBT002',
    'A002',
    'FBT003',
    'ERA001',
    'LOG015',
    'G004',
    'DTZ006',
]


[tool.ruff.lint.per-file-ignores]
# Relaxed lints for test files
"test_*.py" = ["T201", "SLF001"]


[dependency-groups]
dev = ["pytest>=8.4.1", "textual-dev>=1.7.0", "mcap-ros2-support>=0.5.5"]
