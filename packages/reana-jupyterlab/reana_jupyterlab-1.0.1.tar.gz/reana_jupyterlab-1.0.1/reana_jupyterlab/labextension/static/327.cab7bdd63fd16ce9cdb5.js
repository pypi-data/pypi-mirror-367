(self.webpackChunkreana_jupyterlab=self.webpackChunkreana_jupyterlab||[]).push([[327],{327:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ke});var n=a(607);const o="reana_jupyterlab",r=["created","deleted","failed","finished","pending","queued","running","stopped"],l=["created","pending","queued","running"],i={finished:{icon:"check_circle",color:"var(--green)",preposition:"in"},running:{icon:"progress_activity",color:"var(--blue)",preposition:"for"},failed:{icon:"close",color:"var(--red)",preposition:"after"},created:{icon:"draft",color:"var(--violet)"},stopped:{icon:"stop_circle",color:"var(--yellow)",preposition:"after"},queued:{icon:"hourglass",color:"var(--teal)"},pending:{icon:"hourglass_top",color:"var(--teal)"},deleted:{icon:"ink_eraser",color:"var(--gray)"}};var s=a(346),c=a(246),d=a(361),p=a(345),m=a.n(p);const u=()=>m().createElement("div",{dangerouslySetInnerHTML:{__html:'\n<svg xmlns="http://www.w3.org/2000/svg" id="tracés_techniques" data-name="tracés techniques" version="1.1" width="100px" viewBox = "0 0 27.5 6.5">\n  <defs id="defs5015">\n    <clipPath clipPathUnits="userSpaceOnUse" id="clipPath27566">\n      <path style="opacity:1;fill:#f55;fill-opacity:.4627451;stroke:none;stroke-width:1.20000005;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" id="rect27568" transform="rotate(-45)" d="M1.903 153.297H12.67v4.352H1.903z" />\n    </clipPath>\n    <clipPath clipPathUnits="userSpaceOnUse" id="clipPath27602">\n      <path style="opacity:1;vector-effect:none;fill:none;fill-opacity:1;stroke:#000;stroke-width:.01333333;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m119.05 106.96 5.513-1.472-4.524-3.015-2.937 2.984.066 2.461 2.375 1.43 4.394-1.082.04-1.305z" id="path27604" />\n    </clipPath>\n    <clipPath clipPathUnits="userSpaceOnUse" id="clipPath27620">\n      <path style="opacity:1;vector-effect:none;fill:none;fill-opacity:1;stroke:#000;stroke-width:.01333333;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m119.05 106.96 4.252-1.621-2.208-2.638-2.582.667-1.425 2.557.4 3.209 3.875.565 1.45-1.313.884-1.653z" id="path27622" />\n    </clipPath>\n    <clipPath clipPathUnits="userSpaceOnUse" id="clipPath27656">\n      <path style="opacity:1;vector-effect:none;fill:none;fill-opacity:1;stroke:#000;stroke-width:.01333333;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="M123.937 106.833h1.902l-2.35 2.445-4.236-.588.875-5.6 5.375.226-.03 2.95z" id="path27658" />\n    </clipPath>\n    <clipPath clipPathUnits="userSpaceOnUse" id="clipPath4807">\n      <path style="opacity:1;vector-effect:none;fill:none;fill-opacity:1;stroke:#000;stroke-width:.01183265;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m119.05 106.96 4.465-1.764-1.92-1.883-2.58.088-2.143 2.273.078 2.486 3.485 1.082 3.07-1.503-.615-1.446z" id="path4809" />\n    </clipPath>\n    <clipPath clipPathUnits="userSpaceOnUse" id="clipPath4823">\n      <path style="opacity:1;vector-effect:none;fill:none;fill-opacity:1;stroke:#000;stroke-width:.01333333;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m-7.893 9.314.002 5.41 2.02-.728.077-5.937-2.597-1.133z" id="path4825" />\n    </clipPath>\n    <clipPath clipPathUnits="userSpaceOnUse" id="clipPath4848">\n      <path style="opacity:1;vector-effect:none;fill:none;fill-opacity:1;stroke:#000;stroke-width:.01183265;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m119.05 106.96 4.465-1.764-2.385-2.766-3.079.832-1.03 2.694-.156 2.632 2.38 1.904 2.79-.354 1.363-1.904-.031-1.269z" id="path4850" />\n    </clipPath>\n    <clipPath clipPathUnits="userSpaceOnUse" id="clipPath5015" />\n    <clipPath clipPathUnits="userSpaceOnUse" id="clipPath13500" />\n  </defs>\n  <g id="layer2" transform="translate(-6.952)">\n    <path id="path9431" class="jp-icon-3" d="M34.065 2.265v3.849h-1.852v-.68a2.13 2.13 0 0 1-1.807.769 1.83 1.83 0 0 1-2.03-1.852c0-1.116.803-1.774 2.23-1.785h1.552v-.09c0-.58-.38-.925-1.116-.925a4.228 4.228 0 0 0-1.763.49L28.744.793a6.248 6.248 0 0 1 2.733-.67c1.629 0 2.566.804 2.577 2.143zm-1.863 1.852V3.58h-1.194c-.569 0-.848.201-.848.636s.302.703.826.703a1.194 1.194 0 0 0 1.216-.803z" style="fill:currentColor;stroke-width:1.1156683" />\n    <path style="fill:currentColor;stroke-width:1.13809323" d="M28.094 2.312v3.801h-1.912V2.847a1.036 1.036 0 0 0-1.07-1.138 1.24 1.24 0 0 0-1.23 1.218v3.186h-1.934V.093h1.935v.979a2.276 2.276 0 0 1 2.014-1.07 2.117 2.117 0 0 1 2.197 2.276z" class="cls-3" id="path9897" />\n    <path style="opacity:1;fill:#ff3336;fill-opacity:1;stroke:none;stroke-width:2.25067377;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" id="rect22907" d="M6.952.161h1.633v6H6.952z" />\n    <ellipse style="opacity:1;fill:none;fill-opacity:1;stroke:#ff3336;stroke-width:1.1640048;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" id="path27554" cx="117.776" cy="106.194" rx="2.112" ry="2.115" clip-path="url(#clipPath27566)" transform="matrix(1.23637 0 0 1.11567 -135.296 -115.354)" />\n    <path style="color:#000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000;solid-opacity:1;vector-effect:none;fill:#ff3336;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.1640048;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" d="M120.367 103.482a2.704 2.704 0 0 0-2.695 2.696 2.706 2.706 0 0 0 2.695 2.697 2.704 2.704 0 0 0 2.694-2.697 2.702 2.702 0 0 0-2.694-2.696zm0 1.164c.852 0 1.53.678 1.53 1.532s-.678 1.533-1.53 1.533c-.851 0-1.531-.68-1.531-1.533 0-.854.68-1.532 1.531-1.532z" clip-path="url(#clipPath4848)" id="ellipse27558" transform="matrix(1.12683 0 0 1.12683 -122.368 -116.497)" />\n    <path id="rect27570" style="opacity:1;fill:#ff3336;fill-opacity:1;stroke:none;stroke-width:1.72761714;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" transform="rotate(-111.55 .147 -.02)" clip-path="url(#clipPath4823)" d="M-7.915 8.771h1.254v4.605h-1.254z" />\n    <path style="fill:currentColor;stroke-width:1.1156683" d="M21.598 2.263v3.85h-1.852v-.681a2.13 2.13 0 0 1-1.808.77 1.83 1.83 0 0 1-2.03-1.852c0-1.116.803-1.774 2.231-1.785h1.551v-.09c0-.58-.38-.926-1.116-.926a4.228 4.228 0 0 0-1.762.491L16.276.79A6.248 6.248 0 0 1 19.01.122c1.63 0 2.567.804 2.578 2.142zm-1.863 1.852V3.58H18.54c-.57 0-.848.2-.848.636 0 .435.301.703.826.703a1.194 1.194 0 0 0 1.216-.804z" class="cls-3" id="path9863" />\n  </g>\n</svg>\n'}}),f=(0,d.createUseStyles)({container:{padding:"16px 8px 8px 8px"}}),h=e=>{const t=f();return m().createElement("div",{className:t.container,...e},m().createElement(u,null))},g=(0,d.createUseStyles)({tab:{borderBottom:"1px solid var(--jp-border-color2)",listStyleType:"none",margin:0,padding:"0 8px 0 8px",overflow:"hidden"},tabItem:{float:"left",display:"block",padding:"8px 10px",textTransform:"uppercase",borderRadius:"4px 4px 0 0",fontSize:"9pt",cursor:"pointer","&:hover":{background:"var(--jp-layout-color2)"},"&.active":{background:"var(--jp-layout-color2)",fontWeight:"bold"},"&.disabled":{opacity:.5,cursor:"inherit","&:hover":{background:"none"},"&.active":{background:"none"}}},tabItemRight:{extend:"tabItem",float:"right"}}),v=({menus:e,value:t,onChange:a})=>{const n=g();return m().createElement("div",null,m().createElement("ul",{className:n.tab},e.map((e=>{const o=e.value===t?"active":"",r=e.disabled?"disabled":"",l=e.right?n.tabItemRight:n.tabItem;return m().createElement("li",{onClick:e.disabled?void 0:()=>a(e.value),key:e.value,className:`${l} ${o} ${r}`},e.title)}))))},x=(0,d.createUseStyles)({"@keyframes rotation":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(359deg)"}},rotate:{animation:"$rotation 1s infinite linear",animationName:"$rotation"}}),y=({children:e,className:t,...a})=>{const n=x();return m().createElement("span",{className:`${t} ${n.rotate}`,...a},e)},w=(0,d.createUseStyles)({loading:{padding:"16px"},icon:{fontSize:"10px",verticalAlign:"middle"},iconText:{verticalAlign:"middle",paddingLeft:"4px"}}),k=()=>{const e=w();return m().createElement("div",{className:e.loading},m().createElement(y,{className:`${e.icon} material-symbols-outlined`},"hourglass_top"),m().createElement("span",{className:e.iconText},"Loading..."))},E=(0,d.createUseStyles)({control:{display:"flex",flexDirection:"row",border:e=>`1px solid ${e.outlineColor||"var(--jp-border-color1)"}`,alignItems:"stretch"},input:{flex:1,background:"none",border:"none",outline:"none",padding:"8px",minWidth:0,color:e=>e.color||"var(--jp-ui-font-color1)"},block:{width:"100%"}}),b=m().forwardRef(((e,t)=>{const{block:a,before:n,after:o,outlineColor:r,className:l,containerStyle:i,...s}=e,c=E({outlineColor:r}),d=[c.input];return a&&d.push(c.block),m().createElement("div",{className:c.control,style:i},n,m().createElement("input",{ref:t,className:d.join(" ")+" "+l||"",...s}),o)})),N=(0,d.createUseStyles)({button:{background:"none",padding:0,border:"1px solid",borderColor:e=>`${e.outlineColor||"var(--jp-border-color1)"}`,color:e=>e.color||"var(--jp-ui-font-color1)",outline:"none",cursor:"pointer",borderRadius:"2px","&:hover":{backgroundColor:e=>`${e.hoverBackgroundColor||"var(--jp-layout-color2)"}`,borderColor:e=>`${e.outlineColor||"var(--jp-border-color1)"}`,color:e=>`${e.color||e.hoverTextColor||"var(--jp-ui-font-color1)"}`},"&:active":{backgroundColor:e=>`${e.hoverBackgroundColor||"var(--jp-layout-color2)"}`},"&:disabled":{opacity:.5,cursor:"inherit","&:hover":{background:"none",borderColor:e=>`${e.outlineColor||"var(--jp-border-color1)"}`},"&:active":{background:"none"}}},block:{width:"100%",display:"block"},childrenContainer:{margin:"8px 16px 8px 16px"}}),S=({children:e,block:t,onClick:a,className:n,...o})=>{const r=N(o),l=[r.button,n];return t&&l.push(r.block),m().createElement("button",{className:l.join(" "),onClick:a,...o},m().createElement("div",{className:r.childrenContainer},e))};var C=a(94);const $=new C.Store({authConfig:{server:"",accessToken:""},hasConnection:!1,selectedWorkflow:null});var T=a(907),P=a(748),I=a(792),z=a.n(I);async function j(e="",t={},a=!0){const n=P.ServerConnection.makeSettings(),r=T.URLExt.join(n.baseUrl,o,e);let l;try{l=await P.ServerConnection.makeRequest(r,t,n)}catch(e){throw new P.ServerConnection.NetworkError(e)}const i=await l.json();if(!l.ok)throw new P.ServerConnection.ResponseError(l,i.message);return a?z()(i):i}const W=(0,d.createUseStyles)({container:{padding:"8px 16px 8px 16px"},label:{margin:"4px 0 4px 0"},textFieldContainer:{margin:"8px 0 8px 0"},buttonsContainer:{extend:"textFieldContainer",display:"flex",justifyContent:"flex-end"}}),R=({params:e={server:"",accessToken:""},onAuthParamsChange:t,actionAfterSubmit:a=()=>{}})=>{const n=W();return m().createElement(m().Fragment,null,m().createElement("div",{className:n.container},m().createElement("div",{className:n.textFieldContainer},m().createElement("div",{className:n.label},"Server Name"),m().createElement(b,{placeholder:"Server Name",value:e.server,onChange:a=>{return n=a.target.value,void t({...e,server:n});var n}})),m().createElement("div",{className:n.textFieldContainer},m().createElement("div",{className:n.label},"Access Token"),m().createElement(b,{placeholder:"Access Token",type:"password",value:e.accessToken,onChange:a=>{return n=a.target.value,void t({...e,accessToken:n});var n}})),m().createElement("div",{className:n.buttonsContainer},m().createElement(S,{onClick:()=>async function(e,t,a){try{const a=await j("env",{method:"POST",body:JSON.stringify({server:e,accessToken:t}),headers:{"Content-Type":"application/json"}});c.Notification.emit(a.message,a.status,{autoClose:3e3}),$.update((n=>{n.authConfig={server:e,accessToken:t},n.hasConnection="success"===a.status}))}catch(e){c.Notification.error("Connection Error",{autoClose:3e3})}finally{a&&a()}}(e.server,e.accessToken,a)},"Connect"))))},U=(0,d.createUseStyles)({heading:{borderBottom:"1px solid var(--jp-border-color2)",margin:0,padding:"24px 16px 8px 16px",fontWeight:"bold",textAlign:"start",fontSize:"9pt",textTransform:"uppercase"}}),D=({title:e})=>{const t=U();return m().createElement("div",{className:t.heading},e)},A=(0,d.createUseStyles)({container:{display:"flex",flexDirection:"column",maxWidth:"100%",maxHeight:"25vh",overflowY:"auto",border:"1px solid #ddd",borderRadius:"4px",padding:"10px",boxSizing:"border-box"},item:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"5px",cursor:"pointer","&:hover":{backgroundColor:"#f0f0f0"}},fileDetails:{display:"flex",alignItems:"center",overflow:"hidden"},fileName:{marginLeft:"10px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},icon:{width:"16px",height:"16px",marginRight:"5px",fontSize:"18px"},buttonContainer:{marginTop:"10px",textAlign:"center"}}),O=({onSelectFile:e})=>{const t=A(),[a,n]=(0,p.useState)([]),[o,r]=(0,p.useState)(""),[l,i]=(0,p.useState)(""),[s,c]=(0,p.useState)(!1);return(0,p.useEffect)((()=>{(async()=>{c(!0),i("");try{const e=await j(`files?path=${encodeURIComponent(o)}`);n(e.entries||[])}catch(e){i("Error fetching file entries."),console.error("Error fetching file entries:",e)}finally{c(!1)}})()}),[o]),m().createElement("div",null,m().createElement("div",{className:t.container},l&&m().createElement("p",{style:{color:"red"}},l),s?m().createElement(k,null):m().createElement(m().Fragment,null,""!==o&&m().createElement("div",null,m().createElement("div",{key:"parent-folder",className:t.item,onClick:()=>{if(""===o)return;const e=o.substring(0,o.lastIndexOf("/"));r(e)}},m().createElement("div",{className:t.fileDetails},m().createElement("span",{className:`material-symbols-outlined ${t.icon}`},"folder"),m().createElement("span",{className:t.fileName},"..")))),a.map((a=>m().createElement("div",null,m().createElement("div",{key:a.path,className:t.item,onClick:()=>(t=>{"directory"===t.type?r(t.path):e(t.path)})(a)},m().createElement("div",{className:t.fileDetails},m().createElement("span",{className:`material-symbols-outlined ${t.icon}`},"directory"===a.type?"folder":"draft"),m().createElement("span",{className:t.fileName},a.name)))))))))},B=(0,d.createUseStyles)({container:{padding:"8px 16px 8px 16px"},label:{margin:"4px 0 4px 0"},textFieldContainer:{margin:"8px 0 8px 0"},groupContainer:{display:"flex",alignItems:"stretch"},fileBrowserTextFieldContainer:{flexGrow:1,marginRight:"2px",minWidth:0},buttonsContainer:{extend:"textFieldContainer",display:"flex",justifyContent:"flex-end"},button:{marginRight:"8px"},transparent:{opacity:.5},panel:{maxHeight:"30vh",overflow:"auto",width:"100%",marginTop:"8px"},outputText:{padding:"0 8px"},errorPanel:{extend:"panel",backgroundColor:"var(--isabelline)"},successPanel:{extend:"panel",backgroundColor:"var(--light-teal)"},icon:{fontSize:"18px"},textFieldButton:{cursor:"pointer",alignItems:"center",padding:"8px 8px 8px 4px",lineHeight:0}}),_=({params:e={name:"",path:""},onParamsChange:t})=>{const a=B(),[n,o]=(0,p.useState)(!1),[r,l]=(0,p.useState)({message:"",status:""}),[i,s]=(0,p.useState)(!1),d=a=>{t({...e,path:a}),s(!1)},u=m().createElement("div",{className:a.textFieldButton,onClick:()=>{s(!i)}},m().createElement("i",{className:`${a.icon} material-symbols-outlined`},"folder_open")),f=m().createElement("div",{className:a.textFieldButton,onClick:()=>d("")},m().createElement("i",{className:`${a.icon} material-symbols-outlined`},"close"));return m().createElement(m().Fragment,null,m().createElement("div",{className:`${a.container} ${n?a.transparent:""}`},m().createElement("div",{className:a.textFieldContainer},m().createElement("div",{className:a.label},"Workflow Name"),m().createElement(b,{placeholder:"Workflow Name",disabled:n,value:e.name,onChange:a=>{return n=a.target.value,void t({...e,name:n});var n}})),m().createElement("div",{className:a.textFieldContainer},m().createElement("div",{className:a.label},"YAML File"),m().createElement(b,{placeholder:"No file selected",readOnly:!0,disabled:n,value:e.path,after:""===e.path?u:[f,u]})),i&&m().createElement(O,{onSelectFile:d}),m().createElement("div",{className:a.buttonsContainer},m().createElement(S,{onClick:()=>(async e=>{o(!0);try{const t=await j("validate",{method:"POST",body:JSON.stringify({path:e}),headers:{"Content-Type":"application/json"}});l(t)}catch(e){c.Notification.error("Connection Error",{autoClose:3e3})}finally{o(!1)}})(e.path),className:a.button,disabled:n||""===e.path||""===e.name},"Validate"),m().createElement(S,{onClick:()=>(async(e,t)=>{o(!0);try{const a=await j("run",{method:"POST",body:JSON.stringify({name:e,path:t}),headers:{"Content-Type":"application/json"}});l(a)}catch(e){c.Notification.error("Connection Error",{autoClose:3e3})}finally{o(!1)}})(e.name,e.path),disabled:n||""===e.path||""===e.name},"Create & Run")),!n&&""!==r.status&&m().createElement(m().Fragment,null,m().createElement(D,{title:"Output"}),m().createElement("div",{className:"success"===r.status?a.successPanel:a.errorPanel},m().createElement("pre",{className:a.outputText},r.message)))))},L=(0,d.createUseStyles)({box:{display:"flex",justifyContent:"space-between",color:"var(--raven)",border:"3px solid var(--sepia)",margin:"1rem 0",padding:"1em 1em","&.wrap":{flexWrap:"wrap"}}}),F=({children:e,className:t="",wrap:a=!1})=>{const n=L();return m().createElement("div",{className:`${n.box} ${t} ${a?n.box+" wrap":""}`},e)};var M=a(556),q=a.n(M);const H=(0,d.createUseStyles)({dropdown:{position:"relative",display:"inline-block"},dropdownTitle:{cursor:"pointer"},dropdownContent:{display:"none",position:"absolute",marginTop:"8px",boxShadow:"0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)",borderRadius:"4px",zIndex:1,fontSize:"10pt",background:"var(--jp-layout-color1)",color:"var(--jp-ui-font-color1)"},dropdownActive:{minWidth:e=>e.optionWidth||"150px",extend:"dropdownContent",display:"block"},dropdownListItem:{padding:"8px",width:"auto",borderBottom:"1px solid var(--jp-border-color2)",cursor:"pointer","&:hover":{backgroundColor:"var(--jp-layout-color2)"},"&:last-child":{borderBottom:"none"}},icon:{fontSize:"16px",verticalAlign:"middle"}}),G=({options:e,value:t,onItemSelected:a,optionWidth:n,...o})=>{const r=H({optionWidth:n}),[l,i]=(0,p.useState)(!1),s=e.find((e=>e.value===t)),c=(0,p.useRef)(null),d=e=>{var t;c&&!(null===(t=c.current)||void 0===t?void 0:t.contains(e.target))&&i(!1)};return(0,p.useEffect)((()=>(document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}))),m().createElement("span",{className:r.dropdown,onClick:()=>i(!l),ref:c},m().createElement("span",{className:r.dropdownTitle,...o},s?s.title:"(select)",m().createElement("span",{className:`${r.icon} material-symbols-outlined`},"arrow_drop_down")),m().createElement("div",{className:l?r.dropdownActive:r.dropdownContent},e.map((e=>m().createElement("div",{className:r.dropdownListItem,onClick:()=>a&&a(e.value),key:e.value},e.title)))))},J=(0,d.createUseStyles)({groupContainer:{display:"flex",alignItems:"stretch",padding:"8px 16px 8px 16px"},searchContainer:{flexGrow:1,marginRight:"2px",minWidth:0},filterContainer:{padding:"0 16px 0 16px",fontSize:"1em"},dropdown:{color:"var(--teal)",cursor:"pointer",marginLeft:"4px"},searchButton:{alignItems:"center",padding:"8px 8px 8px 4px",lineHeight:0},searchIcon:{fontSize:"18px"},refreshIcon:{marginRight:"2px",fontSize:"18px",display:"flex",justifyContent:"center",alignItems:"center"},actionsButton:{alignItems:"center",width:"36px",cursor:"pointer","&:hover":{background:"var(--jp-layout-color2)"}}}),V=({refresh:e,query:t,setQuery:a,handleKeyDown:n,searchType:o,setSearchType:l,sortDir:i,setSortDir:s})=>{const c=J(),d=m().createElement("div",{className:c.searchButton},m().createElement("i",{className:`${c.searchIcon} material-symbols-outlined`},"search")),p=[{title:"all",value:"all"},...r.map((e=>({title:e,value:e})))];return m().createElement("div",null,m().createElement("div",{className:c.groupContainer},m().createElement("div",{className:c.searchContainer},m().createElement(b,{placeholder:"Search",value:t,after:d,onChange:e=>a(e.target.value),onKeyDown:n,autoComplete:"off"})),m().createElement(S,{className:`${c.actionsButton}`,onClick:()=>e()},m().createElement("i",{className:`${c.refreshIcon} material-symbols-outlined`},"sync"))),m().createElement("div",{className:c.filterContainer},"Status",m().createElement(G,{className:c.dropdown,options:p,value:o,onItemSelected:l,optionWidth:"180px"}),"Sort by",m().createElement(G,{className:c.dropdown,options:[{title:"newest first",value:"desc"},{title:"oldest first",value:"asc"}],value:i,onItemSelected:s,optionWidth:"180px"})))};V.propTypes={query:q().string.isRequired,setQuery:q().func.isRequired,handleKeyDown:q().func.isRequired,searchType:q().string.isRequired,setSearchType:q().func.isRequired,sortDir:q().string.isRequired,setSortDir:q().func.isRequired};const Y=(0,d.createUseStyles)({pagination:{display:"flex",justifyContent:"center",padding:"8px 16px 8px 16px",margin:"8px 0 8px 0"},page:{margin:"0 4px 0 4px",cursor:"pointer",color:"var(--raven)","&:hover":{color:"var(--sepia)"}},activePage:{margin:"0 4px 0 4px",cursor:"pointer",color:"var(--sepia)"},textPage:{fontSize:"1.25em"}}),K=({currentPage:e,navigation:t,onPageChange:a,pageSize:n})=>{const o=Y(),r=Math.ceil(t.total/n),l=e=>{a(e)};return m().createElement("div",{className:o.pagination},m().createElement("span",{className:`${o.page} material-symbols-outlined`,onClick:t.hasPrev?()=>l(1):()=>{}},"first_page"),m().createElement("span",{className:`${o.page} material-symbols-outlined`,onClick:t.hasPrev?()=>l(e-1):()=>{}},"chevron_left"),(()=>{const t=[],a=Math.max(1,Math.min(e-1,r-3+1)),n=Math.min(r,Math.max(e+1,3));for(let r=a;r<=n;r++)t.push(m().createElement("span",{key:r,className:`${r===e?o.activePage:o.page} ${o.textPage}`,onClick:r!==e?()=>l(r):()=>{}},r));return t})(),m().createElement("span",{className:`${o.page} material-symbols-outlined`,onClick:t.hasNext?()=>l(e+1):()=>{}},"chevron_right"),m().createElement("span",{className:`${o.page} material-symbols-outlined`,onClick:t.hasNext?()=>l(r):()=>{}},"last_page"))},Q=(0,d.createUseStyles)({container:{padding:"8px 16px 8px 16px"},label:{margin:"4px 0 4px 0"},textFieldContainer:{margin:"8px 0 8px 0"},workflowsContainer:{minHeight:"400px"},workflow:{"&:hover":{backgroundColor:"lighten(var(--sepia), 3%)",borderColor:"darken(var(--sepia), 10%)",cursor:"pointer",color:"var(--raven)","& .actions":{visibility:"visible"}},"&.deleted":{opacity:.5,color:"var(--gray)"},"& .details-box":{display:"flex",alignItems:"baseline",marginRight:"1em",wordWrap:"anywhere","& .status-icon":{paddingRight:"20px"},"& .name":{fontSize:"1em"},"& .run":{paddingLeft:"0.5em",wordWrap:"break-word"},"& .size":{color:"var(--light-gray)",fontSize:"0.75em",marginRight:"0.75em","&.highlight":{color:"var(--red)"}}},"& .status-box":{display:"flex",alignItems:"center"},"& .status":{display:"flex",alignItems:"center"},"& .name, & .status":{fontWeight:"bold"},"& .status, & .run":{fontSize:"0.9em"},"& .finished":{color:"var(--green)"},"& .running":{color:"var(--blue)"},"& .failed":{color:"var(--red)"},"& .created":{color:"var(--violet)"},"& .stopped":{color:"var(--yellow)"},"& .queued, & .pending":{color:"var(--teal)"},"& .icon":{fontSize:"12px",marginRight:"3px",paddingTop:"2px"}}}),Z=({workflows:e=[],setWorkflows:t,setSelectedWorkflow:a})=>{const n=Q(),[o,r]=m().useState(!0),[l,s]=m().useState("desc"),[c,d]=m().useState("all"),[u,f]=m().useState(""),[h,g]=m().useState(""),[v,x]=m().useState(1),[y,w]=m().useState({hasNext:!1,hasPrev:!1,total:0});(0,p.useEffect)((()=>{o&&(async()=>{try{const e=await j(`workflows?&status=${c}&sort=${l}&search=${u}&page=${v}`,{method:"GET"});t("items"in e?e.items:[]),w({hasNext:e.hasNext,hasPrev:e.hasPrev,total:e.total})}catch(e){console.error("Error setting variables:",e)}finally{r(!1)}})().catch(console.error)}),[o]),(0,p.useEffect)((()=>{x(1),r(!0)}),[l,c,h]);const E=(e=1)=>{x(e),r(!0)};return o?m().createElement(k,null):m().createElement("div",null,m().createElement(D,{title:"Your workflows"}),m().createElement(V,{refresh:E,query:u,setQuery:f,handleKeyDown:e=>{"Enter"===e.key&&g(u)},searchType:c,setSearchType:d,sortDir:l,setSortDir:s}),m().createElement("div",{className:n.container},0===e.length?m().createElement("div",null,"No workflows found"):m().createElement("div",{className:n.workflowsContainer},e.map((e=>{const{id:t,name:o,run:r,status:l}=e;return m().createElement("div",{key:t,onClick:()=>a(e)},m().createElement(F,{className:`${n.workflow} ${"deleted"===l?n.workflow+" deleted":""}`},m().createElement("div",{className:n.workflow+" details-box"},m().createElement("span",null,m().createElement("span",{className:"name"},o),m().createElement("span",{className:"run"},"#",r))),m().createElement("div",{className:n.workflow+" status-box"},m().createElement("span",{className:`${n.workflow+" status"} ${l}`},m().createElement("span",{className:"material-symbols-outlined icon"},i[l].icon),m().createElement("span",null,l)))))}))),y.total>5&&m().createElement(K,{currentPage:v,navigation:y,onPageChange:E,pageSize:5})))},X=(e,t)=>{const{startedAt:a,finishedAt:n,stoppedAt:o}=e,r={failed:n,finished:n,stopped:o,deleted:n||o};if(a){const n=".000Z",o=new Date(a+n),i=r[e.status]?new Date(r[e.status]+n):t,s=Math.floor((l=o,(i.getTime()-l.getTime())/1e3));if(s<60)return`${s} second${1!==s?"s":""}`;if(s<3600){const e=Math.floor(s/60);return`${e} minute${1!==e?"s":""}`}{const e=Math.floor(s/3600);return`${e} hour${1!==e?"s":""}`}}var l;return""},ee=(0,d.createUseStyles)({groupContainer:{display:"flex",padding:"8px 16px 4px 16px"},overviewPanel:{color:"var(--raven)",fontSize:"16px",padding:"4px 18px 0 18px","& .info":{display:"flex",justifyContent:"space-between",flexShrink:0,"& .details-box":{display:"flex",alignItems:"baseline",maxWidth:"60%"}},"& .right-box":{padding:"0 2px 0 16px"},"& .name-container":{whiteSpace:"normal",overflow:"hidden",textOverflow:"ellipsis"},"& .name, & .status, & .status-icon, & .refresh":{fontWeight:"bold"},"& .name":{fontSize:"1.3em"},"& .run, & .status":{fontSize:"1.2em"},"& .run":{padding:"0 0.8em"},"& .date":{display:"block",whiteSpace:"normal",wordWrap:"break-word"},"& .status-icon":{marginRight:"3px",fontSize:"14px"},"& .finished":{color:"var(--green)"},"& .running":{color:"var(--blue)"},"& .failed":{color:"var(--red)"},"& .created":{color:"var(--violet)"},"& .stopped":{color:"var(--yellow)"},"& .queued, & .pending":{color:"var(--teal)"}},smallFont:{fontSize:"12px"},statusText:{fontSize:"16px"},iconSmall:{fontSize:"16px"},icon:{fontSize:"20px"},buttonIcon:{marginRight:"2px",fontSize:"18px",display:"flex",justifyContent:"center",alignItems:"center"},actionsButton:{alignItems:"center",width:"36px",cursor:"pointer","&:hover":{background:"var(--jp-layout-color2)"}},refresh:{color:"var(--gray)",cursor:"pointer",position:"relative",top:"3px","&:hover":{color:"var(--dark-gray)"}}}),te=({workflow:e,setWorkflow:t,refresh:a,refreshedAt:n,isWide:o})=>{const r=ee();return m().createElement("div",null,m().createElement("div",{className:r.groupContainer},m().createElement(S,{className:`${r.actionsButton}`,onClick:()=>{t(void 0),$.update((e=>{e.selectedWorkflow=null}))}},m().createElement("i",{className:`${r.buttonIcon} material-symbols-outlined`},"arrow_back"))),m().createElement("div",{className:r.overviewPanel},m().createElement("section",{className:"info"},m().createElement("div",{className:"details-box"},m().createElement("span",{className:`material-symbols-outlined status-icon ${e.status}`},i[e.status].icon),m().createElement("div",{className:"name-container"},m().createElement("span",{className:"name"},e.name),m().createElement("span",{className:"run"},"#",e.run),m().createElement("div",{className:`date ${o?"":r.smallFont}`,title:e.finishedAt||e.startedAt||e.createdAt},e.finishedAt?`Finished: ${new Date(e.finishedAt).toLocaleString()}`:e.startedAt?`Started: ${new Date(e.startedAt).toLocaleString()}`:`Created: ${new Date(e.createdAt).toLocaleString()}`))),m().createElement("div",{className:"details-box right-box"},m().createElement("div",{className:o?r.statusText:r.smallFont},m().createElement("div",null,m().createElement("span",{className:`status ${e.status}`},e.status)," ",i[e.status].preposition," ",X(e,n),l.includes(e.status)&&m().createElement("span",{onClick:()=>a(e),className:r.refresh},m().createElement("i",{className:`material-symbols-outlined ${o?r.icon:r.iconSmall}`},"sync"))),m().createElement("div",null,"step ",e.finishedJobs,"/",e.totalJobs))))))},ae=(0,d.createUseStyles)({content:{padding:"8px 16px 8px 16px"},panel:{backgroundColor:"var(--isabelline)",height:"45vh",overflow:"auto",width:"100%"},message:{padding:"16px",textAlign:"center"}}),ne=({workflow:e})=>{const t=ae();return m().createElement("div",{className:t.content},void 0!==e.engineLogs&&""!==e.engineLogs?m().createElement("pre",{className:t.panel},e.engineLogs):m().createElement("p",{className:t.message},"No logs available"))},oe=(0,d.createUseStyles)({container:{position:"relative",display:"inline-block"},dropdown:{cursor:"pointer",width:"150px"},dropdownTitle:{fontWeight:"600",marginRight:"4px"}}),re=({options:e,value:t,onItemSelected:a,optionWidth:n,...o})=>{const r=oe();return m().createElement("div",{className:r.container,...o},m().createElement("span",{className:r.dropdownTitle},"Step"),m().createElement("select",{id:"steps",name:"steplist",className:r.dropdown,onChange:e=>{const t=e.target.value;a&&a(t)}},e.map((e=>m().createElement("option",{value:e.value},e.title)))))},le=(0,d.createUseStyles)({label:e=>({display:"inline-block",padding:"2px 4px 2px 4px",backgroundColor:e.backgroundColor||"var(--platinum)",marginRight:"4px",borderRadius:"4px",maxWidth:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}),tooltipText:{marginLeft:"2px"},icon:{fontSize:"14px",verticalAlign:"middle",fontWeight:"bold",paddingBottom:"1px"}}),ie=({tooltipText:e,tooltipIcon:t,backgroundColor:a})=>{const n=le({backgroundColor:a});return m().createElement("span",{className:n.label,onMouseEnter:t=>(t=>{const a=t.target;(a.offsetWidth<a.scrollWidth||a.offsetHeight<a.scrollHeight)&&!a.getAttribute("title")&&a.setAttribute("title",e||a.innerText)})(t)},t&&m().createElement("i",{className:`${n.icon} material-symbols-outlined`},t),m().createElement("span",{className:n.tooltipText},e))},se=(0,d.createUseStyles)({content:{padding:"8px 16px 8px 16px"},dropdown:{color:"var(--dark-gray)",margin:"4px 4px 0px 0px"},panel:{backgroundColor:"var(--isabelline)",height:"42vh",overflow:"auto",width:"100%"},tooltipGroup:{margin:"8px 0px 8px 0px"},stepDuration:{color:"var(--dark-gray)",fontSize:"14px"},message:{padding:"16px",textAlign:"center"}}),ce=({workflow:e,refreshedAt:t})=>{var a;const n=se(),[o,r]=(0,p.useState)(0),l=void 0!==(null==e?void 0:e.jobLogs)?Object.values(e.jobLogs):[];return 0===l.length?m().createElement("div",{className:n.content},m().createElement("p",{className:n.message},"No logs available")):m().createElement("div",{className:n.content},m().createElement(re,{className:n.dropdown,options:l.map(((e,t)=>({title:e.jobName,value:t}))),value:o,onItemSelected:r,optionWidth:"200px"}),m().createElement("div",{className:n.tooltipGroup},m().createElement(ie,{tooltipText:(null===(a=i[l[o].status])||void 0===a?void 0:a.preposition)?`${l[o].status} ${i[l[o].status].preposition} ${X(l[o],t)}`:l[o].status,tooltipIcon:"timer",backgroundColor:i[l[o].status].color}),m().createElement(ie,{tooltipText:l[o].computeBackend,tooltipIcon:"cloud"}),m().createElement(ie,{tooltipText:l[o].dockerImg,tooltipIcon:"deployed_code"}),m().createElement(ie,{tooltipText:l[o].cmd,tooltipIcon:"attach_money"})),m().createElement("pre",{className:n.panel},l[o].logs))},de=(0,d.createUseStyles)({listItemContainer:{borderBottom:"1px solid var(--jp-border-color2)",overflow:"hidden",boxSizing:"border-box"},listItem:{display:"flex",flexDirection:"row",fontSize:"9pt",alignItems:"center",padding:"8px 16px",cursor:"pointer"},listItemCollapsed:{extend:"listItem","&:hover":{backgroundColor:"var(--jp-layout-color2)"}},textContainer:{flex:2,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},iconContainer:{lineHeight:0,marginRight:"8px"},icon:{fontSize:"16px",verticalAlign:"middle"},sizeContainer:{padding:"0 8px",color:"var(--jp-ui-font-color2)",flex:1},lastModifiedContainer:{flex:1},listFilesIcon:{extend:"icon",color:"#2196F3",cursor:"pointer"}}),pe=({key:e,file:t,checked:a,isSidebarWide:n,checkboxDisabled:o,onClick:r,style:l})=>{const i=de();return m().createElement("div",{className:i.listItemContainer,style:l},m().createElement("div",{className:i.listItemCollapsed,onClick:r,key:e},m().createElement("div",{className:i.iconContainer},m().createElement("i",{className:`material-symbols-outlined ${i.icon}`},"draft")),m().createElement("div",{className:i.textContainer},t.name),m().createElement("div",{className:i.sizeContainer},t.size),n&&m().createElement("div",{className:i.lastModifiedContainer},new Date(t.lastModified).toLocaleString()),m().createElement("input",{type:"checkbox",id:t.name,name:"checkbox",checked:a,disabled:o})))},me=(0,d.createUseStyles)({content:{padding:"8px 16px"},filesContainer:{height:"400px"},tableHeader:{display:"flex",flexDirection:"row",alignItems:"center",padding:"8px 33px 8px 40px",border:"1px solid var(--jp-border-color2)"},title:{fontSize:"10pt",fontWeight:600},fileTitle:{extend:"title",flex:2},sizeTitle:{extend:"title",padding:"0 8px",flex:1},lastModifiedTitle:{extend:"title",flex:1},groupContainer:{display:"flex",alignItems:"stretch",padding:"8px 0"},searchContainer:{flexGrow:1,marginRight:"2px",minWidth:0},searchButton:{alignItems:"center",padding:"8px 8px 8px 4px",lineHeight:0},searchIcon:{fontSize:"18px"},downloadIcon:{fontSize:"18px"},actionsButton:{alignItems:"center",cursor:"pointer","&:hover":{background:"var(--jp-layout-color2)"}},buttonContent:{display:"flex",alignItems:"center","& span":{marginLeft:"2px",paddingTop:"2px"}},transparent:{opacity:.5},message:{padding:"16px",textAlign:"center"}}),ue=({workflow:e,setWorkflow:t,isSidebarWide:a})=>{var n;const o=me(),[r,l]=(0,p.useState)([]),[i,s]=(0,p.useState)(1),[d,u]=(0,p.useState)({hasNext:!1,hasPrev:!1,total:0}),[f,h]=(0,p.useState)(""),[g,v]=(0,p.useState)(""),[x,y]=(0,p.useState)(!0),[w,E]=(0,p.useState)(!1),N=m().createElement("div",{className:o.searchButton},m().createElement("i",{className:`${o.searchIcon} material-symbols-outlined`},"search"));return(0,p.useEffect)((()=>{x&&(async()=>{try{if("deleted"!==e.status){const a=e.name+"."+e.run,n=await j(`workflows/${a}/workspace?page=${i}&search=${f}`,{method:"GET"});t({...e,...n}),u({...d,...n})}}catch(e){console.error(e)}finally{y(!1)}})()}),[x]),(0,p.useEffect)((()=>{s(1),y(!0)}),[g]),"deleted"===e.status?m().createElement("div",{className:o.content},m().createElement("p",{className:o.message},"The workflow workspace was deleted.")):x?m().createElement(k,null):m().createElement("div",{className:`${o.content} ${w?o.transparent:""}`},m().createElement("div",{className:o.groupContainer},m().createElement("div",{className:o.searchContainer},m().createElement(b,{placeholder:"Search",value:f,after:N,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key&&v(f)},autoComplete:"off",disabled:w})),m().createElement(S,{className:`${o.actionsButton}`,onClick:()=>(async()=>{E(!0);try{let a=r;if(0===r.length){const n=await j(`workflows/${e.id}/workspace`,{method:"GET"});t({...e,...n}),u({...d,...n}),a=n.files.map((e=>e.name))}for(const t of a){const a=e.name+"."+e.run;await j(`workflows/${a}/workspace/${encodeURIComponent(t)}`,{method:"GET"})}c.Notification.success(1===r.length?`${r[0]} downloaded`:`Downloaded ${a.length} files`,{autoClose:3e3})}catch(e){c.Notification.error("Error downloading files",{autoClose:3e3})}finally{E(!1)}})(),disabled:w,title:r.length>0?`Download ${r.length} file${r.length>1?"s":""}`:"Download all"},m().createElement("div",{className:o.buttonContent},m().createElement("i",{className:`${o.downloadIcon} material-symbols-outlined`},"download"),a&&m().createElement("span",null,r.length>0?`Download ${r.length} file${r.length>1?"s":""}`:"Download all")))),m().createElement("div",{className:o.tableHeader},m().createElement("div",{className:o.fileTitle},"File"),m().createElement("div",{className:o.sizeTitle},"Size"),a&&m().createElement("div",{className:o.lastModifiedTitle},"Last modified")),m().createElement("div",{className:o.filesContainer},null===(n=null==e?void 0:e.files)||void 0===n?void 0:n.map(((e,t)=>m().createElement(pe,{key:t,file:e,checked:r.includes(e.name),onClick:()=>(e=>{r.includes(e)?l(r.filter((t=>t!==e))):l([...r,e])})(e.name),isSidebarWide:a,checkboxDisabled:w})))),d.total>8&&m().createElement(K,{currentPage:i,navigation:d,onPageChange:(e=1)=>{s(e),y(!0)},pageSize:8}))},fe=(0,d.createUseStyles)({content:{padding:"8px 16px 8px 16px"},panel:{backgroundColor:"var(--isabelline)",overflow:"auto",width:"100%"},paramsPanel:{extend:"panel",maxHeight:"15vh"},specPanelShared:{extend:"panel",height:"35vh"},specPanelAlone:{extend:"panel",height:"55vh"},message:{padding:"16px",textAlign:"center"},title:{margin:"8px 0"}}),he=({workflow:e,setWorkflow:t})=>{const a=fe();if((0,p.useEffect)((()=>{e.specification||(async()=>{try{const a=await j(`workflows/${e.id}/specification`,{method:"GET"});t({...e,...a})}catch(e){console.error(e)}})()}),[e]),!e.specification)return m().createElement(k,null);const n=Object.keys(e.parameters).length>0;return m().createElement("div",{className:a.content},n&&m().createElement(m().Fragment,null,m().createElement("h4",{className:a.title},"Runtime parameters"),m().createElement("pre",{className:a.paramsPanel},JSON.stringify(e.parameters,null,2)),m().createElement("h4",{className:a.title},"Workflow specification")),m().createElement("pre",{className:n?a.specPanelShared:a.specPanelAlone},JSON.stringify(e.specification,null,2)))},ge=(0,d.createUseStyles)({panel:{height:"100%",display:"flex",flexDirection:"column"},container:{flex:1,display:"flex",flexDirection:"column",overflow:"auto"},menuBar:{marginTop:"16px"},content:{flex:1,overflow:"auto","& > div":{height:"100%"}},hidden:{display:"none"},icon:{fontSize:"18px"},menuItem:{display:"flex",alignItems:"center","& span":{marginLeft:"2px",paddingBottom:"2px"}}}),ve=({workflow:e,setWorkflow:t})=>{const a=ge(),[n,o]=(0,p.useState)(!0),[r,l]=(0,p.useState)($.useState((e=>e.selectedWorkflow))||e),[i,s]=(0,p.useState)(new Date),[c,d]=(0,p.useState)(1),[u,f]=(0,p.useState)(!1);(0,p.useEffect)((()=>{const e=document.getElementById("reana_jupyterlab:panel");if(!e)return;const t=new ResizeObserver((e=>{for(let t of e)f(t.contentRect.width>480)}));return t.observe(e),()=>{t.disconnect()}}),[]);const h=[{title:m().createElement("div",{className:a.menuItem,title:"Engine logs"},m().createElement("i",{className:`${a.icon} material-symbols-outlined`},"manufacturing"),u&&m().createElement("span",null,"Engine logs")),value:1,right:!1},{title:m().createElement("div",{className:a.menuItem,title:"Job logs"},m().createElement("i",{className:`${a.icon} material-symbols-outlined`},"terminal"),u&&m().createElement("span",null,"Job logs")),value:2,right:!1},{title:m().createElement("div",{className:a.menuItem,title:"Workspace"},m().createElement("i",{className:`${a.icon} material-symbols-outlined`},"folder"),u&&m().createElement("span",null,"Workspace")),value:3,right:!1},{title:m().createElement("div",{className:a.menuItem,title:"Specification"},m().createElement("i",{className:`${a.icon} material-symbols-outlined`},"code_blocks"),u&&m().createElement("span",null,"Specification")),value:4,right:!1}];return(0,p.useEffect)((()=>{n&&(async()=>{try{const t=await j(`workflows/${e.id}/logs`,{method:"GET"});$.update((e=>{e.selectedWorkflow={...r,...t}})),l({...r,...t}),o(!1)}catch(e){console.error(e)}})()}),[n,e.id]),m().createElement("div",null,m().createElement(te,{workflow:r,setWorkflow:t,refresh:async()=>{await(async()=>{try{const t=await j(`workflows?workflow_id_or_name=${e.id}`,{method:"GET"});$.update((e=>{e.selectedWorkflow={...r,...null==t?void 0:t.items[0]}})),l({...r,...null==t?void 0:t.items[0]}),s(new Date),o(!0)}catch(e){console.error(e)}})()},refreshedAt:i,isWide:u}),m().createElement("div",{className:a.menuBar},m().createElement(v,{menus:h,value:c,onChange:d})),m().createElement("div",{className:a.container},n||!r?m().createElement(k,null):m().createElement("div",{className:a.content},1===c&&m().createElement(ne,{workflow:r}),2===c&&m().createElement(ce,{workflow:r,refreshedAt:i}),3===c&&m().createElement(ue,{workflow:r,setWorkflow:l,isSidebarWide:u}),4===c&&m().createElement(he,{workflow:r,setWorkflow:l}))))},xe=(0,d.createUseStyles)({panel:{height:"100%",display:"flex",flexDirection:"column"},container:{flex:1,display:"flex",flexDirection:"column",overflow:"auto"},menuBar:{marginTop:"16px"},content:{flex:1,overflow:"auto","& > div":{height:"100%"}},hidden:{display:"none"}}),ye=()=>{const e=xe(),[t,a]=(0,p.useState)(!0);(0,p.useEffect)((()=>{t&&(async()=>{try{const e=await j("env",{method:"GET"});$.update((t=>{t.authConfig={server:e.server,accessToken:e.accessToken},t.hasConnection=!!e.server})),i(e)}catch(e){console.error("Error setting variables:",e)}finally{a(!1)}})().catch(console.error)}),[t]);const n=(0,C.useStoreState)($,(e=>e.hasConnection)),[o,r]=m().useState(1),[l,i]=m().useState(),[s,c]=m().useState([]),[d,u]=m().useState(),[f,g]=m().useState(),x=[{title:"Connect",value:1,right:!1},{title:"Workflows",value:2,right:!1,disabled:!n},{title:"Create",value:3,right:!1,disabled:!n}];return t?m().createElement(k,null):m().createElement("div",{className:e.panel},m().createElement(h,null),m().createElement("div",{className:e.container},m().createElement("div",{className:e.menuBar},m().createElement(v,{menus:x,value:o,onChange:r})),m().createElement("div",{className:1!==o?e.hidden:""},1===o&&m().createElement("div",null,m().createElement(D,{title:"Connect to REANA"}),m().createElement(R,{params:l,onAuthParamsChange:e=>{i(e)},actionAfterSubmit:()=>u(void 0)}))),m().createElement("div",{className:2!==o?e.hidden:""},2===o&&m().createElement("div",null,void 0!==d?m().createElement(ve,{workflow:d,setWorkflow:u}):m().createElement(Z,{workflows:s,setWorkflows:c,setSelectedWorkflow:u}))),m().createElement("div",{className:3!==o?e.hidden:""},3===o&&m().createElement("div",null,m().createElement(D,{title:"Create a Reana workflow"}),m().createElement(_,{params:f,onParamsChange:e=>{g(e)}})))))};class we extends c.VDomRenderer{constructor(){super(),super.addClass("jp-ReanaExtensionPanel"),super.title.caption="Reana extension for JupyterLab",super.title.closable=!0,super.id="reana-jupyterlab";const e=new s.LabIcon({name:"reana:icon",svgstr:'<?xml version="1.0" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"\n "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">\n<svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n width="512.000000pt" height="512.000000pt" viewBox="0 0 512.000000 512.000000"\n preserveAspectRatio="xMidYMid meet" class="jp-icon3">\n\n<g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"\nfill="currentColor" stroke="none">\n<path d="M2005 3769 c-156 -16 -323 -63 -447 -125 -37 -19 -72 -34 -78 -34 -6\n0 -10 30 -10 75 l0 75 -322 -2 -323 -3 -3 -1182 -2 -1183 325 0 325 0 0 738 0\n737 32 55 c38 68 155 184 230 228 143 85 267 115 447 110 l114 -3 55 -132 56\n-131 56 28 c176 88 413 149 610 157 193 8 295 -22 383 -112 54 -56 76 -111 84\n-212 l6 -73 -374 0 c-206 0 -405 -5 -444 -10 -367 -53 -600 -240 -661 -530\n-24 -111 -15 -301 19 -397 83 -241 269 -413 517 -480 100 -27 394 -23 510 7\n155 40 299 121 400 224 24 25 47 46 50 46 4 0 5 -58 2 -130 l-5 -130 372 0\n371 0 0 738 c0 734 -6 892 -35 1007 -72 277 -250 461 -540 560 -229 78 -596\n82 -927 12 -96 -21 -111 -22 -140 -9 -67 28 -256 71 -362 81 -122 12 -174 12\n-291 0z m1555 -1498 c0 -102 -2 -112 -32 -170 -90 -174 -289 -270 -503 -243\n-165 22 -255 99 -271 235 -12 106 23 195 95 240 66 41 112 46 419 46 l292 1 0\n-109z"/>\n</g>\n</svg>\n'});super.title.icon=e.bindprops()}render(){return m().createElement(ye,null)}}const ke={id:o,autoStart:!0,requires:[n.ILabShell],optional:[n.ILayoutRestorer],activate:function(e,t,a){const n=new we;n.id=o+":panel",t.add(n,"left",{rank:900}),t.activateById(n.id),a&&a.add(n,n.id)}}},694:(e,t,a)=>{"use strict";var n=a(925);function o(){}function r(){}r.resetWarningCache=o,e.exports=function(){function e(e,t,a,o,r,l){if(l!==n){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:o};return a.PropTypes=a,a}},556:(e,t,a)=>{e.exports=a(694)()},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}}]);