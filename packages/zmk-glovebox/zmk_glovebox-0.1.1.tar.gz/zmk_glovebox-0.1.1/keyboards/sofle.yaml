keyboard: "sofle"
description: "Sofle 58-key split keyboard with rotary encoders and OLED displays"
vendor: "josefadamcik"
key_count: 58
is_split: true

# Include all component configurations
includes:
  - "config/all.yaml" # All shared config files
  - "config/firmware/zmk.yaml" # All shared config files

compile_methods:
  - method_type: zmk_config
    repository: "zmkfirmware/zmk"
    branch: "main" # Default, overridden by firmware config
    build_config:
      board: ["nice_nano_v2"]
      shield: ["sofle_left", "sofle_right"]

# Flash method configurations
flash_methods:
  - method_type: usb
    device_query: "vendor=Adafruit and serial~=QTPY-.* and removable=true"
    mount_timeout: 30
    copy_timeout: 60
    sync_after_copy: true

firmwares:
  main:
    version: "main"
    description: "Latest ZMK firmware main branch"
    build_options:
      repository: "zmkfirmware/zmk"
      branch: "main"

  v3.5:
    version: "v3.5"
    description: "Stable ZMK firmware v3.5"
    build_options:
      repository: "zmkfirmware/zmk"
      branch: "v3.5"

keymap:
  header_includes:
    - "dt-bindings/zmk/bt.h"
    - "dt-bindings/zmk/rgb.h"
  formatting:
    key_gap: "  "
    base_indent: ""
    rows:
      # Number row
      - [0, 1, 2, 3, 4, 5, -1, -1, 6, 7, 8, 9, 10, 11]
      # Top row
      - [12, 13, 14, 15, 16, 17, -1, -1, 18, 19, 20, 21, 22, 23]
      # Home row
      - [24, 25, 26, 27, 28, 29, -1, -1, 30, 31, 32, 33, 34, 35]
      # Bottom row with encoder butto
      - [36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49]
      # Thumb cluster
      - [-1, -1, -1, 50, 51, 52, 53, 54, 55, 56, 57, -1, -1, -1]

  keymap_dtsi_file: "config/templates/keymap.dtsi.j2"

  key_position_header: |
    // Left hand number row
    #define POS_L0 0
    #define POS_L1 1
    #define POS_L2 2
    #define POS_L3 3
    #define POS_L4 4
    #define POS_L5 5

    // Left hand top row
    #define POS_L6 12
    #define POS_L7 13
    #define POS_L8 14
    #define POS_L9 15
    #define POS_L10 16
    #define POS_L11 17

    // Left hand home row
    #define POS_L12 24
    #define POS_L13 25
    #define POS_L14 26
    #define POS_L15 27
    #define POS_L16 28
    #define POS_L17 29

    // Left hand bottom row
    #define POS_L18 36
    #define POS_L19 37
    #define POS_L20 38
    #define POS_L21 39
    #define POS_L22 40
    #define POS_L23 41
    #define POS_L24 42  // Encoder button

    // Left hand thumb cluster
    #define POS_L25 50
    #define POS_L26 51
    #define POS_L27 52
    #define POS_L28 53

    // Right hand number row
    #define POS_R0 6
    #define POS_R1 7
    #define POS_R2 8
    #define POS_R3 9
    #define POS_R4 10
    #define POS_R5 11

    // Right hand top row
    #define POS_R6 18
    #define POS_R7 19
    #define POS_R8 20
    #define POS_R9 21
    #define POS_R10 22
    #define POS_R11 23

    // Right hand home row
    #define POS_R12 30
    #define POS_R13 31
    #define POS_R14 32
    #define POS_R15 33
    #define POS_R16 34
    #define POS_R17 35

    // Right hand bottom row
    #define POS_R18 43  // Encoder button
    #define POS_R19 44
    #define POS_R20 45
    #define POS_R21 46
    #define POS_R22 47
    #define POS_R23 48
    #define POS_R24 49

    // Right hand thumb cluster
    #define POS_R25 54
    #define POS_R26 55
    #define POS_R27 56
    #define POS_R28 57

