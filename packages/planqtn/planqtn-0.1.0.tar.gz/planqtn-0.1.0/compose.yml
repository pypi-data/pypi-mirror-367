services:
  planqtn_api:
    container_name: planqtn_api
    restart: always
    build:
      context: .
      dockerfile: Dockerfile.api
    command: python planqtn_api/planqtn_server.py --reload
    environment:
      - PYTHONPATH=/app
    develop:
      watch:
        - path: ./planqtn
          action: rebuild
        - path: ./planqtn_api
          action: rebuild

        - path: ./planqtn
          action: restart
        - path: ./planqtn_api
          action: restart
    ports:
      - "5005:5005"
    networks:
      - supabase_network_planqtn-dev

networks:
  supabase_network_planqtn-dev:
    external: true
