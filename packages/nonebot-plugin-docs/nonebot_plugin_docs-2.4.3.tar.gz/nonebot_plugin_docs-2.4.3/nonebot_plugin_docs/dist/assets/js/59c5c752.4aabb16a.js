"use strict";(self.webpackChunknonebot=self.webpackChunknonebot||[]).push([["3748"],{14336:function(n,e,o){o.r(e),o.d(e,{default:()=>h,frontMatter:()=>t,metadata:()=>s,assets:()=>d,toc:()=>a,contentTitle:()=>r});var s=JSON.parse('{"id":"best-practice/alconna/shortcut","title":"\u5FEB\u6377\u65B9\u5F0F\u58F0\u660E","description":"\u5FEB\u6377\u65B9\u5F0F","source":"@site/docs/best-practice/alconna/shortcut.md","sourceDirName":"best-practice/alconna","slug":"/best-practice/alconna/shortcut","permalink":"/website/docs/next/best-practice/alconna/shortcut","draft":false,"unlisted":false,"editUrl":"https://github.com/nonebot/nonebot2/edit/master/website/docs/best-practice/alconna/shortcut.md","tags":[],"version":"current","lastUpdatedBy":"noneflow[bot]","lastUpdatedAt":1754561629000,"sidebarPosition":6,"frontMatter":{"sidebar_position":6,"description":"\u5FEB\u6377\u65B9\u5F0F"},"sidebar":"tutorial","previous":{"title":"\u8F85\u52A9\u529F\u80FD","permalink":"/website/docs/next/best-practice/alconna/uniseg/utils"},"next":{"title":"\u5185\u7F6E\u7EC4\u4EF6","permalink":"/website/docs/next/best-practice/alconna/builtins"}}'),c=o("24246"),i=o("80980");let t={sidebar_position:6,description:"\u5FEB\u6377\u65B9\u5F0F"},r="\u5FEB\u6377\u65B9\u5F0F\u58F0\u660E",d={},a=[{value:"\u88C5\u9970\u5668\u6784\u9020\u5668",id:"\u88C5\u9970\u5668\u6784\u9020\u5668",level:2},{value:"\u7C7B Koishi \u6784\u9020\u5668",id:"\u7C7B-koishi-\u6784\u9020\u5668",level:2},{value:"\u53C2\u6570\u7C7B\u578B",id:"\u53C2\u6570\u7C7B\u578B",level:3},{value:"\u4ECE\u6587\u4EF6\u52A0\u8F7D",id:"\u4ECE\u6587\u4EF6\u52A0\u8F7D",level:3}];function l(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...n.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.header,{children:(0,c.jsx)(e.h1,{id:"\u5FEB\u6377\u65B9\u5F0F\u58F0\u660E",children:"\u5FEB\u6377\u65B9\u5F0F\u58F0\u660E"})}),"\n",(0,c.jsxs)(e.p,{children:["\u9488\u5BF9 ",(0,c.jsx)(e.code,{children:"Alconna"})," \u7F16\u5199\u5BF9\u4E8E\u5165\u95E8\u5F00\u53D1\u8005\u6765\u8BF4\u8F83\u4E3A\u590D\u6742\u7684\u95EE\u9898\uFF0C\u672C\u63D2\u4EF6\u63D0\u4F9B\u4E86\u4E00\u4E9B\u5FEB\u6377\u65B9\u5F0F\u6765\u7B80\u5316\u5F00\u53D1\u8005\u7684\u5DE5\u4F5C\u3002"]}),"\n",(0,c.jsx)(e.h2,{id:"\u88C5\u9970\u5668\u6784\u9020\u5668",children:"\u88C5\u9970\u5668\u6784\u9020\u5668"}),"\n",(0,c.jsxs)(e.p,{children:["\u672C\u63D2\u4EF6\u63D0\u4F9B\u4E86\u4E00\u4E2A ",(0,c.jsx)(e.code,{children:"funcommand"})," \u88C5\u9970\u5668, \u5176\u7528\u4E8E\u5C06\u4E00\u4E2A\u63A5\u53D7\u4EFB\u610F\u53C2\u6570\uFF0C \u8FD4\u56DE ",(0,c.jsx)(e.code,{children:"str"})," \u6216 ",(0,c.jsx)(e.code,{children:"Message"})," \u6216 ",(0,c.jsx)(e.code,{children:"MessageSegment"})," \u7684\u51FD\u6570\u8F6C\u6362\u4E3A\u547D\u4EE4\u54CD\u5E94\u5668\uFF1A"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-python",children:"from nonebot_plugin_alconna import funcommand\n\n\n@funcommand()\nasync def echo(msg: str):\n    return msg\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u5176\u7B49\u540C\u4E8E\uFF1A"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-python",children:'from arclet.alconna import Alconna, Args\nfrom nonebot_plugin_alconna import on_alconna, AlconnaMatch, Match\n\n\necho = on_alconna(Alconna("echo", Args["msg", str]))\n\n@echo.handle()\nasync def echo_exit(msg: Match[str] = AlconnaMatch("msg")):\n    await echo.finish(msg.result)\n\n'})}),"\n",(0,c.jsxs)(e.p,{children:["\u76F8\u6BD4\u4E8E ",(0,c.jsx)(e.code,{children:"on_alconna"}),"\uFF0C ",(0,c.jsx)(e.code,{children:"funcommand"})," \u589E\u52A0\u4E86\u4E09\u4E2A\u53C2\u6570 ",(0,c.jsx)(e.code,{children:"name"}),", ",(0,c.jsx)(e.code,{children:"prefixes"})," \u548C ",(0,c.jsx)(e.code,{children:"description"}),"\u3002"]}),"\n",(0,c.jsx)(e.h2,{id:"\u7C7B-koishi-\u6784\u9020\u5668",children:"\u7C7B Koishi \u6784\u9020\u5668"}),"\n",(0,c.jsxs)(e.p,{children:["\u672C\u63D2\u4EF6\u63D0\u4F9B\u4E86\u4E00\u4E2A ",(0,c.jsx)(e.code,{children:"Command"})," \u6784\u9020\u5668\uFF0C\u5176\u57FA\u4E8E ",(0,c.jsx)(e.code,{children:"arclet.alconna.tools"})," \u4E2D\u7684 ",(0,c.jsx)(e.code,{children:"AlconnaString"}),"\uFF0C \u4EE5\u7C7B\u4F3C ",(0,c.jsx)(e.code,{children:"Koishi"})," \u4E2D",(0,c.jsx)(e.a,{href:"https://koishi.chat/zh-CN/guide/basic/command.html",children:"\u6CE8\u518C\u547D\u4EE4"}),"\u7684\u65B9\u5F0F\u6765\u6784\u5EFA\u4E00\u4E2A ",(0,c.jsx)(e.strong,{children:"AlconnaMatcher"})," \uFF1A"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-python",children:'from nonebot_plugin_alconna import Command, Arparma\n\n\nbook = (\n    Command("book", "\u6D4B\u8BD5")\n    .option("writer", "-w <id:int>")\n    .option("writer", "--anonymous", {"id": 0})\n    .usage("book [-w <id:int> | --anonymous]")\n    .shortcut("\u6D4B\u8BD5", {"args": ["--anonymous"]})\n    .build()\n)\n\n@book.handle()\nasync def _(arp: Arparma):\n    await book.send(str(arp.options))\n'})}),"\n",(0,c.jsxs)(e.p,{children:["\u751A\u81F3\uFF0C\u4F60\u53EF\u4EE5\u8BBE\u7F6E ",(0,c.jsx)(e.code,{children:"action"})," \u6765\u8BBE\u5B9A\u54CD\u5E94\u884C\u4E3A\uFF1A"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-python",children:'book = (\n    Command("book", "\u6D4B\u8BD5")\n    .option("writer", "-w <id:int>")\n    .option("writer", "--anonymous", {"id": 0})\n    .usage("book [-w <id:int> | --anonymous]")\n    .shortcut("\u6D4B\u8BD5", {"args": ["--anonymous"]})\n    .action(lambda options: str(options))  # \u4F1A\u81EA\u52A8\u901A\u8FC7 bot.send \u53D1\u9001\n    .build()\n)\n'})}),"\n",(0,c.jsx)(e.h3,{id:"\u53C2\u6570\u7C7B\u578B",children:"\u53C2\u6570\u7C7B\u578B"}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"Command"})," \u7684\u53C2\u6570\u7C7B\u578B\u4E5F\u5982 ",(0,c.jsx)(e.code,{children:"koishi"})," \u4E00\u6837\uFF0C",(0,c.jsx)(e.strong,{children:"\u5FC5\u9009\u53C2\u6570"})," \u7528\u5C16\u62EC\u53F7\u5305\u88F9\uFF0C",(0,c.jsx)(e.strong,{children:"\u53EF\u9009\u53C2\u6570"})," \u7528\u65B9\u62EC\u53F7\u5305\u88F9:"]}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"foo"})," \u8868\u793A\u53C2\u6570 ",(0,c.jsx)(e.code,{children:"foo"}),", \u7C7B\u578B\u4E3A Any"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"foo:int"})," \u8868\u793A\u53C2\u6570 ",(0,c.jsx)(e.code,{children:"foo"}),", \u7C7B\u578B\u4E3A int"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"foo:int=1"})," \u8868\u793A\u53C2\u6570 ",(0,c.jsx)(e.code,{children:"foo"}),", \u7C7B\u578B\u4E3A int, \u9ED8\u8BA4\u503C\u4E3A 1"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"...foo"})," \u8868\u793A",(0,c.jsx)(e.a,{href:"/website/docs/next/best-practice/alconna/command#allparam",children:"\u6CDB\u5339\u914D\u53C2\u6570"})]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"foo:str+"}),", ",(0,c.jsx)(e.code,{children:"foo:str*"})," \u8868\u793A",(0,c.jsx)(e.a,{href:"/website/docs/next/best-practice/alconna/command#multivar-%E4%B8%8E-keywordvar",children:"\u53D8\u957F\u53C2\u6570"})," ",(0,c.jsx)(e.code,{children:"foo"}),", \u7C7B\u578B\u4E3A str"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"foo:+str"}),", ",(0,c.jsx)(e.code,{children:"foo:text"})," \u8868\u793A\u53C2\u6570 ",(0,c.jsx)(e.code,{children:"foo"}),", \u7C7B\u578B\u4E3A str, \u5E76\u4E14\u5C06\u5305\u542B\u7A7A\u683C (\u5373\u5C06\u53D8\u957F\u53C2\u6570\u7684\u7ED3\u679C\u7528\u7A7A\u683C\u5408\u5E76)"]}),"\n"]}),"\n",(0,c.jsx)(e.p,{children:"\u7279\u522B\u7684\uFF0C\u9488\u5BF9\u7C7B\u578B\u90E8\u5206\uFF0C\u672C\u63D2\u4EF6\u62D3\u5C55\u4E86\u5982\u4E0B\u5185\u5BB9:"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"foo:At"}),", ",(0,c.jsx)(e.code,{children:"foo:Image"}),", ... \u8868\u793A\u7C7B\u578B\u4E3A",(0,c.jsx)(e.a,{href:"/website/docs/next/best-practice/alconna/uniseg/segment",children:"\u901A\u7528\u6D88\u606F\u6BB5"})]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"foo:select(Image).first"})," \u8868\u793A\u83B7\u53D6\u5B50\u5143\u7D20\u7C7B\u578B"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"foo:Dot(Image, 'url')"})," \u8868\u793A\u7C7B\u578B\u4E3A ",(0,c.jsx)(e.code,{children:"Image"}),"\uFF0C\u5E76\u4E14\u53EA\u83B7\u53D6 ",(0,c.jsx)(e.code,{children:"url"})," \u5C5E\u6027"]}),"\n"]}),"\n",(0,c.jsx)(e.h3,{id:"\u4ECE\u6587\u4EF6\u52A0\u8F7D",children:"\u4ECE\u6587\u4EF6\u52A0\u8F7D"}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"Command"})," \u652F\u6301\u8BFB\u53D6 ",(0,c.jsx)(e.code,{children:"json"})," \u6216 ",(0,c.jsx)(e.code,{children:"yaml"})," \u6587\u4EF6\u6765\u52A0\u8F7D\u547D\u4EE4\uFF1A"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-yml",metastring:'title="book.yml"',children:'command: book\nhelp: \u6D4B\u8BD5\noptions:\n  - name: writer\n    opt: "-w <id:int>"\n  - name: writer\n    opt: "--anonymous"\n    default:\n      id: 1\nusage: book [-w <id:int> | --anonymous]\nshortcuts:\n  - key: \u6D4B\u8BD5\n    args: ["--anonymous"]\nactions:\n  - params: ["options"]\n    code: |\n      return str(options)\n'})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-python",metastring:'title="\u52A0\u8F7D"',children:'from nonebot_plugin_alconna import command_from_yaml\n\nbook = command_from_yaml("book.yml")\n'})})]})}function h(n={}){let{wrapper:e}={...(0,i.a)(),...n.components};return e?(0,c.jsx)(e,{...n,children:(0,c.jsx)(l,{...n})}):l(n)}},80980:function(n,e,o){o.d(e,{Z:function(){return r},a:function(){return t}});var s=o(27378);let c={},i=s.createContext(c);function t(n){let e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:t(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);