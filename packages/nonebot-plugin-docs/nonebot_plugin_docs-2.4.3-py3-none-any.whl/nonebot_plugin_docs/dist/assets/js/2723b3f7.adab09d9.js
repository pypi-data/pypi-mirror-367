"use strict";(self.webpackChunknonebot=self.webpackChunknonebot||[]).push([["2464"],{83053:function(e,n,s){s.r(n),s.d(n,{default:()=>x,frontMatter:()=>r,metadata:()=>i,assets:()=>t,toc:()=>o,contentTitle:()=>l});var i=JSON.parse('{"id":"api/drivers/websockets","title":"nonebot.drivers.websockets","description":"nonebot.drivers.websockets \u6A21\u5757","source":"@site/docs/api/drivers/websockets.md","sourceDirName":"api/drivers","slug":"/api/drivers/websockets","permalink":"/website/docs/next/api/drivers/websockets","draft":false,"unlisted":false,"editUrl":"https://github.com/nonebot/nonebot2/edit/master/website/docs/api/drivers/websockets.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"mdx":{"format":"md"},"sidebar_position":4,"description":"nonebot.drivers.websockets \u6A21\u5757"},"sidebar":"api","previous":{"title":"nonebot.drivers.httpx","permalink":"/website/docs/next/api/drivers/httpx"},"next":{"title":"nonebot.drivers.quart","permalink":"/website/docs/next/api/drivers/quart"}}'),c=s("24246"),d=s("80980");let r={mdx:{format:"md"},sidebar_position:4,description:"nonebot.drivers.websockets \u6A21\u5757"},l="nonebot.drivers.websockets",t={},o=[{value:"<em>def</em> <code>catch_closed(func)</code>",id:"catch-closed",level:2},{value:"<em>class</em> <code>Mixin(&lt;auto&gt;)</code>",id:"Mixin",level:2},{value:"<em>method</em> <code>websocket(setup)</code>",id:"Mixin-websocket",level:3},{value:"<em>class</em> <code>WebSocket(*, request, websocket)</code>",id:"WebSocket",level:2},{value:"<em>async method</em> <code>accept()</code>",id:"WebSocket-accept",level:3},{value:"<em>async method</em> <code>close(code=1000, reason=&quot;&quot;)</code>",id:"WebSocket-close",level:3},{value:"<em>async method</em> <code>receive()</code>",id:"WebSocket-receive",level:3},{value:"<em>async method</em> <code>receive_text()</code>",id:"WebSocket-receive-text",level:3},{value:"<em>async method</em> <code>receive_bytes()</code>",id:"WebSocket-receive-bytes",level:3},{value:"<em>async method</em> <code>send_text(data)</code>",id:"WebSocket-send-text",level:3},{value:"<em>async method</em> <code>send_bytes(data)</code>",id:"WebSocket-send-bytes",level:3},{value:"<em>class</em> <code>Driver(env, config)</code>",id:"Driver",level:2}];function h(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.a)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"nonebotdriverswebsockets",children:"nonebot.drivers.websockets"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.a,{href:"https://websockets.readthedocs.io/",children:"websockets"})," \u9A71\u52A8\u9002\u914D"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"nb driver install websockets\n# \u6216\u8005\npip install nonebot2[websockets]\n"})}),"\n",(0,c.jsx)(n.admonition,{title:"\u63D0\u793A",type:"tip",children:(0,c.jsx)(n.p,{children:"\u672C\u9A71\u52A8\u4EC5\u652F\u6301\u5BA2\u6237\u7AEF WebSocket \u8FDE\u63A5"})}),"\n",(0,c.jsxs)(n.h2,{id:"catch-closed",children:[(0,c.jsx)(n.em,{children:"def"})," ",(0,c.jsx)(n.code,{children:"catch_closed(func)"})]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"func"})," ((P) -> CoroutineType[Any, Any, T])"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u8FD4\u56DE"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"(P) -> CoroutineType[Any, Any, T]"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.h2,{id:"Mixin",children:[(0,c.jsx)(n.em,{children:"class"})," ",(0,c.jsx)(n.code,{children:"Mixin(<auto>)"})]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"\u8BF4\u660E:"})," Websockets Mixin"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,c.jsx)(n.p,{children:"auto"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.h3,{id:"Mixin-websocket",children:[(0,c.jsx)(n.em,{children:"method"})," ",(0,c.jsx)(n.code,{children:"websocket(setup)"})]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"setup"})," (",(0,c.jsx)(n.a,{href:"/website/docs/next/api/drivers/#Request",children:"Request"}),")"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u8FD4\u56DE"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["AsyncGenerator[",(0,c.jsx)(n.a,{href:"/website/docs/next/api/drivers/#WebSocket",children:"WebSocket"}),", None]"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.h2,{id:"WebSocket",children:[(0,c.jsx)(n.em,{children:"class"})," ",(0,c.jsx)(n.code,{children:"WebSocket(*, request, websocket)"})]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"\u8BF4\u660E:"})," Websockets WebSocket Wrapper"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"request"})," (",(0,c.jsx)(n.a,{href:"/website/docs/next/api/drivers/#Request",children:"Request"}),")"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"websocket"})," (ClientConnection)"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.h3,{id:"WebSocket-accept",children:[(0,c.jsx)(n.em,{children:"async method"})," ",(0,c.jsx)(n.code,{children:"accept()"})]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,c.jsx)(n.p,{children:"empty"}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u8FD4\u56DE"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"untyped"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.h3,{id:"WebSocket-close",children:[(0,c.jsx)(n.em,{children:"async method"})," ",(0,c.jsx)(n.code,{children:'close(code=1000, reason="")'})]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"code"})," (int)"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"reason"})," (str)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u8FD4\u56DE"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"untyped"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.h3,{id:"WebSocket-receive",children:[(0,c.jsx)(n.em,{children:"async method"})," ",(0,c.jsx)(n.code,{children:"receive()"})]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,c.jsx)(n.p,{children:"empty"}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u8FD4\u56DE"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"str | bytes"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.h3,{id:"WebSocket-receive-text",children:[(0,c.jsx)(n.em,{children:"async method"})," ",(0,c.jsx)(n.code,{children:"receive_text()"})]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,c.jsx)(n.p,{children:"empty"}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u8FD4\u56DE"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"str"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.h3,{id:"WebSocket-receive-bytes",children:[(0,c.jsx)(n.em,{children:"async method"})," ",(0,c.jsx)(n.code,{children:"receive_bytes()"})]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,c.jsx)(n.p,{children:"empty"}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u8FD4\u56DE"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"bytes"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.h3,{id:"WebSocket-send-text",children:[(0,c.jsx)(n.em,{children:"async method"})," ",(0,c.jsx)(n.code,{children:"send_text(data)"})]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"data"})," (str)"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u8FD4\u56DE"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"None"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.h3,{id:"WebSocket-send-bytes",children:[(0,c.jsx)(n.em,{children:"async method"})," ",(0,c.jsx)(n.code,{children:"send_bytes(data)"})]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"data"})," (bytes)"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u8FD4\u56DE"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"None"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.h2,{id:"Driver",children:[(0,c.jsx)(n.em,{children:"class"})," ",(0,c.jsx)(n.code,{children:"Driver(env, config)"})]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"env"})," (",(0,c.jsx)(n.a,{href:"/website/docs/next/api/config#Env",children:"Env"}),")"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"config"})," (",(0,c.jsx)(n.a,{href:"/website/docs/next/api/config#Config",children:"Config"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function x(e={}){let{wrapper:n}={...(0,d.a)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(h,{...e})}):h(e)}},80980:function(e,n,s){s.d(n,{Z:function(){return l},a:function(){return r}});var i=s(27378);let c={},d=i.createContext(c);function r(e){let n=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),i.createElement(d.Provider,{value:n},e.children)}}}]);