import{c as r,o,w as e,a as t,e as h,t as a,m as p,F as v,G as D,l as s,_ as N,n as P,b as T,g as x,f,q as g,k as U,M as G,N as z,i as M}from"./index-DV9Li2cg.js";import{u as Q}from"./permissions-mL5hLHcW.js";import{p as H}from"./parameters-Lgiqp7aw.js";import{c as A,V,b as C}from"./VCard-DFWiFORP.js";import{V as J}from"./VChip-nZ0uhY7t.js";import{V as K}from"./VDataTable-D_0_xJTl.js";import{V as $,d as j,e as E}from"./VAvatar-BAgTUIvX.js";import{V as W}from"./VTextField-CLwRV0Cb.js";import{V as _,a as c}from"./VRow-C_Ydf6yr.js";import{V as X,a as Y}from"./VToolbar-CGwhgdmI.js";import"./tag-CFK9dzMJ.js";import"./VProgressCircular-CrEXxs7k.js";import"./VSelect-CS51PDEt.js";import"./forwardRefs-Cpc3YYl6.js";import"./ssrBoot-BsxW6uW4.js";import"./VMenu-B_dVqOmo.js";import"./VCheckboxBtn-j7di4leN.js";import"./VSelectionControl-DiOqtY38.js";import"./VTable-KsiZ3cBz.js";import"./filter-D7NrAf6a.js";/* empty css              */const Z={class:"headline"},ee={__name:"AccountAliases",props:{account:{type:Object,default:null}},setup(l){return(n,m)=>(o(),r(C,null,{default:e(()=>[t(A,null,{default:e(()=>[h("span",Z,a(n.$gettext("Aliases")),1)]),_:1}),t(V,null,{default:e(()=>[(o(!0),p(v,null,D(l.account.aliases,u=>(o(),r(J,{key:u,class:"mr-2 mt-2"},{default:e(()=>[s(a(u),1)]),_:2},1024))),128))]),_:1})]),_:1}))}},w="senderaddresses",B={getAll(){return N.get(`${w}/`)},getAllForMailbox(l){return N.get(`${w}/`,{params:{mailbox:l}})},create(l){return N.post(`${w}/`,l)},delete(l){return N.delete(`${w}/${l}/`)}},te={class:"headline"},ae={key:0},le={__name:"AccountSenderAddresses",props:{account:{type:Object,default:null}},setup(l){const n=P(),{$gettext:m}=T(),u=l,i=x([]),y=x(!1),d=x(""),q=[{title:m("Address"),key:"address"},{title:"",key:"actions",align:"end",sortable:!1}];function I(){i.value.push({}),y.value=!0}function R(){B.getAllForMailbox(u.account.mailbox.pk).then(k=>{i.value=k.data})}function L(){const k={address:d.value,mailbox:u.account.mailbox.pk};B.create(k).then(()=>{R(),d.value=null,y.value=!1,n.displayNotification({msg:m("Sender address added")})})}function O(k){B.delete(k.pk).then(()=>{R(),n.displayNotification({msg:m("Sender address deleted")})})}return R(),(k,S)=>(o(),r(C,null,{default:e(()=>[t(A,null,{default:e(()=>[h("span",te,a(f(m)("Sender addresses")),1)]),_:1}),t(V,null,{default:e(()=>[t(K,{headers:q,items:i.value,"no-data-text":f(m)("No sender address defined for this account")},{"item.address":e(({item:b})=>[b.pk?(o(),p("span",ae,a(b.address),1)):(o(),r(W,{key:1,modelValue:d.value,"onUpdate:modelValue":S[0]||(S[0]=F=>d.value=F),label:f(m)("Specify an email address")},{append:e(()=>[d.value?(o(),r($,{key:0,icon:"mdi-content-save",color:"primary",variant:"text",onClick:L})):g("",!0)]),_:1},8,["modelValue","label"]))]),"item.actions":e(({item:b})=>[b.pk?(o(),r($,{key:0,icon:"mdi-delete-outline",color:"red",title:f(m)("Remove this address"),variant:"text",onClick:F=>O(b)},null,8,["title","onClick"])):g("",!0)]),bottom:e(()=>S[1]||(S[1]=[])),_:2},1032,["items","no-data-text"]),y.value?g("",!0):(o(),r($,{key:0,size:"small",color:"primary",variant:"outlined",onClick:I},{default:e(()=>[t(j,{size:"small",icon:"mdi-plus"}),s(" "+a(f(m)("Add sender address")),1)]),_:1}))]),_:1})]),_:1}))}},ne={class:"headline"},oe={__name:"AccountSummary",props:{account:{type:Object,default:null}},setup(l){return(n,m)=>(o(),r(C,null,{default:e(()=>[t(A,null,{default:e(()=>[h("span",ne,a(n.$gettext("General information")),1)]),_:1}),t(V,null,{default:e(()=>[t(_,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Creation date")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(n.$date(l.account.date_joined)),1)]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Last login date")),1)]),_:1}),l.account.last_login?(o(),r(c,{key:0,cols:"6"},{default:e(()=>[s(a(n.$date(l.account.last_login)),1)]),_:1})):(o(),r(c,{key:1,cols:"6"},{default:e(()=>[s(a(n.$gettext("Never logged-in")),1)]),_:1}))]),_:1}),t(_,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Full name")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(l.account.first_name)+" "+a(l.account.last_name),1)]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Role")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(l.account.role),1)]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Secondary email")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(l.account.secondary_email),1)]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Phone number")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(l.account.phone_number),1)]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Enabled")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[t(j,{color:l.account.is_active?"success":"error",icon:l.account.is_active?"mdi-check-circle":"mdi-close-circle",variant:"flat"},null,8,["color","icon"])]),_:1})]),_:1}),l.account.mailbox?(o(),p(v,{key:0},[t(_,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Quota")),1)]),_:1}),l.account.mailbox.quota==="0"?(o(),r(c,{key:0,cols:"6"},{default:e(()=>[s(a(n.$gettext("Unlimited")),1)]),_:1})):(o(),r(c,{key:1,cols:"6"},{default:e(()=>[t(E,{color:l.account.mailbox.quota_usage<80?"primary":"warning","model-value":l.account.mailbox.quota_usage,height:"25",class:"white--text"},{default:e(({value:u})=>[s(a(Math.ceil(u))+"% ("+a(l.account.mailbox.quota)+" "+a(n.$gettext("MB"))+") ",1)]),_:1},8,["color","model-value"])]),_:1}))]),_:1}),l.account.mailbox.message_limit?(o(),r(_,{key:0},{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Daily sending limit")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(l.account.mailbox.message_limit),1)]),_:1})]),_:1})):g("",!0)],64)):g("",!0)]),_:1})]),_:1}))}},se={class:"headline"},ue={key:1},ce={class:"text-disabled"},de={__name:"DomainAdminDomains",props:{account:{type:Object,default:null}},setup(l){const{$gettext:n}=T();return(m,u)=>(o(),r(C,null,{default:e(()=>[t(A,null,{default:e(()=>[h("span",se,a(f(n)("Administered domains")),1)]),_:1}),t(V,null,{default:e(()=>[l.account.domains!==void 0&&l.account.domains.length?(o(!0),p(v,{key:0},D(l.account.domains,i=>(o(),r(_,{key:i},{default:e(()=>[t(c,{cols:"12"},{default:e(()=>[s(a(i),1)]),_:2},1024)]),_:2},1024))),128)):(o(),p("div",ue,a(f(n)("No domain managed")),1)),h("div",ce,a(f(n)("Add/Remove from the domain page")),1)]),_:1})]),_:1}))}},re={class:"headline"},ie={__name:"ResourcesView",props:{resources:{type:Array,default:null}},setup(l){const{$gettext:n}=T(),m=i=>i.name==="quota"?n("No quota"):n("Creation denied");function u(i){return i<50?"primary":i<80?"warning":"error"}return(i,y)=>(o(),r(C,null,{default:e(()=>[t(A,null,{default:e(()=>[h("span",re,a(f(n)("Resources usage")),1)]),_:1}),t(V,null,{default:e(()=>[(o(!0),p(v,null,D(l.resources,d=>(o(),p("div",{key:d.name,class:"mt-4"},[d.max_value===-1?(o(),p(v,{key:0},[s(a(d.label)+" ("+a(f(n)("Unlimited"))+") ",1)],64)):d.max_value===0?(o(),p(v,{key:1},[s(a(d.label)+" ("+a(m(d))+") ",1)],64)):(o(),p(v,{key:2},[s(a(d.label)+" ("+a(Math.ceil(d.usage))+"%) ",1),t(E,{"model-value":d.usage,color:u(d.usage)},null,8,["model-value","color"])],64))]))),128))]),_:1})]),_:1}))}},me={__name:"AccountView",setup(l){const n=G(),{canSetRole:m}=Q(),u=x({pk:n.params.id}),i=x({});function y(){z.get(n.params.id).then(d=>{u.value=d.data})}return m.value&&H.getGlobalApplication("limits").then(d=>{i.value=d.data}),y(),(d,q)=>(o(),p(v,null,[t(X,{flat:""},{default:e(()=>[t(Y,null,{default:e(()=>[s(a(d.$gettext("Account"))+" "+a(u.value.username)+" ",1),t($,{color:"primary",icon:"mdi-circle-edit-outline",to:{name:"AccountEdit",params:{id:u.value.pk}}},null,8,["to"]),t($,{color:"primary",icon:"mdi-reload",onClick:y})]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[t(oe,{account:u.value},null,8,["account"]),u.value.role===f(M).DOMAIN_ADMIN?(o(),r(de,{key:0,class:"mt-2",account:u.value},null,8,["account"])):g("",!0)]),_:1}),t(c,{cols:"6"},{default:e(()=>[i.value.params&&i.value.params.enable_admin_limits&&u.value.role!==f(M).USER&&u.value.role!==f(M).SUPER_ADMIN?(o(),r(ie,{key:0,resources:u.value.resources},null,8,["resources"])):g("",!0),u.value.aliases?(o(),r(ee,{key:1,class:"mt-2",account:u.value},null,8,["account"])):g("",!0),u.value.mailbox?(o(),r(le,{key:2,class:"mt-2",account:u.value},null,8,["account"])):g("",!0)]),_:1})]),_:1})],64))}},Te=U(me,[["__scopeId","data-v-388d62f6"]]);export{Te as default};
