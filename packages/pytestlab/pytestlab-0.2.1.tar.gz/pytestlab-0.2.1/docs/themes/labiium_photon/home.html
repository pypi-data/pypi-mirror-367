<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="{{ config.site_description }}" />
        <meta name="author" content="LABIIUM" />

        <title>
            {{ config.site_name }} - Enlightened Measurement for Modern Science
        </title>

        <!-- Favicon -->
        <link
            rel="icon"
            href="{{ 'img/favicon.ico'|url }}"
            type="image/x-icon"
        />

        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&family=Manrope:wght@800&family=IBM+Plex+Mono:wght@400;500&display=swap"
            rel="stylesheet"
        />

        <!-- Prism.js CSS for syntax highlighting -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
        />

        <!-- Extra CSS files from mkdocs.yml -->
        {% for path in config.extra_css %}
        <link rel="stylesheet" href="{{ path|url }}" />
        {% endfor %}

        <style>
            /* Core Variables */
            :root {
                --photon-black: #0b0e11;
                --photon-white: #f5f7fa;
                --lab-violet: #5333ed;
                --lab-violet-light: #7a5ff5;
                --lab-aqua: #04e2dc;
                --lab-aqua-light: #2cefea;

                --glass-frost-bg: rgba(30, 33, 38, 0.75);
                --glass-border: rgba(255, 255, 255, 0.1);
                --glass-border-hover: rgba(255, 255, 255, 0.25);

                --graphite-30: #1a1d20;
                --graphite-50: #2b2e32;
                --graphite-70: #42454a;

                --status-success: #00b27c;
                --status-warning: #ffb02e;
                --status-error: #ff5460;

                --ease-curve: cubic-bezier(0.16, 1, 0.3, 1);

                --font-ui:
                    "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
                    Roboto, sans-serif;
                --font-display: "Manrope", "Inter", sans-serif;
                --font-code:
                    "IBM Plex Mono", SFMono-Regular, Consolas,
                    "Liberation Mono", Menlo, monospace;

                --spacing-xs: 0.25rem;
                --spacing-sm: 0.5rem;
                --spacing-md: 1rem;
                --spacing-lg: 1.5rem;
                --spacing-xl: 2rem;
                --spacing-xxl: 3rem;

                --header-height: 80px;
                --border-radius-sm: 4px;
                --border-radius-md: 8px;
                --border-radius-lg: 16px;
                --border-radius-xl: 32px;
            }

            /* Reset & Base Styles */
            *,
            *::before,
            *::after {
                box-sizing: border-box;
            }

            html,
            body {
                height: 100%;
                width: 100%;
                margin: 0;
                padding: 0;
            }

            body {
                background-color: var(--photon-black);
                color: var(--photon-white);
                font-family: var(--font-ui);
                font-weight: 400;
                line-height: 1.7;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
                overflow-x: hidden;
            }

            /* Background Beams Effect */
            #background-beams {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background:
                    radial-gradient(
                        ellipse 80% 80% at 20% -10%,
                        rgba(83, 51, 237, 0.1),
                        transparent
                    ),
                    radial-gradient(
                        ellipse 60% 80% at 80% 110%,
                        rgba(4, 226, 220, 0.1),
                        transparent
                    );
                z-index: -1;
                transition: background 1s ease-out;
            }

            /* Typography */
            h1,
            h2,
            h3,
            h4,
            h5,
            h6 {
                font-family: var(--font-display);
                font-weight: 800;
                letter-spacing: -0.02em;
                margin-top: 2rem;
                margin-bottom: 1rem;
                color: var(--photon-white);
                line-height: 1.2;
            }

            a {
                color: var(--lab-aqua);
                text-decoration: none;
                transition:
                    color 0.3s var(--ease-curve),
                    text-shadow 0.3s var(--ease-curve);
            }

            a:hover {
                color: var(--photon-white);
                text-shadow: 0 0 8px rgba(4, 226, 220, 0.3);
                text-decoration: none;
            }

            /* Layout & Container */
            .container {
                width: 100%;
                max-width: 1400px;
                margin: 0 auto;
                padding: 0 var(--spacing-md);
            }

            /* Header / Navigation */
            .site-header {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                z-index: 100;
                background: transparent;
                backdrop-filter: none;
                -webkit-backdrop-filter: none;
                border-bottom: 1px solid transparent;
                padding: 1rem 0;
                transition: all 0.4s var(--ease-curve);
                opacity: 1;
                transform: translateY(0);
            }

            .site-header.visible {
                opacity: 1;
                transform: translateY(0);
                background: rgba(11, 14, 17, 0.8);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border-bottom: 1px solid var(--glass-border);
            }

            .header-content {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .logo-container {
                display: flex;
                align-items: center;
            }

            .site-logo {
                display: flex;
                align-items: center;
                gap: var(--spacing-md);
            }

            .site-logo img {
                height: 36px;
                width: auto;
            }

            .site-name {
                font-family: var(--font-display);
                font-weight: 800;
                font-size: 1.25rem;
                color: var(--photon-white);
            }

            /* Main Navigation */
            .nav-primary {
                display: flex;
                align-items: center;
            }

            .nav-links {
                display: flex;
                list-style: none;
                margin: 0;
                padding: 0;
                gap: var(--spacing-lg);
            }

            .nav-item a {
                color: rgba(255, 255, 255, 0.75);
                font-weight: 500;
                position: relative;
            }

            .nav-item.active a {
                color: var(--lab-aqua);
            }

            .nav-item a::after {
                content: "";
                position: absolute;
                width: 0;
                height: 2px;
                bottom: -4px;
                left: 0;
                background: linear-gradient(
                    90deg,
                    var(--lab-violet),
                    var(--lab-aqua)
                );
                transition: width 0.3s var(--ease-curve);
            }

            .nav-item a:hover::after,
            .nav-item.active a::after {
                width: 100%;
            }

            /* Mobile Menu Button */
            .menu-toggle {
                display: none;
                background: none;
                border: none;
                width: 32px;
                height: 32px;
                position: relative;
                cursor: pointer;
                z-index: 150;
            }

            .menu-toggle .line {
                display: block;
                height: 2px;
                width: 100%;
                background: var(--photon-white);
                position: absolute;
                left: 0;
                transition: all 0.3s var(--ease-curve);
            }

            .menu-toggle .line:nth-child(1) {
                top: 8px;
            }

            .menu-toggle .line:nth-child(2) {
                top: 16px;
            }

            .menu-toggle .line:nth-child(3) {
                top: 24px;
            }

            .menu-toggle.active .line:nth-child(1) {
                transform: translateY(8px) rotate(45deg);
            }

            .menu-toggle.active .line:nth-child(2) {
                opacity: 0;
            }

            .menu-toggle.active .line:nth-child(3) {
                transform: translateY(-8px) rotate(-45deg);
            }

            /* Search Component */
            .search-container {
                position: relative;
                margin-right: 1rem;
            }

            .search-button {
                background: none;
                border: none;
                color: var(--photon-white);
                cursor: pointer;
                opacity: 0.75;
                transition: opacity 0.3s var(--ease-curve);
                display: flex;
                align-items: center;
                justify-content: center;
                width: 40px;
                height: 40px;
                border-radius: 50%;
            }

            .search-button:hover {
                opacity: 1;
                background: rgba(255, 255, 255, 0.1);
            }

            .search-button svg {
                width: 20px;
                height: 20px;
            }

            .search-modal {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(
                    135deg,
                    rgba(11, 14, 17, 0.98) 0%,
                    rgba(30, 33, 38, 0.95) 100%
                ) !important;
                backdrop-filter: blur(24px) !important;
                -webkit-backdrop-filter: blur(24px) !important;
                z-index: 200;
                display: flex;
                flex-direction: column;
                align-items: center;
                padding-top: 15vh;
                opacity: 0;
                pointer-events: none;
                transition: opacity 0.3s var(--ease-curve);
            }

            .search-modal.active {
                opacity: 1;
                pointer-events: auto;
            }

            .search-modal-content {
                width: 100%;
                max-width: 700px;
                padding: 0 var(--spacing-lg);
            }

            .search-form {
                position: relative;
                display: flex;
                align-items: center;
                margin-bottom: var(--spacing-xl);
            }

            .search-input {
                width: 100%;
                font-family: var(--font-ui);
                font-size: 1.5rem;
                background: rgba(43, 46, 50, 0.5);
                border: 1px solid var(--glass-border);
                border-radius: var(--border-radius-md);
                color: var(--photon-white);
                padding: 1rem var(--spacing-lg);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                transition: all 0.3s var(--ease-curve);
            }

            .search-input:focus {
                outline: none;
                border-color: var(--lab-aqua);
                box-shadow: 0 0 0 3px rgba(4, 226, 220, 0.3);
            }

            .search-close {
                position: absolute;
                top: 1rem;
                right: 1rem;
                background: none;
                border: none;
                color: var(--photon-white);
                cursor: pointer;
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .search-close svg {
                width: 24px;
                height: 24px;
            }

            .search-results {
                max-height: 60vh;
                overflow-y: auto;
                width: 100%;
            }

            .search-results-meta {
                color: rgba(255, 255, 255, 0.5);
                margin-bottom: var(--spacing-md);
            }

            .search-result-item {
                border-radius: var(--border-radius-md);
                background: rgba(43, 46, 50, 0.5);
                border: 1px solid var(--glass-border);
                margin-bottom: var(--spacing-sm);
                transition: all 0.3s var(--ease-curve);
            }

            .search-result-item:hover {
                border-color: var(--lab-violet);
                transform: translateY(-2px);
                box-shadow: 0 4px 20px rgba(83, 51, 237, 0.2);
            }

            .search-result-link {
                display: block;
                padding: var(--spacing-md);
                color: var(--photon-white);
            }

            .search-result-title {
                font-weight: 600;
                margin-bottom: var(--spacing-xs);
            }

            .search-result-text {
                color: rgba(255, 255, 255, 0.7);
                font-size: 0.9rem;
            }

            /* Header Actions */
            .header-actions {
                display: flex;
                align-items: center;
                gap: var(--spacing-md);
            }

            /* Buttons */
            .beam-button {
                padding: 0.7rem 1.25rem;
                border: none;
                border-radius: var(--border-radius-md);
                font-weight: 600;
                color: var(--photon-white);
                cursor: pointer;
                transition:
                    transform 0.3s var(--ease-curve),
                    box-shadow 0.3s var(--ease-curve);
                background: linear-gradient(
                    45deg,
                    var(--lab-violet),
                    var(--lab-violet-light)
                );
                box-shadow: 0 4px 15px rgba(83, 51, 237, 0.3);
                text-decoration: none;
                display: inline-flex;
                align-items: center;
                justify-content: center;
            }

            .beam-button:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 20px rgba(83, 51, 237, 0.4);
                color: var(--photon-white);
            }

            .beam-button-sm {
                padding: 0.5rem 1rem;
                font-size: 0.875rem;
            }

            .ghost-button {
                padding: 0.65rem 1.25rem;
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: var(--border-radius-md);
                background: rgba(255, 255, 255, 0.05);
                color: var(--photon-white);
                font-weight: 600;
                transition: all 0.3s var(--ease-curve);
                backdrop-filter: blur(4px);
                -webkit-backdrop-filter: blur(4px);
                display: inline-flex;
                align-items: center;
                justify-content: center;
            }

            .ghost-button:hover {
                transform: translateY(-2px);
                border-color: rgba(4, 226, 220, 0.4);
                background: rgba(4, 226, 220, 0.1);
                color: var(--photon-white);
                text-decoration: none;
            }

            /* Glass Card Component */
            .glass-card {
                background: var(--glass-frost-bg);
                border: 1px solid var(--glass-border);
                border-radius: var(--border-radius-lg);
                backdrop-filter: blur(14px);
                -webkit-backdrop-filter: blur(14px);
                transition: all 0.4s var(--ease-curve);
                overflow: hidden;
            }

            .glass-card:hover {
                border-color: var(--glass-border-hover);
            }

            /* Hero Section */
            .hero-section {
                display: flex;
                align-items: center;
                justify-content: center;
                min-height: 100vh;
                position: relative;
                padding: var(--spacing-xl) 0;
                width: 100%;
            }

            .hero-content {
                text-align: center;
                max-width: 1000px;
                padding: 0 var(--spacing-md);
                margin: 0 auto;
                width: 100%;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }

            .hero-subtitle {
                font-size: 1.5rem;
                color: rgba(255, 255, 255, 0.8);
                max-width: 700px;
                margin: 0 auto 3rem;
            }

            .hero-title {
                font-size: 4.5rem;
                line-height: 1.1;
                margin-bottom: 2rem;
            }

            .gradient-text-light {
                background: linear-gradient(
                    135deg,
                    var(--photon-white) 0%,
                    rgba(255, 255, 255, 0.7) 100%
                );
                -webkit-background-clip: text;
                background-clip: text;
                color: transparent;
            }

            .gradient-text-accent {
                background: linear-gradient(
                    135deg,
                    var(--lab-violet) 0%,
                    var(--lab-aqua) 100%
                );
                -webkit-background-clip: text;
                background-clip: text;
                color: transparent;
            }

            .hero-actions {
                display: flex;
                justify-content: center;
                gap: var(--spacing-md);
                flex-wrap: wrap;
            }

            /* Features Section */
            .features-section {
                padding: 8rem 0;
            }

            .section-header {
                text-align: center;
                margin-bottom: 4rem;
            }

            .section-header h2 {
                font-size: 3rem;
                margin-bottom: 1rem;
            }

            .section-description {
                font-size: 1.25rem;
                color: rgba(255, 255, 255, 0.8);
                max-width: 700px;
                margin: 0 auto;
            }

            .feature-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 2rem;
                margin-top: 4rem;
            }

            .feature-card {
                padding: 2rem;
                height: 100%;
                display: flex;
                flex-direction: column;
                gap: 1rem;
                transition: all 0.3s var(--ease-curve);
            }

            .feature-card:hover {
                transform: translateY(-8px);
            }

            .feature-icon {
                width: 3rem;
                height: 3rem;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-bottom: 1rem;
            }

            .violet-icon {
                background: rgba(83, 51, 237, 0.1);
                border: 1px solid rgba(83, 51, 237, 0.3);
            }

            .violet-icon svg {
                color: var(--lab-violet);
            }

            .aqua-icon {
                background: rgba(4, 226, 220, 0.1);
                border: 1px solid rgba(4, 226, 220, 0.3);
            }

            .aqua-icon svg {
                color: var(--lab-aqua);
            }

            .feature-icon svg {
                width: 1.5rem;
                height: 1.5rem;
            }

            /* Code Showcase Section */
            .code-showcase-section {
                padding: 8rem 0;
            }

            .code-showcase-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 4rem;
                margin-top: 4rem;
                align-items: center;
            }

            .code-story-steps {
                display: flex;
                flex-direction: column;
                gap: 3rem;
            }

            .code-story-step {
                padding: 1.25rem 1.5rem;
                margin-bottom: 1rem;
                opacity: 0.5;
                background: rgba(30, 33, 38, 0.75);
                border: 1.5px solid var(--glass-border);
                border-radius: var(--border-radius-lg);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                transition:
                    opacity 0.4s var(--ease-curve),
                    box-shadow 0.3s var(--ease-curve),
                    transform 0.3s var(--ease-curve),
                    background 0.3s var(--ease-curve),
                    border-color 0.3s var(--ease-curve);
                cursor: pointer;
                position: relative;
            }
            .code-story-step.active,
            .code-story-step:focus,
            .code-story-step:hover {
                opacity: 1;
                background: rgba(83, 51, 237, 0.18);
                border-color: var(--lab-aqua);
                box-shadow:
                    0 4px 24px 0 rgba(4, 226, 220, 0.12),
                    0 1.5px 0 0 var(--lab-aqua);
                transform: translateY(-2px) scale(1.025);
                outline: none;
            }
            .code-story-step.active {
                background: linear-gradient(
                    90deg,
                    rgba(83, 51, 237, 0.22) 0%,
                    rgba(4, 226, 220, 0.18) 100%
                );
                border-color: var(--lab-aqua);
                box-shadow:
                    0 6px 32px 0 rgba(83, 51, 237, 0.18),
                    0 2px 0 0 var(--lab-aqua);
                color: #fff;
                opacity: 1;
            }

            .code-story-step.active {
                opacity: 1;
            }

            .code-story-step h3 {
                font-size: 1.75rem;
                margin-bottom: 1rem;
                color: var(--lab-aqua);
            }

            .code-display-wrapper {
                position: relative;
            }

            .code-block {
                padding: 1rem;
                position: relative;
            }

            .code-block pre {
                margin: 0;
                padding: 2.5rem 1.5rem 1.5rem;
                overflow: auto;
                border-radius: var(--border-radius-md);
                background: rgba(26, 29, 32, 0.7);
                box-shadow:
                    inset 0 0 0 1px rgba(83, 51, 237, 0.2),
                    0 4px 20px rgba(0, 0, 0, 0.2);
                position: relative;
            }

            .code-block pre::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 3px;
                background: linear-gradient(
                    90deg,
                    var(--lab-violet),
                    var(--lab-aqua)
                );
                opacity: 0.7;
            }

            .code-block code {
                font-family: var(--font-code);
                font-size: 0.9rem;
                line-height: 1.5;
                color: var(--photon-white);
            }

            /* Syntax Highlighting for Code Blocks */
            .token.comment {
                color: #8892b0;
                font-style: italic;
                opacity: 0.8;
            }
            .token.keyword {
                color: #c678dd;
                font-weight: 500;
                text-shadow: 0 0 8px rgba(198, 120, 221, 0.3);
            }
            .token.string {
                color: #98c379;
                text-shadow: 0 0 8px rgba(152, 195, 121, 0.3);
            }
            .token.function {
                color: #61afef;
                font-weight: 500;
                text-shadow: 0 0 8px rgba(97, 175, 239, 0.3);
            }
            .token.number {
                color: #d19a66;
                text-shadow: 0 0 8px rgba(209, 154, 102, 0.3);
            }
            .token.operator {
                color: #56b6c2;
            }
            .token.punctuation {
                color: #abb2bf;
            }
            .token.class-name {
                color: #e5c07b;
                font-weight: 500;
            }
            .token.decorator {
                color: #61afef;
            }
            .token.parameter {
                color: #d19a66;
            }
            .token.boolean {
                color: #d19a66;
                font-weight: 500;
            }
            .token.yaml-key {
                color: #e06c75;
            }
            .token.key {
                color: #e06c75;
            }
            .token.scalar {
                color: #98c379;
            }
            .token.punctuation {
                color: #abb2bf;
            }
            .token.important {
                color: #c678dd;
            }
            .token.tag {
                color: #e06c75;
            }
            .token.atrule {
                color: #c678dd;
            }

            /* Copy Button for Code */
            .copy-button {
                position: absolute;
                top: 0.75rem;
                right: 0.75rem;
                background: linear-gradient(
                    135deg,
                    var(--lab-violet),
                    var(--lab-violet-light)
                );
                color: var(--photon-white);
                border: none;
                border-radius: 4px;
                padding: 0.4rem 1rem;
                font-family: var(--font-ui);
                font-size: 0.75rem;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.3s var(--ease-curve);
                display: flex;
                align-items: center;
                gap: 0.5rem;
                opacity: 0;
                transform: translateY(-5px);
                box-shadow: 0 2px 10px rgba(83, 51, 237, 0.3);
                z-index: 5;
            }

            .code-block:hover .copy-button {
                opacity: 1;
                transform: translateY(0);
            }

            .copy-button:hover {
                box-shadow: 0 4px 15px rgba(83, 51, 237, 0.5);
            }

            .copy-button.copied {
                background: linear-gradient(
                    135deg,
                    var(--status-success),
                    #00c98d
                );
                box-shadow: 0 2px 10px rgba(0, 178, 124, 0.3);
            }

            /* Typing Animation */
            .typing-cursor {
                display: inline-block;
                width: 2px;
                height: 1.2em;
                background-color: var(--lab-aqua);
                margin-left: 2px;
                vertical-align: middle;
                animation: cursor-blink 1s step-end infinite;
            }

            @keyframes cursor-blink {
                from,
                to {
                    opacity: 0;
                }
                50% {
                    opacity: 1;
                }
            }

            /* Language Badge */
            .lang-badge {
                position: absolute;
                bottom: 0.75rem;
                right: 0.75rem;
                background: rgba(26, 29, 32, 0.8);
                color: var(--lab-aqua);
                border-radius: 3px;
                padding: 0.2rem 0.5rem;
                font-size: 0.7rem;
                font-family: var(--font-code);
                border: 1px solid rgba(4, 226, 220, 0.2);
                opacity: 0.7;
            }

            /* CTA Section */
            .cta-section {
                padding: 6rem 0;
            }

            .cta-card {
                padding: 4rem 2rem;
                text-align: center;
                max-width: 900px;
                margin: 0 auto;
            }

            .cta-card h2 {
                font-size: 3rem;
                margin-bottom: 1.5rem;
            }

            .cta-text {
                font-size: 1.25rem;
                color: rgba(255, 255, 255, 0.8);
                max-width: 600px;
                margin: 0 auto 2.5rem;
            }

            .cta-actions {
                display: flex;
                justify-content: center;
                gap: var(--spacing-md);
                flex-wrap: wrap;
            }

            /* Footer */
            .site-footer {
                border-top: 1px solid var(--glass-border);
                padding: 4rem 0;
            }

            .footer-content {
                display: flex;
                justify-content: space-between;
                align-items: center;
                flex-wrap: wrap;
                gap: 2rem;
            }

            .footer-links {
                display: flex;
                gap: 2rem;
                flex-wrap: wrap;
            }

            .footer-links h3 {
                font-size: 1rem;
                margin-top: 0;
                margin-bottom: 1rem;
                color: rgba(255, 255, 255, 0.7);
            }

            .footer-link-group {
                min-width: 160px;
            }

            .footer-link-list {
                list-style: none;
                padding: 0;
                margin: 0;
            }

            .footer-link-list li {
                margin-bottom: 0.5rem;
            }

            .footer-link-list a {
                color: rgba(255, 255, 255, 0.5);
                font-size: 0.9rem;
                transition: color 0.3s var(--ease-curve);
            }

            .footer-link-list a:hover {
                color: var(--lab-aqua);
            }

            .footer-brand {
                max-width: 300px;
            }

            .footer-brand img {
                height: 40px;
                width: auto;
                margin-bottom: 1rem;
            }

            .footer-brand p {
                color: rgba(255, 255, 255, 0.5);
                font-size: 0.9rem;
                margin: 0;
            }

            .footer-bottom {
                border-top: 1px solid var(--glass-border);
                margin-top: 3rem;
                padding-top: 2rem;
                display: flex;
                justify-content: space-between;
                align-items: center;
                flex-wrap: wrap;
                gap: 1rem;
            }

            .footer-copyright {
                color: rgba(255, 255, 255, 0.5);
                font-size: 0.9rem;
            }

            .footer-social {
                display: flex;
                gap: 1rem;
            }

            .social-link {
                width: 32px;
                height: 32px;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.1);
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.3s var(--ease-curve);
            }

            .social-link:hover {
                background: var(--lab-violet);
                transform: translateY(-3px);
            }

            .social-link svg {
                width: 16px;
                height: 16px;
                color: var(--photon-white);
            }

            /* Fade-in Animation */
            .fade-in {
                opacity: 0;
                transform: translateY(30px);
                transition:
                    opacity 1s var(--ease-curve),
                    transform 1s var(--ease-curve);
            }

            .fade-in.visible {
                opacity: 1;
                transform: translateY(0);
            }

            /* Mobile Menu Styles */
            @media (max-width: 992px) {
                .menu-toggle {
                    display: block;
                }

                .nav-primary {
                    position: fixed !important;
                    top: 0 !important;
                    left: 0 !important;
                    right: 0 !important;
                    bottom: 0 !important;
                    width: 100vw !important;
                    height: 100vh !important;
                    background: rgba(11, 14, 17, 0.95) !important;
                    backdrop-filter: blur(20px) !important;
                    -webkit-backdrop-filter: blur(20px) !important;
                    z-index: 9999 !important;
                    display: flex !important;
                    flex-direction: column !important;
                    align-items: center !important;
                    justify-content: flex-start !important;
                    padding: 15vh var(--spacing-lg) !important;
                    margin: 0 !important;
                    opacity: 0;
                    pointer-events: none;
                    transition: opacity 0.4s var(--ease-curve);
                    overflow-y: auto;
                    -webkit-overflow-scrolling: touch;
                }

                .nav-primary.active {
                    opacity: 1;
                    pointer-events: auto;
                }

                .nav-links {
                    width: 100%;
                    max-width: 420px;
                    padding: 0;
                    margin: 0;
                    list-style: none;
                    position: relative;
                    z-index: 10;
                    display: flex;
                    flex-direction: column;
                    gap: var(--spacing-sm);
                }

                .nav-item {
                    width: 100%;
                    position: relative;
                }

                .nav-item a {
                    display: flex;
                    align-items: center;
                    width: 100%;
                    padding: 1rem 1.5rem;
                    font-size: 1.1rem;
                    font-weight: 500;
                    min-height: 56px;
                    text-align: left;
                    border: none;
                    color: var(--photon-white);
                    text-decoration: none;
                    background: var(--glass-frost-bg);
                    border: 1px solid var(--glass-border);
                    border-radius: var(--border-radius-lg);
                    transition: all 0.3s var(--ease-curve);
                    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
                }

                .nav-item a:hover {
                    background: rgba(255, 255, 255, 0.15);
                    border-color: var(--glass-border-hover);
                    transform: translateY(-2px);
                    box-shadow: 0 8px 32px rgba(83, 51, 237, 0.2);
                }

                .nav-item.active a {
                    background: linear-gradient(
                        135deg,
                        rgba(83, 51, 237, 0.2) 0%,
                        rgba(4, 226, 220, 0.1) 100%
                    );
                    border-color: var(--lab-violet);
                    color: var(--photon-white);
                }

                .nav-item a::after {
                    display: none;
                }

                .dropdown-menu {
                    position: static;
                    background: rgba(11, 14, 17, 0.8);
                    border: 1px solid rgba(255, 255, 255, 0.05);
                    border-radius: var(--border-radius-md);
                    box-shadow: none;
                    width: 100%;
                    padding: var(--spacing-sm) 0;
                    margin-top: var(--spacing-xs);
                    opacity: 1;
                    visibility: visible;
                    transform: none;
                    display: none;
                    backdrop-filter: blur(16px);
                    -webkit-backdrop-filter: blur(16px);
                }

                .dropdown.active .dropdown-menu {
                    display: block;
                }

                .dropdown-menu li {
                    margin: 0;
                    padding: 0 var(--spacing-sm);
                }

                .dropdown-menu a {
                    padding: 0.75rem 1rem;
                    font-size: 0.95rem;
                    font-weight: 400;
                    color: rgba(255, 255, 255, 0.85);
                    background: transparent;
                    border: none;
                    border-radius: var(--border-radius-sm);
                    box-shadow: none;
                    min-height: 40px;
                }

                .dropdown-menu a:hover {
                    background: rgba(255, 255, 255, 0.08);
                    color: var(--photon-white);
                    transform: translateX(4px);
                }

                .dropdown-menu a.active {
                    background: rgba(83, 51, 237, 0.2);
                    color: var(--lab-aqua);
                }

                .dropdown-toggle::after {
                    content: "";
                    position: absolute;
                    right: 1.5rem;
                    top: 50%;
                    transform: translateY(-50%) rotate(0deg);
                    width: 8px;
                    height: 8px;
                    border-right: 2px solid currentColor;
                    border-bottom: 2px solid currentColor;
                    transition: transform 0.3s var(--ease-curve);
                }

                .dropdown.active .dropdown-toggle::after {
                    transform: translateY(-50%) rotate(-135deg);
                }
            }

            /* Other Responsive Styles */
            @media (max-width: 768px) {
                .nav-primary {
                    padding: calc(var(--header-height) + 1.5rem) 1rem 2rem !important;
                }

                .nav-links {
                    max-width: 100%;
                }

                .nav-item a {
                    padding: 1rem 1.25rem;
                    font-size: 1rem;
                    min-height: 52px;
                }

                .dropdown-menu a {
                    padding: 0.75rem 1rem;
                    font-size: 0.9rem;
                    min-height: 38px;
                }

                .hero-title {
                    font-size: 3rem;
                }

                .hero-subtitle {
                    font-size: 1.25rem;
                }

                .section-header h2 {
                    font-size: 2.25rem;
                }

                .code-showcase-grid {
                    grid-template-columns: 1fr;
                    gap: 2rem;
                }

                .cta-card h2 {
                    font-size: 2.25rem;
                }

                .footer-content {
                    flex-direction: column;
                    align-items: flex-start;
                }
            }

            @media (max-width: 480px) {
                .nav-primary {
                    padding: calc(var(--header-height) + 1rem) 0.75rem 1.5rem !important;
                }

                .nav-item a {
                    padding: 0.875rem 1rem;
                    font-size: 0.95rem;
                    min-height: 48px;
                }

                .dropdown-menu a {
                    padding: 0.625rem 0.875rem;
                    font-size: 0.875rem;
                    min-height: 36px;
                }

                .dropdown-toggle::after {
                    right: 1rem;
                }

                .hero-title {
                    font-size: 2.5rem;
                }

                .section-header h2 {
                    font-size: 2rem;
                }

                .hero-actions,
                .cta-actions {
                    flex-direction: column;
                    align-items: center;
                }

                .beam-button,
                .ghost-button {
                    width: 100%;
                    max-width: 280px;
                }
            }
        </style>
    </head>
    <body>
        <div id="background-beams"></div>

        <!-- Header / Navigation -->
        <header class="site-header">
            <div class="container">
                <div class="header-content">
                    <div class="logo-container">
                        <a href="{{ nav.homepage.url|url }}" class="site-logo">
                            <img
                                src="{{ 'img/pytestlab_logo.png'|url }}"
                                alt="{{ config.site_name }} Logo"
                            />
                            <span class="site-name"
                                >{{ config.site_name }}</span
                            >
                        </a>
                    </div>

                    <button
                        class="menu-toggle"
                        id="menuToggle"
                        aria-label="Toggle Navigation"
                    >
                        <span class="line"></span>
                        <span class="line"></span>
                        <span class="line"></span>
                    </button>

                    <nav class="nav-primary">
                        <ul class="nav-links">
                            <li class="nav-item">
                                <a
                                    href="{{ 'user_guide/getting_started/'|url }}"
                                    >Docs</a
                                >
                            </li>
                            <li class="nav-item">
                                <a href="{{ 'api/instruments/'|url }}">API</a>
                            </li>
                            <li class="nav-item">
                                <a href="{{ 'tutorials/10_minute_tour/'|url }}"
                                    >Tutorials</a
                                >
                            </li>
                            <li class="nav-item">
                                <a href="{{ 'profiles/gallery/'|url }}"
                                    >Instruments</a
                                >
                            </li>
                            <li class="nav-item">
                                <a href="{{ 'contributing/'|url }}"
                                    >Contribute</a
                                >
                            </li>
                        </ul>
                    </nav>

                    <div class="header-actions">
                        <button
                            class="search-button"
                            id="searchButton"
                            aria-label="Open Search"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <circle cx="11" cy="11" r="8"></circle>
                                <line
                                    x1="21"
                                    y1="21"
                                    x2="16.65"
                                    y2="16.65"
                                ></line>
                            </svg>
                        </button>

                        <a
                            href="{{ config.repo_url }}"
                            target="_blank"
                            class="beam-button beam-button-sm"
                        >
                            GitHub
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Search Modal -->
        <div class="search-modal" id="searchModal">
            <div class="search-modal-content">
                <form class="search-form">
                    <input
                        type="text"
                        class="search-input"
                        id="searchInput"
                        placeholder="Search documentation..."
                        autofocus
                    />
                    <button type="button" class="search-close" id="searchClose">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        >
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </form>
                <div class="search-results">
                    <div class="search-results-meta" id="searchResultsMeta">
                        Type to start searching
                    </div>
                    <div id="searchResults"></div>
                </div>
            </div>
        </div>

        <!-- Hero Section -->
        <section class="hero-section">
            <div class="container">
                <div class="hero-content fade-in">
                    <h1 class="hero-title">
                        <span class="gradient-text-light"
                            >Enlightened Measurement</span
                        ><br />
                        <span class="gradient-text-accent"
                            >for Modern Science</span
                        >
                    </h1>
                    <p class="hero-subtitle">
                        PyTestLab is a modern, async-first Python toolbox for
                        laboratory test-and-measurement automation, data
                        management, and analysis. Move faster, build smarter,
                        and trust your results.
                    </p>
                    <div class="hero-actions">
                        <a
                            href="{{ 'user_guide/getting_started/'|url }}"
                            class="beam-button"
                            >Explore Documentation</a
                        >
                        <a href="{{ 'installation/'|url }}" class="ghost-button"
                            >Installation Guide</a
                        >
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="features-section">
            <div class="container">
                <div class="section-header fade-in">
                    <h2>A Toolbox Built for Velocity</h2>
                    <p class="section-description">
                        Stop wrestling with legacy APIs. Start building
                        reproducible experiments.
                    </p>
                </div>
                <div class="feature-grid fade-in">
                    <div class="glass-card feature-card">
                        <div class="feature-icon violet-icon">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <path
                                    d="M10 21h4c4.4 0 8-3.6 8-8V5c0-4.4-3.6-8-8-8h-4C5.6-1 2 2.6 2 7v8c0 4.4 3.6 8 8 8Z"
                                    opacity=".4"
                                />
                                <path d="m15.5 12-4 4-4-4" />
                            </svg>
                        </div>
                        <h3>Async by Design</h3>
                        <p>
                            Run parallel tests and non-blocking I/O with native
                            `async/await`. Maximize instrument uptime and slash
                            test execution times.
                        </p>
                    </div>
                    <div class="glass-card feature-card">
                        <div class="feature-icon aqua-icon">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <path
                                    d="M2 12h2.5a1 1 0 0 1 .8.4 1 1 0 0 0 1.4 0 1 1 0 0 1 1.6 0 1 1 0 0 0 1.4 0 1 1 0 0 1 1.6 0 1 1 0 0 0 1.4 0 1 1 0 0 1 1.6 0 1 1 0 0 0 1.4 0 1 1 0 0 1 .8-.4H22"
                                />
                                <path d="M6.5 12v-2" opacity=".4" />
                                <path d="M9.5 12v6" opacity=".4" />
                                <path d="M12.5 12v-4" opacity=".4" />
                                <path d="M15.5 12v8" opacity=".4" />
                                <path d="M18.5 12v-5" opacity=".4" />
                            </svg>
                        </div>
                        <h3>Unified Driver Layer</h3>
                        <p>
                            A consistent, high-level API across oscilloscopes,
                            PSUs, DMMs, and more. Swap instruments without
                            rewriting your test logic.
                        </p>
                    </div>
                    <div class="glass-card feature-card">
                        <div class="feature-icon violet-icon">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
                                <path d="M22 4 12 14.01l-3-3" opacity=".4" />
                            </svg>
                        </div>
                        <h3>Declarative & Validated</h3>
                        <p>
                            Define instruments and benches with simple YAML
                            files, validated by Pydantic. Catch configuration
                            errors before they hit the hardware.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Code Showcase Section -->
        <section class="code-showcase-section">
            <div class="container">
                <div class="section-header fade-in">
                    <h2>An API Designed for Flow</h2>
                    <p class="section-description">
                        Follow the journey from a single command to a complete,
                        automated experiment.
                    </p>
                </div>
                <div class="code-showcase-grid fade-in">
                    <div class="code-story-steps">
                        <div
                            class="code-story-step active"
                            data-step="0"
                            tabindex="0"
                            role="button"
                            aria-pressed="true"
                            aria-label="Hello, Instrument"
                        >
                            <h3>1. Hello, Instrument</h3>
                            <p>
                                Start simple. Connect to any instrument with one
                                line. PyTestLab's `AutoInstrument` handles the
                                backend, even providing a full simulation for
                                development and CI.
                            </p>
                        </div>
                        <div
                            class="code-story-step"
                            data-step="1"
                            tabindex="0"
                            role="button"
                            aria-pressed="false"
                            aria-label="Define Your Bench"
                        >
                            <h3>2. Define Your Bench</h3>
                            <p>
                                Describe your entire lab bench in a simple,
                                readable YAML file. Specify instruments,
                                connection details, and even safety limits to
                                prevent accidents.
                            </p>
                        </div>
                        <div
                            class="code-story-step"
                            data-step="2"
                            tabindex="0"
                            role="button"
                            aria-pressed="false"
                            aria-label="Run Your Bench"
                        >
                            <h3>3. Run Your Bench</h3>
                            <p>
                                Bring your bench to life. The `Bench` context
                                manager handles all connections and provides
                                access to your instruments by the aliases you
                                defined. Safety limits are enforced
                                automatically.
                            </p>
                        </div>
                        <div
                            class="code-story-step"
                            data-step="3"
                            tabindex="0"
                            role="button"
                            aria-pressed="false"
                            aria-label="Design Experiments"
                        >
                            <h3>4. Design Experiments</h3>
                            <p>
                                Go beyond simple commands. Use the declarative
                                `MeasurementSession` to design complex
                                experiments, sweep multiple parameters, and
                                automatically collect structured data, ready for
                                analysis.
                            </p>
                        </div>
                    </div>
                    <div class="code-display-wrapper">
                        <div class="glass-card code-block">
                            <pre><code id="codeDisplay"></code></pre>
                            <button class="copy-button">Copy</button>
                            <div class="lang-badge">Python</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="cta-section">
            <div class="container">
                <div class="glass-card cta-card fade-in">
                    <h2>Ready to Accelerate Your Research?</h2>
                    <p class="cta-text">
                        PyTestLab is ready for your lab. Get started today and
                        transform how you measure, test, and analyze.
                    </p>
                    <div class="cta-actions">
                        <a href="{{ 'installation/'|url }}" class="beam-button"
                            >Get Started</a
                        >
                        <a
                            href="{{ 'tutorials/10_minute_tour/'|url }}"
                            class="ghost-button"
                            >10-Minute Tour</a
                        >
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="site-footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-brand">
                        <img
                            src="{{ 'img/pytestlab_logo.png'|url }}"
                            alt="{{ config.site_name }} Logo"
                        />
                        <p>
                            A modern, async-first Python toolbox for laboratory
                            test-and-measurement automation, data management,
                            and analysis.
                        </p>
                    </div>
                    <div class="footer-links">
                        <div class="footer-link-group">
                            <h3>Documentation</h3>
                            <ul class="footer-link-list">
                                <li>
                                    <a
                                        href="{{ 'user_guide/getting_started/'|url }}"
                                        >Getting Started</a
                                    >
                                </li>
                                <li>
                                    <a
                                        href="{{ 'user_guide/async_vs_sync/'|url }}"
                                        >Async vs Sync</a
                                    >
                                </li>
                                <li>
                                    <a href="{{ 'user_guide/simulation/'|url }}"
                                        >Simulation Mode</a
                                    >
                                </li>
                                <li>
                                    <a
                                        href="{{ 'user_guide/bench_descriptors/'|url }}"
                                        >Bench Descriptors</a
                                    >
                                </li>
                            </ul>
                        </div>
                        <div class="footer-link-group">
                            <h3>Reference</h3>
                            <ul class="footer-link-list">
                                <li>
                                    <a href="{{ 'api/instruments/'|url }}"
                                        >Instruments</a
                                    >
                                </li>
                                <li>
                                    <a href="{{ 'api/measurements/'|url }}"
                                        >Measurements</a
                                    >
                                </li>
                                <li>
                                    <a href="{{ 'api/experiments/'|url }}"
                                        >Experiments</a
                                    >
                                </li>
                                <li>
                                    <a href="{{ 'api/backends/'|url }}"
                                        >Backends</a
                                    >
                                </li>
                            </ul>
                        </div>
                        <div class="footer-link-group">
                            <h3>Community</h3>
                            <ul class="footer-link-list">
                                <li>
                                    <a href="{{ config.repo_url }}">GitHub</a>
                                </li>
                                <li>
                                    <a href="{{ 'contributing/'|url }}"
                                        >Contributing</a
                                    >
                                </li>
                                <li>
                                    <a href="{{ 'changelog/'|url }}"
                                        >Changelog</a
                                    >
                                </li>
                                <li>
                                    <a href="{{ 'user_guide/cli/'|url }}"
                                        >CLI Tools</a
                                    >
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="footer-bottom">
                    <div class="footer-copyright">
                        &copy; {{ build_date_utc.strftime('%Y') }} {{
                        config.copyright or "LABIIUM" }}. All rights reserved.
                    </div>
                    <div class="footer-social">
                        <a
                            href="{{ config.repo_url }}"
                            class="social-link"
                            target="_blank"
                            aria-label="GitHub"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <path
                                    d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"
                                ></path>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </footer>

        <!-- JavaScript -->
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                // --- Background Beams Effect ---
                const backgroundBeams =
                    document.getElementById("background-beams");
                if (backgroundBeams) {
                    document.addEventListener("mousemove", (e) => {
                        const { clientX, clientY } = e;
                        const { innerWidth, innerHeight } = window;
                        const xPercent = (clientX / innerWidth) * 100;
                        const yPercent = (clientY / innerHeight) * 100;

                        window.requestAnimationFrame(() => {
                            backgroundBeams.style.background = `
                            radial-gradient(ellipse 80% 80% at ${xPercent - 10}% ${yPercent - 20}%, rgba(83, 51, 237, 0.15), transparent),
                            radial-gradient(ellipse 60% 80% at ${xPercent + 10}% ${yPercent + 20}%, rgba(4, 226, 220, 0.15), transparent)
                        `;
                        });
                    });
                }

                // --- Navbar Scroll Behavior ---
                const siteHeader = document.querySelector(".site-header");
                let lastScrollTop = 0;

                window.addEventListener("scroll", function () {
                    const scrollTop =
                        window.pageYOffset ||
                        document.documentElement.scrollTop;

                    if (scrollTop > 100) {
                        siteHeader.classList.add("visible");
                    } else {
                        siteHeader.classList.remove("visible");
                    }

                    lastScrollTop = scrollTop;
                });

                // --- Mobile Menu Toggle ---
                const menuToggle = document.getElementById("menuToggle");
                const navPrimary = document.querySelector(".nav-primary");

                if (menuToggle && navPrimary) {
                    menuToggle.addEventListener("click", function () {
                        this.classList.toggle("active");
                        navPrimary.classList.toggle("active");
                    });

                    // Close mobile menu when clicking outside
                    document.addEventListener("click", function (e) {
                        if (
                            navPrimary.classList.contains("active") &&
                            !navPrimary.contains(e.target) &&
                            !menuToggle.contains(e.target)
                        ) {
                            menuToggle.classList.remove("active");
                            navPrimary.classList.remove("active");
                        }
                    });

                    // Close mobile menu on escape key
                    document.addEventListener("keydown", function (e) {
                        if (
                            e.key === "Escape" &&
                            navPrimary.classList.contains("active")
                        ) {
                            menuToggle.classList.remove("active");
                            navPrimary.classList.remove("active");
                        }
                    });

                    // Close menu when navigating to a page
                    const navLinks = navPrimary.querySelectorAll(".nav-item a");
                    navLinks.forEach((link) => {
                        link.addEventListener("click", function () {
                            menuToggle.classList.remove("active");
                            navPrimary.classList.remove("active");
                        });
                    });
                }

                // --- Search Modal ---
                const searchButton = document.getElementById("searchButton");
                const searchModal = document.getElementById("searchModal");
                const searchClose = document.getElementById("searchClose");
                const searchInput = document.getElementById("searchInput");

                if (searchButton && searchModal && searchClose) {
                    searchButton.addEventListener("click", function () {
                        searchModal.classList.add("active");
                        setTimeout(() => {
                            searchInput.focus();
                        }, 100);
                    });

                    searchClose.addEventListener("click", function () {
                        searchModal.classList.remove("active");
                    });

                    // Close on escape key
                    document.addEventListener("keydown", function (e) {
                        if (
                            e.key === "Escape" &&
                            searchModal.classList.contains("active")
                        ) {
                            searchModal.classList.remove("active");
                        }
                    });
                }

                // --- Code Showcase ---
                const codeSnippets = [
                    // Step 1
                    `from pytestlab.instruments import AutoInstrument

# PyTestLab can run without hardware!
def main():
    with AutoInstrument.from_config(
        "keysight/DSOX1204G", simulate=True
    ) as scope:
        # Use a clean, chainable API
        scope.channel(1).setup(scale=0.5).enable()
        scope.trigger.setup_edge(source="CH1", level=0.2)

        # Get data back as a Polars DataFrame
        trace = scope.read_channels(1)
        print(trace.head())

main()`,
                    // Step 2
                    `# bench.yaml
bench_name: "Power-Amp Characterisation"
simulate: false

instruments:
  psu:
    profile: "keysight/EDU36311A"
    address: "TCPIP0::172.22.1.5::INSTR"
    safety_limits:
      channels:
        1: {voltage: {max: 6.0}, current: {max: 3}}
  dmm:
    profile: "keysight/34470A"
    address: "USB0::...::INSTR"`,
                    // Step 3
                    `import pytestlab

def run_bench():
    # Context manager handles connections & safety
    with pytestlab.Bench.open("bench.yaml") as bench:

        # Access instruments by their alias
        v = bench.dmm.measure_voltage_dc()
        print(f"Measured: {v.values:.4f} {v.units}")

        # Safety limits are automatically enforced
        try:
            bench.psu.channel(1).set_voltage(7.0)
        except SafetyLimitError as e:
            print(f"\\nError: {e}")

run_bench()`,
                    // Step 4
                    `from pytestlab.measurements import MeasurementSession

# Declaratively build a complex experiment
def run_sweep():
    with MeasurementSession("MOSFET IV Curve") as meas:
        meas.instrument("psu", "keysight/EDU36311A", address="...")
        meas.instrument("dmm", "keysight/34470A", address="...")

        meas.parameter("v_gate", range(0, 5, 0.5), unit="V")
        meas.parameter("v_drain", [0.1, 1.0, 5.0], unit="V")

        @meas.acquire
        def drain_current(psu, dmm, v_gate, v_drain):
            psu.channel(1).set_voltage(v_gate)
            psu.channel(2).set_voltage(v_drain)
            return dmm.measure_current_dc()

        results = meas.run()
        print(results.data.head())

run_sweep()`,
                ];

                const codeDisplay = document.getElementById("codeDisplay");
                const storySteps =
                    document.querySelectorAll(".code-story-step");

                // Keyboard accessibility: trigger click on Enter/Space
                storySteps.forEach((step) => {
                    step.addEventListener("keydown", (e) => {
                        if (e.key === "Enter" || e.key === " ") {
                            e.preventDefault();
                            step.click();
                        }
                    });
                });

                function typeCode(code, element, language = "python") {
                    let i = 0;
                    const speed = 2; // Typing speed
                    element.textContent = "";
                    element.className = `language-${language}`; // Set language for highlighting

                    function type() {
                        if (i < code.length) {
                            element.textContent =
                                code.substring(0, i + 1) + "|";
                            i++;
                            setTimeout(type, speed);
                        } else {
                            element.textContent = code;
                            // Apply syntax highlighting after typing is complete
                            if (window.Prism) {
                                Prism.highlightElement(element);
                            }
                        }
                    }

                    type();
                }

                // Initialize with first code snippet after Prism loads
                function initializeCodeDisplay() {
                    if (codeDisplay) {
                        const languages = [
                            "python",
                            "yaml",
                            "python",
                            "python",
                        ];
                        const languageNames = [
                            "Python",
                            "YAML",
                            "Python",
                            "Python",
                        ];

                        // Set initial language badge
                        const langBadge = document.querySelector(".lang-badge");
                        if (langBadge) {
                            langBadge.textContent = languageNames[0];
                        }

                        typeCode(codeSnippets[0], codeDisplay, languages[0]);
                    }
                }

                // Wait for Prism to load
                if (window.Prism) {
                    initializeCodeDisplay();
                } else {
                    window.addEventListener("load", initializeCodeDisplay);
                }

                // Set up event listeners for step selection
                storySteps.forEach((step) => {
                    step.addEventListener("click", () => {
                        // Update active state
                        storySteps.forEach((s) => s.classList.remove("active"));
                        step.classList.add("active");

                        // Get the step index from data-step attribute
                        const stepIndex =
                            parseInt(step.getAttribute("data-step")) || 0;

                        // Type new code with appropriate language class
                        if (codeDisplay) {
                            const languages = [
                                "python",
                                "yaml",
                                "python",
                                "python",
                            ];
                            const languageNames = [
                                "Python",
                                "YAML",
                                "Python",
                                "Python",
                            ];

                            // Update language badge
                            const langBadge =
                                document.querySelector(".lang-badge");
                            if (langBadge) {
                                langBadge.textContent =
                                    languageNames[stepIndex];
                            }

                            typeCode(
                                codeSnippets[stepIndex],
                                codeDisplay,
                                languages[stepIndex],
                            );
                        }
                    });
                });

                // Copy button functionality
                const copyButton = document.querySelector(".copy-button");
                if (copyButton && codeDisplay) {
                    copyButton.addEventListener("click", () => {
                        // Create a temporary div to get clean text from HTML
                        const tempDiv = document.createElement("div");
                        tempDiv.innerHTML = codeDisplay.innerHTML;
                        const cleanText =
                            tempDiv.textContent || tempDiv.innerText || "";

                        navigator.clipboard
                            .writeText(cleanText)
                            .then(() => {
                                copyButton.textContent = "Copied!";
                                copyButton.classList.add("copied");

                                setTimeout(() => {
                                    copyButton.textContent = "Copy";
                                    copyButton.classList.remove("copied");
                                }, 2000);
                            })
                            .catch(() => {
                                // Fallback for older browsers
                                const textarea =
                                    document.createElement("textarea");
                                textarea.value = cleanText;
                                document.body.appendChild(textarea);
                                textarea.select();
                                document.execCommand("copy");
                                document.body.removeChild(textarea);

                                copyButton.textContent = "Copied!";
                                copyButton.classList.add("copied");

                                setTimeout(() => {
                                    copyButton.textContent = "Copy";
                                    copyButton.classList.remove("copied");
                                }, 2000);
                            });
                    });
                }

                // --- Fade-in Animation ---
                const fadeElements = document.querySelectorAll(".fade-in");
                const observer = new IntersectionObserver(
                    (entries) => {
                        entries.forEach((entry) => {
                            if (entry.isIntersecting) {
                                entry.target.classList.add("visible");
                                observer.unobserve(entry.target);
                            }
                        });
                    },
                    { threshold: 0.1 },
                );

                fadeElements.forEach((element) => {
                    observer.observe(element);
                });

                // --- Search Functionality ---
                let searchIndex = null;

                // Load search index - try multiple paths
                const searchPaths = [
                    "/search/search_index.json",
                    "search/search_index.json",
                    "../search/search_index.json",
                ];

                async function loadSearchIndex() {
                    for (const path of searchPaths) {
                        try {
                            console.log("Trying search index path:", path);
                            const response = await fetch(path);
                            if (response.ok) {
                                const data = await response.json();
                                searchIndex = data;
                                console.log(
                                    "Search index loaded successfully from:",
                                    path,
                                    searchIndex,
                                );
                                return;
                            }
                        } catch (error) {
                            console.log(
                                "Failed to load search index from:",
                                path,
                                error,
                            );
                        }
                    }
                    console.log(
                        "Search index could not be loaded from any path",
                    );
                }

                loadSearchIndex();

                if (searchInput) {
                    searchInput.addEventListener("input", function () {
                        const query = this.value.trim().toLowerCase();
                        const searchResultsMeta =
                            document.getElementById("searchResultsMeta");
                        const searchResults =
                            document.getElementById("searchResults");

                        if (query.length > 1) {
                            searchResultsMeta.textContent = "Searching...";
                            searchResults.innerHTML = "";

                            if (searchIndex) {
                                const results = performSearch(
                                    query,
                                    searchIndex,
                                );
                                displaySearchResults(
                                    results,
                                    searchResultsMeta,
                                    searchResults,
                                );
                            } else {
                                searchResultsMeta.textContent =
                                    "Search index not loaded";
                                searchResults.innerHTML =
                                    '<div class="search-result-item"><p>Search functionality requires the MkDocs search plugin to be enabled and the site to be built.</p></div>';
                            }
                        } else {
                            searchResultsMeta.textContent =
                                "Type to start searching";
                            searchResults.innerHTML = "";
                        }
                    });
                }

                function performSearch(query, index) {
                    const results = [];
                    const docs = index.docs || [];

                    docs.forEach((doc, i) => {
                        const title = (doc.title || "").toLowerCase();
                        const text = (doc.text || "").toLowerCase();

                        if (title.includes(query) || text.includes(query)) {
                            const titleIndex = title.indexOf(query);
                            const textIndex = text.indexOf(query);
                            const score =
                                (titleIndex >= 0 ? 10 : 0) +
                                (textIndex >= 0 ? 1 : 0);

                            results.push({
                                title: doc.title,
                                location: doc.location,
                                text: doc.text,
                                score: score,
                            });
                        }
                    });

                    return results
                        .sort((a, b) => b.score - a.score)
                        .slice(0, 10);
                }

                function displaySearchResults(
                    results,
                    metaElement,
                    resultsElement,
                ) {
                    if (results.length > 0) {
                        metaElement.textContent = `${results.length} result${results.length > 1 ? "s" : ""} found`;

                        resultsElement.innerHTML = results
                            .map((result) => {
                                // Convert relative URLs to absolute paths from site root
                                let resultUrl = result.location;

                                // For relative URLs (not starting with / or http), make them absolute
                                if (
                                    resultUrl &&
                                    !resultUrl.startsWith("/") &&
                                    !resultUrl.startsWith("http") &&
                                    !resultUrl.startsWith("#")
                                ) {
                                    resultUrl = "/" + resultUrl;
                                }

                                return `
                            <div class="search-result-item">
                                <a href="${resultUrl}" class="search-result-link">
                                    <div class="search-result-title">${result.title}</div>
                                    <div class="search-result-text">${result.text.substring(0, 150)}...</div>
                                </a>
                            </div>
                        `;
                            })
                            .join("");
                    } else {
                        metaElement.textContent = "No results found";
                        resultsElement.innerHTML = "";
                    }
                }
            });
        </script>

        <!-- Prism.js for syntax highlighting -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    </body>
</html>
