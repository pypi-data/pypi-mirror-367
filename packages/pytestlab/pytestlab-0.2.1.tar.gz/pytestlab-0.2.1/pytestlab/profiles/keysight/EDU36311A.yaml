manufacturer: Keysight
model: EDU36311A
device_type: power_supply
channels:
  - channel_id: 1
    description: Channel 1
    voltage_range:
      min_val: 0
      max_val: 6
    current_limit_range:
      min_val: 0
      max_val: 5
    accuracy:
      voltage: 0.05
      current: 0.2
  - channel_id: 2
    description: Channel 2
    voltage_range:
      min_val: 0
      max_val: 30
    current_limit_range:
      min_val: 0
      max_val: 1
    accuracy:
      voltage: 0.05
      current: 0.2
  - channel_id: 3
    description: Channel 3
    voltage_range:
      min_val: 0
      max_val: 30
    current_limit_range:
      min_val: 0
      max_val: 1
    accuracy:
      voltage: 0.05
      current: 0.2
total_power: 90
line_regulation: 0.01
load_regulation: 0.01
scpi:
  commands:
    set_voltage:
      template: "VOLT {voltage}, (@{channel})"
      defaults: { channel: 1 }
      validators:
        voltage: { min: 0, max: 30 }
        channel: { min: 1, max: 3 }

    set_current:
      template: "CURR {current}, (@{channel})"
      defaults: { channel: 1 }
      validators:
        current: { min: 0, max: 5 }
        channel: { min: 1, max: 3 }

    set_output:
      template: "OUTP:STAT {state}, (@{channel})"
      defaults: { channel: 1 }
      enums:
        state:
          { on: "ON", off: "OFF", true: "ON", false: "OFF", 1: "ON", 0: "OFF" }
      validators:
        channel: { min: 1, max: 3 }

    set_display:
      template: "DISP {state}"
      enums:
        state: { on: "ON", off: "OFF", true: "ON", false: "OFF" }

    reset:
      template: "*RST"

  queries:
    identify:
      template: "*IDN?"
      response:
        type: str

    measure_voltage:
      template: "MEAS:VOLT? (@{channel})"
      defaults: { channel: 1 }
      validators:
        channel: { min: 1, max: 3 }
      response:
        type: float

    measure_current:
      template: "MEAS:CURR? (@{channel})"
      defaults: { channel: 1 }
      validators:
        channel: { min: 1, max: 3 }
      response:
        type: float

    get_output_state:
      template: "OUTP:STAT? (@{channel})"
      defaults: { channel: 1 }
      validators:
        channel: { min: 1, max: 3 }
      response:
        type: str

    system_error:
      template: "SYST:ERR?"
      response:
        type: str

simulation:
  scpi:
    "*IDN?": "Simulated,PyTestLab,EDU36311A-SIM,1.0"
    ":SYSTem:ERRor?": '+0,"No error"'
    "SYST:ERR?": '+0,"No error"'
    "VOLTage *":
      set:
        voltage: "$1"
    "CURRent *":
      set:
        current: "$1"
    "OUTPut *":
      set:
        output: "$1"
