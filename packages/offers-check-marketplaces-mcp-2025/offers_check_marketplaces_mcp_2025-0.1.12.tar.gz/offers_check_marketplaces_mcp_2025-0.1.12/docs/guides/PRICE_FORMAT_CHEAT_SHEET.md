# –®–ø–∞—Ä–≥–∞–ª–∫–∞: –§–æ—Ä–º–∞—Ç—ã —Ü–µ–Ω –¥–ª—è save_product_prices

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å):

```json
{
  "marketplaces": {
    "komus.ru": {
      "price": "1250 —Ä—É–±",
      "availability": "–≤ –Ω–∞–ª–∏—á–∏–∏",
      "url": "https://www.komus.ru/product/12345"
    }
  }
}
```

### –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏:

```python
result = await save_product_prices(195385.0, search_results)
```

## üìã –í–°–ï –ü–û–î–î–ï–†–ñ–ò–í–ê–ï–ú–´–ï –§–û–†–ú–ê–¢–´

| –§–æ—Ä–º–∞—Ç       | –°—Ç—Ä—É–∫—Ç—É—Ä–∞                              | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å                  |
| ------------ | -------------------------------------- | ----------------------------------- |
| **–§–æ—Ä–º–∞—Ç 1** | `{"marketplaces": {...}}`              | **–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç |
| **–§–æ—Ä–º–∞—Ç 2** | `{"results": [...]}`                   | –ú–∞—Å—Å–∏–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤                  |
| **–§–æ—Ä–º–∞—Ç 3** | `{"found_offers": [...]}`              | –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è               |
| **–§–æ—Ä–º–∞—Ç 4** | `{"marketplace": "...", "price": ...}` | –û–¥–∏–Ω–æ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç                 |
| **–§–æ—Ä–º–∞—Ç 5** | `[{...}, {...}]`                       | –ü—Ä—è–º–æ–π –º–∞—Å—Å–∏–≤                       |

## ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –ü–û–õ–Ø

- **`marketplace`** - –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
- **`price`** - —Ü–µ–Ω–∞ (—á–∏—Å–ª–æ –∏–ª–∏ —Å—Ç—Ä–æ–∫–∞)

## üè™ –ù–ê–ó–í–ê–ù–ò–Ø –ú–ê–†–ö–ï–¢–ü–õ–ï–ô–°–û–í

```
komus.ru
vseinstrumenti.ru
ozon.ru
wildberries.ru
officemag.ru
yandex_market
```

## üí∞ –§–û–†–ú–ê–¢–´ –¶–ï–ù

| –í—Ö–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç | –†–µ–∑—É–ª—å—Ç–∞—Ç |
| -------------- | --------- |
| `1250.0`       | `1250.0`  |
| `"1250"`       | `1250.0`  |
| `"299 —Ä—É–±"`    | `299.0`   |
| `"–æ—Ç 280 —Ä—É–±"` | `280.0`   |

## üîß –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ü–û–õ–Ø

```json
{
  "currency": "RUB",
  "availability": "–≤ –Ω–∞–ª–∏—á–∏–∏",
  "product_url": "https://...",
  "product_found": true,
  "rating": "4.5",
  "reviews_count": "12"
}
```

## ‚ùå –ß–ê–°–¢–´–ï –û–®–ò–ë–ö–ò

- ‚ùå –¶–µ–Ω–∞ = 0 –∏–ª–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª–µ `marketplace`
- ‚ùå `product_found: false`
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥ —Ç–æ–≤–∞—Ä–∞

## üìä –£–°–ü–ï–®–ù–´–ô –û–¢–í–ï–¢

```json
{
  "status": "success",
  "message": "–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ 2 —Ü–µ–Ω –¥–ª—è —Ç–æ–≤–∞—Ä–∞ 195385.0",
  "saved_prices": 2,
  "prices_saved": [...]
}
```

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

–ü—Ä–∏ –æ—à–∏–±–∫–µ `"status": "no_data"` –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–µ `diagnostic_info` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

---

**üí° –°–æ–≤–µ—Ç:** –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ `product_url` –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ü–µ–Ω!
