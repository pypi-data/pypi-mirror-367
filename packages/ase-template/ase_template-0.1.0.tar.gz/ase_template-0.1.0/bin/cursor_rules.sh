#!/usr/bin/env bash

# Copy AGENTS.md with Cursor frontmatter to .cursor/rules/common.mdc
# This ensures Cursor has the required frontmatter while keeping AGENTS.md as the source of truth

set -euo pipefail

# Create .cursor/rules directory if it doesn't exist
mkdir -p .cursor/rules

# Create the frontmatter and copy AGENTS.md content
command cat > .cursor/rules/common.mdc << 'EOF'
---
# WARNING: This file is auto-generated.
# DO NOT EDIT THIS FILE DIRECTLY.
# See `bin/cursor_rules.sh` for details.
description: AGENTS.md instructions
alwaysApply: true
---

EOF

# Append the content of AGENTS.md
command cat AGENTS.md >> .cursor/rules/common.mdc

echo "Updated .cursor/rules/common.mdc with AGENTS.md content and proper frontmatter"
