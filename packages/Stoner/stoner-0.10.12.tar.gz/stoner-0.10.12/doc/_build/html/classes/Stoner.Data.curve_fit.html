<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Data.curve_fit &#8212; Stoner Pacakge API Documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/better.css?v=58ad701a" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=0b74bb8b" />
    <script src="../_static/documentation_options.js?v=29a6c3e3"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Data.decompose" href="Stoner.Data.decompose.html" />
    <link rel="prev" title="Data.count" href="Stoner.Data.count.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  </head><body>
    <header id="pageheader"><h1><a href="../index.html ">
        Stoner Pacakge API Documentation
    </a></h1></header>
  <div class="related top">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="Stoner.Data.count.html" title="Previous document">Data.count</a>
        </li>
        <li>
          <a href="Stoner.Data.decompose.html" title="Next document">Data.decompose</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Stoner Package</a></li>
      <li>
        <a href="../Stoner.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Stoner</span></code> Package</a>
      </li>
      <li>
        <a href="Stoner.Data.html">Stoner.Data</a>
      </li> 
    </ul>
  </nav>
  </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="data-curve-fit">
<h1>Data.curve_fit<a class="headerlink" href="#data-curve-fit" title="Link to this heading">¶</a></h1>
<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Data.curve_fit">
<span class="sig-prename descclassname"><span class="pre">Data.</span></span><span class="sig-name descname"><span class="pre">curve_fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xcol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ycol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Data.curve_fit" title="Link to this definition">¶</a></dt>
<dd><p>General curve fitting function passed through from scipy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>callable, lmfit_mod.Model, odr.Model</em>) – The fitting function with the form def f(x,*p) where p is a list of fitting parameters</p></li>
<li><p><strong>xcol</strong> (<em>index, Iterable</em>) – The index of the x-column data to fit. If list or other iterable sends a tuple of x columns to func
for N-d fitting.</p></li>
<li><p><strong>ycol</strong> (<em>index, list of indices or array</em>) – The index of the y-column data to fit. If an array, then should be 1D and
the same length as the data. If ycol is a list of indices then the columns are iterated over in
turn, fitting occurring for each one. In this case the return value is a list of what would be
returned for a single column fit.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>p0</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em>, </em><em>array</em><em> or </em><em>callable</em>) – A vector of initial parameter values to try. See notes below.</p></li>
<li><p><strong>sigma</strong> (<em>index</em>) – The index of the column with the y-error bars</p></li>
<li><p><strong>bounds</strong> (<em>callable</em>) – A callable object that evaluates true if a row is to be included. Should be of the form f(x,y)</p></li>
<li><p><strong>result</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Determines whether the fitted data should be added into the DataFile object. If result is True then
the last column will be used. If result is a string or an integer then it is used as a column index.
Default to None for not adding fitted data</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Inidcatesa whether the fitted data replaces existing data or is inserted as a new column (default
False)</p></li>
<li><p><strong>header</strong> (<em>string</em><em> or </em><em>None</em>) – If this is a string then it is used as the name of the fitted data. (default None)</p></li>
<li><p><strong>absolute_sigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If False, <cite>sigma</cite> denotes relative weights of the data points. The default True means that
the sigma parameter is the reciprocal of the absolute standard deviation.</p></li>
<li><p><strong>output</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>default &quot;fit&quot;</em>) – Specify what to return.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><em>(various)</em> –</p>
<dl class="simple">
<dt>The return value is determined by the <em>output</em> parameter. Options are:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>”fit”    (tuple of popt,pcov) Optimal values of the fitting parameters p, and the</dt><dd><p>variance-co-variance matrix for the fitting parameters.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>”row”     just a one dimensional numpy array of the fit parameters interleaved with their</dt><dd><p>uncertainties</p>
</dd>
</dl>
</li>
<li><p>”full”    a tuple of (popt,pcov,dictionary of optional outputs, message, return code, row).</p></li>
<li><dl class="simple">
<dt>”data”   a copy of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Core.DataFile</span></code> object with fit recorded in the</dt><dd><p>metadata and optionally as a new column.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the columns are not specified (or set to None) then the X and Y data are taken using the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Stoner.Core.DataFile.setas</span></code> attribute.</p>
<p>The fitting function should have prototype y=f(x,p[0],p[1],p[2]…)
The x-column and y-column can be anything that <code class="xref py py-meth docutils literal notranslate"><span class="pre">Stoner.Core.DataFile.find_col()</span></code> can use as an index
but typucally either strings to be matched against column headings or integers.
The initial parameter values and weightings default to None which corresponds to all parameters starting
at 1 and all points equally weighted. The bounds function has format b(x, y-vec) and rewturns true if the
point is to be used in the fit and false if not.</p>
<p>The <em>absolute_sigma</em> keyword determines whether the returned covariance matrix <cite>pcov</cite> is based on
<em>estimated</em> errors in the data, and is not affected by the overall magnitude of the values in <cite>sigma</cite>.
Only the relative magnitudes of the <em>sigma</em> values matter.
If True, <cite>sigma</cite> describes one standard deviation errors of the input data points. The estimated
covariance in <cite>pcov</cite> is based on these values.</p>
<p>The starting vector <em>p0</em> can be either a list, tuple or array, or a callable that will produce a list,
tuple or array. IF callable, it should take the form:</p>
<blockquote>
<div><dl class="simple">
<dt>def p0_func(ydata,x=xdata):</dt><dd></dd>
</dl>
</div></blockquote>
<p>and return a list of parameter values that is in the same order as the model function. If p0 is not
given and a <code class="xref py py-class docutils literal notranslate"><span class="pre">lmfit_mod.Model</span></code> or <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.odr.Model.html#scipy.odr.Model" title="(in SciPy v1.15.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">scipy.odr.Model</span></code></a> is supplied as the model function,
then the model’s estimates of the starting values will be used instead.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="Stoner.Data.lmfit.html#Stoner.Data.lmfit" title="Stoner.Data.lmfit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Stoner.Data.lmfit()</span></code></a></p></li>
<li><p><a class="reference internal" href="Stoner.Data.odr.html#Stoner.Data.odr" title="Stoner.Data.odr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Stoner.Data.odr()</span></code></a></p></li>
<li><p><a class="reference internal" href="Stoner.Data.differential_evolution.html#Stoner.Data.differential_evolution" title="Stoner.Data.differential_evolution"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Stoner.Data.differential_evolution()</span></code></a></p></li>
<li><p>User guide section <a class="reference internal" href="../UserGuide/curve_fitting.html#curve-fit-guide"><span class="std std-ref">Curve Fitting in the Stoner Package</span></a></p></li>
</ul>
</div>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/StonerLogo2.png" alt="Logo of Stoner Package"/>
            </a></p>
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Data.curve_fit</a><ul>
<li><a class="reference internal" href="#Stoner.Data.curve_fit"><code class="docutils literal notranslate"><span class="pre">Data.curve_fit()</span></code></a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="Stoner.Data.count.html"
                          title="previous chapter">Data.count</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="Stoner.Data.decompose.html"
                          title="next chapter">Data.decompose</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/classes/Stoner.Data.curve_fit.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<form class="search" action="../search.html" method="get">
  <input type="text" name="q"
   placeholder="type to search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="related bottom">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="Stoner.Data.count.html" title="Previous document">Data.count</a>
        </li>
        <li>
          <a href="Stoner.Data.decompose.html" title="Next document">Data.decompose</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Stoner Package</a></li>
      <li>
        <a href="../Stoner.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Stoner</span></code> Package</a>
      </li>
      <li>
        <a href="Stoner.Data.html">Stoner.Data</a>
      </li> 
    </ul>
  </nav>
  </div>
  <footer id="pagefooter">&copy; 2013-15, Gavin Burnell et al.Last updated on Apr 16, 2025.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a>
      8.2.3
        with the <a href="http://github.com/irskep/sphinx-better-theme">
          better</a> theme.

  </footer>

  
  </body>
</html>