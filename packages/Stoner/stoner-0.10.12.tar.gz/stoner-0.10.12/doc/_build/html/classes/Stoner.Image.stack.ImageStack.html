<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ImageStack &#8212; Stoner Pacakge API Documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/better.css?v=58ad701a" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=0b74bb8b" />
    <script src="../_static/documentation_options.js?v=29a6c3e3"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="DrawProxy" href="Stoner.Image.attrs.DrawProxy.html" />
    <link rel="prev" title="ImageStackMixin" href="Stoner.Image.stack.ImageStackMixin.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  </head><body>
    <header id="pageheader"><h1><a href="../index.html ">
        Stoner Pacakge API Documentation
    </a></h1></header>
  <div class="related top">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="Stoner.Image.stack.ImageStackMixin.html" title="Previous document">ImageStackMixin</a>
        </li>
        <li>
          <a href="Stoner.Image.attrs.DrawProxy.html" title="Next document">DrawProxy</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Stoner Package</a></li>
      <li>
        <a href="../Stoner.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Stoner</span></code> Package</a>
      </li> 
    </ul>
  </nav>
  </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="imagestack">
<h1>ImageStack<a class="headerlink" href="#imagestack" title="Link to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Stoner.Image.stack.</span></span><span class="sig-name descname"><span class="pre">ImageStack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Image/stack.html#ImageStack"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Stoner.Image.stack.ImageStack" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">StackAnalysisMixin</span></code>, <a class="reference internal" href="Stoner.Image.stack.ImageStackMixin.html#Stoner.Image.stack.ImageStackMixin" title="Stoner.Image.stack.ImageStackMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageStackMixin</span></code></a>, <a class="reference internal" href="Stoner.Image.folders.ImageFolderMixin.html#Stoner.Image.folders.ImageFolderMixin" title="Stoner.Image.folders.ImageFolderMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageFolderMixin</span></code></a>, <a class="reference internal" href="Stoner.folders.mixins.DiskBasedFolderMixin.html#Stoner.folders.mixins.DiskBasedFolderMixin" title="Stoner.folders.mixins.DiskBasedFolderMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiskBasedFolderMixin</span></code></a>, <a class="reference internal" href="Stoner.folders.core.BaseFolder.html#Stoner.folders.core.BaseFolder" title="Stoner.folders.core.BaseFolder"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseFolder</span></code></a></p>
<p>An alternative implementation of an image stack based on BaseFolder.</p>
<p class="rubric">Attributes Summary</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.basenames" title="Stoner.Image.stack.ImageStack.basenames"><code class="xref py py-obj docutils literal notranslate"><span class="pre">basenames</span></code></a></p></td>
<td><p>Return a list of just the filename parts of the objectFolder.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.clone" title="Stoner.Image.stack.ImageStack.clone"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clone</span></code></a></p></td>
<td><p>Clone just does a deepcopy as a property for compatibility with <code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Core.DataFile</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.debug" title="Stoner.Image.stack.ImageStack.debug"><code class="xref py py-obj docutils literal notranslate"><span class="pre">debug</span></code></a></p></td>
<td><p>Just read the local debug value.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.defaults" title="Stoner.Image.stack.ImageStack.defaults"><code class="xref py py-obj docutils literal notranslate"><span class="pre">defaults</span></code></a></p></td>
<td><p>Build a single list of all of our defaults by iterating over the __mro__, caching the result.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.depth" title="Stoner.Image.stack.ImageStack.depth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">depth</span></code></a></p></td>
<td><p>Give the maximum number of levels of group below the current objectFolder.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.directory" title="Stoner.Image.stack.ImageStack.directory"><code class="xref py py-obj docutils literal notranslate"><span class="pre">directory</span></code></a></p></td>
<td><p>Just alias directory to root now.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.each" title="Stoner.Image.stack.ImageStack.each"><code class="xref py py-obj docutils literal notranslate"><span class="pre">each</span></code></a></p></td>
<td><p>Return a <code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.folders.each.item</span></code> proxy object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.files" title="Stoner.Image.stack.ImageStack.files"><code class="xref py py-obj docutils literal notranslate"><span class="pre">files</span></code></a></p></td>
<td><p>Return an iterator of potentially unloaded named objects.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.groups" title="Stoner.Image.stack.ImageStack.groups"><code class="xref py py-obj docutils literal notranslate"><span class="pre">groups</span></code></a></p></td>
<td><p>Subfolders are held in an ordered dictionary of groups.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.images" title="Stoner.Image.stack.ImageStack.images"><code class="xref py py-obj docutils literal notranslate"><span class="pre">images</span></code></a></p></td>
<td><p>Iterate over just the images in the Folder.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.imarray" title="Stoner.Image.stack.ImageStack.imarray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">imarray</span></code></a></p></td>
<td><p>Produce the 3D stack of images - as [image,x,y].</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.instance" title="Stoner.Image.stack.ImageStack.instance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">instance</span></code></a></p></td>
<td><p>Return a default instance of the type of object in the folder.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.is_empty" title="Stoner.Image.stack.ImageStack.is_empty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_empty</span></code></a></p></td>
<td><p>Return True if the folder is empty.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.key" title="Stoner.Image.stack.ImageStack.key"><code class="xref py py-obj docutils literal notranslate"><span class="pre">key</span></code></a></p></td>
<td><p>Override the parent class <em>key</em> to use the <em>directory</em> attribute.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.layout" title="Stoner.Image.stack.ImageStack.layout"><code class="xref py py-obj docutils literal notranslate"><span class="pre">layout</span></code></a></p></td>
<td><p>Return a tuple that describes the number of files and groups in the folder.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.loaded" title="Stoner.Image.stack.ImageStack.loaded"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loaded</span></code></a></p></td>
<td><p>Iterate only over those members of the folder in memory.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.loader" title="Stoner.Image.stack.ImageStack.loader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loader</span></code></a></p></td>
<td><p>Return a callable that will load the files on demand.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.ls" title="Stoner.Image.stack.ImageStack.ls"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ls</span></code></a></p></td>
<td><p>List just the names of the objects in the folder.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.lsgrp" title="Stoner.Image.stack.ImageStack.lsgrp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lsgrp</span></code></a></p></td>
<td><p>Return a list of the groups as a generator.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.max_size" title="Stoner.Image.stack.ImageStack.max_size"><code class="xref py py-obj docutils literal notranslate"><span class="pre">max_size</span></code></a></p></td>
<td><p>Get the biggest image dimensions in the stack.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.metadata" title="Stoner.Image.stack.ImageStack.metadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">metadata</span></code></a></p></td>
<td><p>Return a <a class="reference internal" href="Stoner.folders.metadata.MetadataProxy.html#Stoner.folders.metadata.MetadataProxy" title="Stoner.folders.metadata.MetadataProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.folders.metadata.MetadataProxy</span></code></a> object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.mindepth" title="Stoner.Image.stack.ImageStack.mindepth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mindepth</span></code></a></p></td>
<td><p>Give the minimum number of levels of group below the current objectFolder.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.not_empty" title="Stoner.Image.stack.ImageStack.not_empty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">not_empty</span></code></a></p></td>
<td><p>Iterate over the objectFolder that checks whether the loaded metadataObject objects have any data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.not_loaded" title="Stoner.Image.stack.ImageStack.not_loaded"><code class="xref py py-obj docutils literal notranslate"><span class="pre">not_loaded</span></code></a></p></td>
<td><p>Return an array of True/False for whether we've loaded a metadataObject yet.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.objects" title="Stoner.Image.stack.ImageStack.objects"><code class="xref py py-obj docutils literal notranslate"><span class="pre">objects</span></code></a></p></td>
<td><p>Return the objects in the folder are stored in a <code class="xref py py-class docutils literal notranslate"><span class="pre">RegexpDict</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.pattern" title="Stoner.Image.stack.ImageStack.pattern"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pattern</span></code></a></p></td>
<td><p>Provide support for getting the pattern attribute.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.root" title="Stoner.Image.stack.ImageStack.root"><code class="xref py py-obj docutils literal notranslate"><span class="pre">root</span></code></a></p></td>
<td><p>Return the real folder root.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.setas" title="Stoner.Image.stack.ImageStack.setas"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setas</span></code></a></p></td>
<td><p>Return the proxy for the setas attribute for each object in the folder.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.shape" title="Stoner.Image.stack.ImageStack.shape"><code class="xref py py-obj docutils literal notranslate"><span class="pre">shape</span></code></a></p></td>
<td><p>Return the stack shape - after re-ordering the indices.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.size" title="Stoner.Image.stack.ImageStack.size"><code class="xref py py-obj docutils literal notranslate"><span class="pre">size</span></code></a></p></td>
<td><p>Return the size of an individual image or False if not all images are the same size.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.trunkdepth" title="Stoner.Image.stack.ImageStack.trunkdepth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trunkdepth</span></code></a></p></td>
<td><p>Return the number of levels of group before a group with files is found.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.type" title="Stoner.Image.stack.ImageStack.type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">type</span></code></a></p></td>
<td><p>Return the (sub)class of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Core.metadataObject</span></code> instances.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Summary</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.add_group" title="Stoner.Image.stack.ImageStack.add_group"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_group</span></code></a>(key)</p></td>
<td><p>Add a new group to the current BaseFolder with the given key.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.align" title="Stoner.Image.stack.ImageStack.align"><code class="xref py py-obj docutils literal notranslate"><span class="pre">align</span></code></a>(*args, **kargs)</p></td>
<td><p>Align each image in the folder to the reference image.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.all" title="Stoner.Image.stack.ImageStack.all"><code class="xref py py-obj docutils literal notranslate"><span class="pre">all</span></code></a>()</p></td>
<td><p>Iterate over all the files in the Folder and all it's sub Folders recursely.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.append" title="Stoner.Image.stack.ImageStack.append"><code class="xref py py-obj docutils literal notranslate"><span class="pre">append</span></code></a>(value)</p></td>
<td><p>Append an item to the folder object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.apply_all" title="Stoner.Image.stack.ImageStack.apply_all"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_all</span></code></a>(func, *args, **kargs)</p></td>
<td><p>Apply function to all images in the stack.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.as_stack" title="Stoner.Image.stack.ImageStack.as_stack"><code class="xref py py-obj docutils literal notranslate"><span class="pre">as_stack</span></code></a>()</p></td>
<td><p>Return a ImageStack of the images in the current group.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.asfloat" title="Stoner.Image.stack.ImageStack.asfloat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asfloat</span></code></a>([normalise, clip, clip_negative])</p></td>
<td><p>Convert stack to floating point type.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.average" title="Stoner.Image.stack.ImageStack.average"><code class="xref py py-obj docutils literal notranslate"><span class="pre">average</span></code></a>([weights, _box, _metadata])</p></td>
<td><p>Get an array of average pixel values for the stack.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.clear" title="Stoner.Image.stack.ImageStack.clear"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clear</span></code></a>()</p></td>
<td><p>Clear the subgroups.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.compress" title="Stoner.Image.stack.ImageStack.compress"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compress</span></code></a>([base, key, keep_terminal])</p></td>
<td><p>Compresses all empty groups from the root up until the first non-empty group is located.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.convert" title="Stoner.Image.stack.ImageStack.convert"><code class="xref py py-obj docutils literal notranslate"><span class="pre">convert</span></code></a>(dtype[, force_copy, uniform, normalise])</p></td>
<td><p>Convert an image to the requested data-type.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.correct_drifts" title="Stoner.Image.stack.ImageStack.correct_drifts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">correct_drifts</span></code></a>(refindex[, threshold, ...])</p></td>
<td><p>Align images to correct for image drift.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.count" title="Stoner.Image.stack.ImageStack.count"><code class="xref py py-obj docutils literal notranslate"><span class="pre">count</span></code></a>(value)</p></td>
<td><p>Provide a count method like a sequence.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.crop_stack" title="Stoner.Image.stack.ImageStack.crop_stack"><code class="xref py py-obj docutils literal notranslate"><span class="pre">crop_stack</span></code></a>(box)</p></td>
<td><p>Crop the imagestack to a box.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.dtype_limits" title="Stoner.Image.stack.ImageStack.dtype_limits"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dtype_limits</span></code></a>([clip_negative])</p></td>
<td><p>Return intensity limits, i.e. (min, max) tuple, of imarray dtype.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.extend" title="Stoner.Image.stack.ImageStack.extend"><code class="xref py py-obj docutils literal notranslate"><span class="pre">extend</span></code></a>(values)</p></td>
<td><p>S.extend(iterable) -- extend sequence by appending elements from the iterable</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.fetch" title="Stoner.Image.stack.ImageStack.fetch"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fetch</span></code></a>()</p></td>
<td><p>Preload the contents of the DiskBasedFolderMixin.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.file" title="Stoner.Image.stack.ImageStack.file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">file</span></code></a>(name, value[, create, pathsplit])</p></td>
<td><p>recursely add groups in order to put the named value into a virtual tree of <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseFolder</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.filter" title="Stoner.Image.stack.ImageStack.filter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">filter</span></code></a>([filter, invert, copy, recurse, prune])</p></td>
<td><p>Filter the current set of files by some criterion.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.filterout" title="Stoner.Image.stack.ImageStack.filterout"><code class="xref py py-obj docutils literal notranslate"><span class="pre">filterout</span></code></a>(filter[, copy, recurse, prune])</p></td>
<td><p>Synonym for self.filter(filter,invert=True).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.flatten" title="Stoner.Image.stack.ImageStack.flatten"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flatten</span></code></a>([depth])</p></td>
<td><p>Compresses all the groups and sub-groups iunto a single flat file list.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.from_tiff" title="Stoner.Image.stack.ImageStack.from_tiff"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_tiff</span></code></a>(filename, **kargs)</p></td>
<td><p>Create a new ImageArray from a tiff file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.get" title="Stoner.Image.stack.ImageStack.get"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get</span></code></a>(name[, default])</p></td>
<td><p>Return either a sub-group or named object from this folder.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.getlist" title="Stoner.Image.stack.ImageStack.getlist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getlist</span></code></a>(**kargs)</p></td>
<td><p>Scan the current directory, optionally recursively to build a list of filenames.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.group" title="Stoner.Image.stack.ImageStack.group"><code class="xref py py-obj docutils literal notranslate"><span class="pre">group</span></code></a>(key)</p></td>
<td><p>Sort Files into a series of objectFolders according to the value of the key.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.index" title="Stoner.Image.stack.ImageStack.index"><code class="xref py py-obj docutils literal notranslate"><span class="pre">index</span></code></a>(value[, start, stop])</p></td>
<td><p>Provide an index method like a sequence.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.insert" title="Stoner.Image.stack.ImageStack.insert"><code class="xref py py-obj docutils literal notranslate"><span class="pre">insert</span></code></a>(index, value)</p></td>
<td><p>Implement the insert method with the option to append as well.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.items" title="Stoner.Image.stack.ImageStack.items"><code class="xref py py-obj docutils literal notranslate"><span class="pre">items</span></code></a>()</p></td>
<td><p>Return the key,value pairs for the subbroups of this folder.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.keep_latest" title="Stoner.Image.stack.ImageStack.keep_latest"><code class="xref py py-obj docutils literal notranslate"><span class="pre">keep_latest</span></code></a>()</p></td>
<td><p>Filter out earlier revisions of files with the same name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.keys" title="Stoner.Image.stack.ImageStack.keys"><code class="xref py py-obj docutils literal notranslate"><span class="pre">keys</span></code></a>()</p></td>
<td><p>Return the keys used to access the sub-=groups of this folder.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.loadgroup" title="Stoner.Image.stack.ImageStack.loadgroup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loadgroup</span></code></a>()</p></td>
<td><p>Load all files from this group into memory.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.make_name" title="Stoner.Image.stack.ImageStack.make_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">make_name</span></code></a>([value])</p></td>
<td><p>Construct a name from the value object if possible.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.mask_select" title="Stoner.Image.stack.ImageStack.mask_select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mask_select</span></code></a>()</p></td>
<td><p>Run the ImageFile.mask.select() on each image.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.mean" title="Stoner.Image.stack.ImageStack.mean"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mean</span></code></a>([_box, _metadata])</p></td>
<td><p>Calculate the mean value of all the images in the stack.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.montage" title="Stoner.Image.stack.ImageStack.montage"><code class="xref py py-obj docutils literal notranslate"><span class="pre">montage</span></code></a>(*args, **kargs)</p></td>
<td><p>Call the plot method for each metadataObject, but switching to a subplot each time.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.on_load_process" title="Stoner.Image.stack.ImageStack.on_load_process"><code class="xref py py-obj docutils literal notranslate"><span class="pre">on_load_process</span></code></a>(tmp)</p></td>
<td><p>Carry out processing on a newly loaded file to set means and extra metadata.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.pop" title="Stoner.Image.stack.ImageStack.pop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pop</span></code></a>([name, default])</p></td>
<td><p>Return and remove either a subgroup or named object from this folder.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.popitem" title="Stoner.Image.stack.ImageStack.popitem"><code class="xref py py-obj docutils literal notranslate"><span class="pre">popitem</span></code></a>()</p></td>
<td><p>Return the most recent subgroup from this folder.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.prune" title="Stoner.Image.stack.ImageStack.prune"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prune</span></code></a>([name])</p></td>
<td><p>Remove any empty groups from the objectFolder (and subgroups).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.remove" title="Stoner.Image.stack.ImageStack.remove"><code class="xref py py-obj docutils literal notranslate"><span class="pre">remove</span></code></a>(value)</p></td>
<td><p>S.remove(value) -- remove first occurrence of value.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.reverse" title="Stoner.Image.stack.ImageStack.reverse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reverse</span></code></a>()</p></td>
<td><p>S.reverse() -- reverse <em>IN PLACE</em></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.save" title="Stoner.Image.stack.ImageStack.save"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save</span></code></a>([root])</p></td>
<td><p>Save the entire data folder out to disc using the groups as a directory tree.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.select" title="Stoner.Image.stack.ImageStack.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code></a>(*args, **kargs)</p></td>
<td><p>Select a subset of the objects in the folder based on flexible search criteria on the metadata.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.setdefault" title="Stoner.Image.stack.ImageStack.setdefault"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setdefault</span></code></a>(k[, d])</p></td>
<td><p>Return or set a subgroup or named object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.show" title="Stoner.Image.stack.ImageStack.show"><code class="xref py py-obj docutils literal notranslate"><span class="pre">show</span></code></a>()</p></td>
<td><p>Pass through to <code class="xref py py-meth docutils literal notranslate"><span class="pre">Stoner.Image.ImageFolder.view()</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.slice_metadata" title="Stoner.Image.stack.ImageStack.slice_metadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">slice_metadata</span></code></a>(key[, output])</p></td>
<td><p>Return an array of the metadata values for each item/file in the top level group.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.sort" title="Stoner.Image.stack.ImageStack.sort"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sort</span></code></a>([key, reverse, recurse])</p></td>
<td><p>Sort the files by some key.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.stddev" title="Stoner.Image.stack.ImageStack.stddev"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stddev</span></code></a>([weights, _box, _metadata])</p></td>
<td><p>Calculate weighted standard deviation for stack.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.stderr" title="Stoner.Image.stack.ImageStack.stderr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stderr</span></code></a>([weights, _box, _metadata])</p></td>
<td><p>Calculate standard error in the stack average.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.subtract" title="Stoner.Image.stack.ImageStack.subtract"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subtract</span></code></a>(background)</p></td>
<td><p>Subtract a background image (or index) from all images in the stack.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.to_tiff" title="Stoner.Image.stack.ImageStack.to_tiff"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_tiff</span></code></a>(filename)</p></td>
<td><p>Save the ImageArray as a tiff image with metadata.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.unflatten" title="Stoner.Image.stack.ImageStack.unflatten"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unflatten</span></code></a>()</p></td>
<td><p>Take the file list an unflattens them according to the file paths.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.unload" title="Stoner.Image.stack.ImageStack.unload"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unload</span></code></a>([name])</p></td>
<td><p>Remove the instance from memory without losing the name in the Folder.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.update" title="Stoner.Image.stack.ImageStack.update"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update</span></code></a>(other)</p></td>
<td><p>Update this folder with a dictionary or another folder.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.values" title="Stoner.Image.stack.ImageStack.values"><code class="xref py py-obj docutils literal notranslate"><span class="pre">values</span></code></a>()</p></td>
<td><p>Return the sub-groups of this folder.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.walk_groups" title="Stoner.Image.stack.ImageStack.walk_groups"><code class="xref py py-obj docutils literal notranslate"><span class="pre">walk_groups</span></code></a>(walker, **kargs)</p></td>
<td><p>Walk through a hierarchy of groups and calls walker for each file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Image.stack.ImageStack.zip_groups" title="Stoner.Image.stack.ImageStack.zip_groups"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zip_groups</span></code></a>(groups)</p></td>
<td><p>Return a list of tuples of metadataObjects drawn from the specified groups.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes Documentation</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.basenames">
<span class="sig-name descname"><span class="pre">basenames</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.basenames" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of just the filename parts of the objectFolder.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.clone">
<span class="sig-name descname"><span class="pre">clone</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.clone" title="Link to this definition">¶</a></dt>
<dd><p>Clone just does a deepcopy as a property for compatibility with <code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Core.DataFile</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.debug">
<span class="sig-name descname"><span class="pre">debug</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.debug" title="Link to this definition">¶</a></dt>
<dd><p>Just read the local debug value.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.defaults">
<span class="sig-name descname"><span class="pre">defaults</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.defaults" title="Link to this definition">¶</a></dt>
<dd><p>Build a single list of all of our defaults by iterating over the __mro__, caching the result.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.depth">
<span class="sig-name descname"><span class="pre">depth</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.depth" title="Link to this definition">¶</a></dt>
<dd><p>Give the maximum number of levels of group below the current objectFolder.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.directory">
<span class="sig-name descname"><span class="pre">directory</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.directory" title="Link to this definition">¶</a></dt>
<dd><p>Just alias directory to root now.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.each">
<span class="sig-name descname"><span class="pre">each</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.each" title="Link to this definition">¶</a></dt>
<dd><p>Return a <code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.folders.each.item</span></code> proxy object.</p>
<p>This is for calling attributes of the member type of the folder.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.files">
<span class="sig-name descname"><span class="pre">files</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.files" title="Link to this definition">¶</a></dt>
<dd><p>Return an iterator of potentially unloaded named objects.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.groups">
<span class="sig-name descname"><span class="pre">groups</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.groups" title="Link to this definition">¶</a></dt>
<dd><p>Subfolders are held in an ordered dictionary of groups.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.images">
<span class="sig-name descname"><span class="pre">images</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.images" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over just the images in the Folder.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.imarray">
<span class="sig-name descname"><span class="pre">imarray</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.imarray" title="Link to this definition">¶</a></dt>
<dd><p>Produce the 3D stack of images - as [image,x,y].</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.instance">
<span class="sig-name descname"><span class="pre">instance</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.instance" title="Link to this definition">¶</a></dt>
<dd><p>Return a default instance of the type of object in the folder.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.is_empty">
<span class="sig-name descname"><span class="pre">is_empty</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.is_empty" title="Link to this definition">¶</a></dt>
<dd><p>Return True if the folder is empty.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.key">
<span class="sig-name descname"><span class="pre">key</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.key" title="Link to this definition">¶</a></dt>
<dd><p>Override the parent class <em>key</em> to use the <em>directory</em> attribute.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.layout">
<span class="sig-name descname"><span class="pre">layout</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.layout" title="Link to this definition">¶</a></dt>
<dd><p>Return a tuple that describes the number of files and groups in the folder.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.loaded">
<span class="sig-name descname"><span class="pre">loaded</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.loaded" title="Link to this definition">¶</a></dt>
<dd><p>Iterate only over those members of the folder in memory.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.loader">
<span class="sig-name descname"><span class="pre">loader</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.loader" title="Link to this definition">¶</a></dt>
<dd><p>Return a callable that will load the files on demand.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.ls">
<span class="sig-name descname"><span class="pre">ls</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.ls" title="Link to this definition">¶</a></dt>
<dd><p>List just the names of the objects in the folder.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.lsgrp">
<span class="sig-name descname"><span class="pre">lsgrp</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.lsgrp" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of the groups as a generator.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.max_size">
<span class="sig-name descname"><span class="pre">max_size</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.max_size" title="Link to this definition">¶</a></dt>
<dd><p>Get the biggest image dimensions in the stack.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.metadata">
<span class="sig-name descname"><span class="pre">metadata</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.metadata" title="Link to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="Stoner.folders.metadata.MetadataProxy.html#Stoner.folders.metadata.MetadataProxy" title="Stoner.folders.metadata.MetadataProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.folders.metadata.MetadataProxy</span></code></a> object.</p>
<p>This allows for operations on combined metadata.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.mindepth">
<span class="sig-name descname"><span class="pre">mindepth</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.mindepth" title="Link to this definition">¶</a></dt>
<dd><p>Give the minimum number of levels of group below the current objectFolder.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.not_empty">
<span class="sig-name descname"><span class="pre">not_empty</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.not_empty" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over the objectFolder that checks whether the loaded metadataObject objects have any data.</p>
<p>Returns the next non-empty DatFile member of the objectFolder.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>not_empty will also silently skip over any cases where loading the metadataObject object will raise
and exception.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.not_loaded">
<span class="sig-name descname"><span class="pre">not_loaded</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.not_loaded" title="Link to this definition">¶</a></dt>
<dd><p>Return an array of True/False for whether we’ve loaded a metadataObject yet.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.objects">
<span class="sig-name descname"><span class="pre">objects</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.objects" title="Link to this definition">¶</a></dt>
<dd><p>Return the objects in the folder are stored in a <code class="xref py py-class docutils literal notranslate"><span class="pre">RegexpDict</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.pattern">
<span class="sig-name descname"><span class="pre">pattern</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.pattern" title="Link to this definition">¶</a></dt>
<dd><p>Provide support for getting the pattern attribute.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.root">
<span class="sig-name descname"><span class="pre">root</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.root" title="Link to this definition">¶</a></dt>
<dd><p>Return the real folder root.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.setas">
<span class="sig-name descname"><span class="pre">setas</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.setas" title="Link to this definition">¶</a></dt>
<dd><p>Return the proxy for the setas attribute for each object in the folder.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.shape">
<span class="sig-name descname"><span class="pre">shape</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.shape" title="Link to this definition">¶</a></dt>
<dd><p>Return the stack shape - after re-ordering the indices.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.size">
<span class="sig-name descname"><span class="pre">size</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.size" title="Link to this definition">¶</a></dt>
<dd><p>Return the size of an individual image or False if not all images are the same size.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.trunkdepth">
<span class="sig-name descname"><span class="pre">trunkdepth</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.trunkdepth" title="Link to this definition">¶</a></dt>
<dd><p>Return the number of levels of group before a group with files is found.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.type">
<span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.type" title="Link to this definition">¶</a></dt>
<dd><p>Return the (sub)class of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Core.metadataObject</span></code> instances.</p>
</dd></dl>

<p class="rubric">Methods Documentation</p>
<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.add_group">
<span class="sig-name descname"><span class="pre">add_group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.add_group" title="Link to this definition">¶</a></dt>
<dd><p>Add a new group to the current BaseFolder with the given key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>string</em>) – A hashable value to be used as the dictionary key in the groups dictionary</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A copy of the objectFolder</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If key already exists in the groups dictionary then no action is taken.</p>
</div>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>Propagate any extra attributes into the groups.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.align">
<span class="sig-name descname"><span class="pre">align</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.align" title="Link to this definition">¶</a></dt>
<dd><p>Align each image in the folder to the reference image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ref</strong> (<em>str, int, ImageFile, ImageArray or 2D array</em>) – The reference image to align to. If a string or an int, then this is used to lookup the corresponding
member of the ImageFolder which is then used. ImageFiles, ImageArrays and 2D arrays are used directly
as reference images.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The method is passed to the <code class="xref py py-class docutils literal notranslate"><span class="pre">Stone.Image.ImageArray.align</span></code> method to control how the image
alignment is done. By default the ‘Scharr’ method is used.</p></li>
<li><p><strong>box</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em> of </em><em>ints</em><em> or </em><em>floats</em>) – Specifies a subset of the images to be used to calculate the alignment with.</p></li>
<li><p><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – Magnification factor to scale the image by before doing the alignment for better sub=pixel alignments.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The aligned ImageFolder.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.all">
<span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.all" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over all the files in the Folder and all it’s sub Folders recursely.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields<span class="colon">:</span></dt>
<dd class="field-odd"><p>(path/filename,file)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.append" title="Link to this definition">¶</a></dt>
<dd><p>Append an item to the folder object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.apply_all">
<span class="sig-name descname"><span class="pre">apply_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.apply_all" title="Link to this definition">¶</a></dt>
<dd><p>Apply function to all images in the stack.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>string or callable</em>) – if string it must be a function reachable by ImageArray</p></li>
<li><p><strong>quiet</strong> (<em>bool</em>) – if False print ‘.’ for every iteration</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Further args, kargs are passed through to the function</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.as_stack">
<span class="sig-name descname"><span class="pre">as_stack</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.as_stack" title="Link to this definition">¶</a></dt>
<dd><p>Return a ImageStack of the images in the current group.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.asfloat">
<span class="sig-name descname"><span class="pre">asfloat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">normalise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip_negative</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.asfloat" title="Link to this definition">¶</a></dt>
<dd><p>Convert stack to floating point type.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>normalise</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – normalise the image to the max value of current int type</p></li>
<li><p><strong>clip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – clip resulting range to values between -1 and 1</p></li>
<li><p><strong>clip_negative</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – clip range further to 0,1</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Analogous behaviour to ImageFile.asfloat()</p>
<p>If currently an int type and normalise then floats will be normalised
to the maximum allowed value of the int type.
If currently a float type then no change occurs.
If clip_negative then clip values outside the range 0,1</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.average">
<span class="sig-name descname"><span class="pre">average</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_box</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'first'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.average" title="Link to this definition">¶</a></dt>
<dd><p>Get an array of average pixel values for the stack.</p>
<p>Pass through to numpy average</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_box</strong> (<em>crop box</em>) – Specifies the region of the array to be averaged. Default - entire image</p></li>
<li><p><strong>_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Specifies how to generate metadata for the averaged image.
- “first”: Just ise the first image’s metadata
- “common”: Find the common metadata across all images
- “none’: no metadata from images.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>average(ImageArray)</em> –     average values</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.clear" title="Link to this definition">¶</a></dt>
<dd><p>Clear the subgroups.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.compress">
<span class="sig-name descname"><span class="pre">compress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_terminal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.compress" title="Link to this definition">¶</a></dt>
<dd><p>Compresses all empty groups from the root up until the first non-empty group is located.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A copy of the now flattened DatFolder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.convert">
<span class="sig-name descname"><span class="pre">convert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uniform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.convert" title="Link to this definition">¶</a></dt>
<dd><p>Convert an image to the requested data-type.</p>
<p>Warnings are issued in case of precision loss, or when negative values
are clipped during conversion to unsigned integer types (sign loss).</p>
<p>Floating point values are expected to be normalized and will be clipped
to the range [0.0, 1.0] or [-1.0, 1.0] when converting to unsigned or
signed integers respectively.</p>
<p>Numbers are not shifted to the negative side when converting from
unsigned to signed integer types. Negative values will be clipped when
converting to unsigned integers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<em>ndarray</em>) – Input image.</p></li>
<li><p><strong>dtype</strong> (<em>dtype</em>) – Target data-type.</p></li>
<li><p><strong>force_copy</strong> (<em>bool</em>) – Force a copy of the data, irrespective of its current dtype.</p></li>
<li><p><strong>uniform</strong> (<em>bool</em>) – Uniformly quantize the floating point range to the integer range.
By default (uniform=False) floating point values are scaled and
rounded to the nearest integers, which minimizes back and forth
conversion errors.</p></li>
<li><p><strong>normalise</strong> (<em>bool</em>) – When converting from int types to float normalise the resulting array
by the maximum allowed value of the int type.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">References</p>
<ol class="arabic simple">
<li><p>DirectX data conversion rules.
<a class="reference external" href="http://msdn.microsoft.com/en-us/library/windows/desktop/dd607323%28v=vs.85%29.aspx">http://msdn.microsoft.com/en-us/library/windows/desktop/dd607323%28v=vs.85%29.aspx</a></p></li>
</ol>
<dl class="simple">
<dt>2,  Data Conversions.</dt><dd><p>In “OpenGL ES 2.0 Specification v2.0.25”, pp 7-8. Khronos Group, 2010.</p>
</dd>
<dt>3,  Proper treatment of pixels as integers. A.W. Path.</dt><dd><p>In “Graphics Gems I”, pp 249-256. Morgan Kaufmann, 1990.</p>
</dd>
<dt>4,  Dirty Pixels. J. Blinn.</dt><dd><p>In “Jim Blinn’s corner: Dirty Pixels”, pp 47-57. Morgan Kaufmann, 1998.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.correct_drifts">
<span class="sig-name descname"><span class="pre">correct_drifts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refindex</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.005</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upsample_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.correct_drifts" title="Link to this definition">¶</a></dt>
<dd><p>Align images to correct for image drift.</p>
<p>Pass through to ImageArray.corret_drift.</p>
<dl class="simple">
<dt>Arg:</dt><dd><dl class="simple">
<dt>refindex: int or str</dt><dd><p>index or name of the reference image to use for zero drift</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – see ImageArray.correct_drift</p></li>
<li><p><strong>upsample_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – see ImageArray.correct_drift</p></li>
<li><p><strong>box</strong> – see ImageArray.correct_drift</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.count">
<span class="sig-name descname"><span class="pre">count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.count" title="Link to this definition">¶</a></dt>
<dd><p>Provide a count method like a sequence.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> (str, regexp, or <code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Core.metadataObject</span></code>) – The thing to count matches for.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>(int)</em> – The number of matching metadataObject instances.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If <em>name</em> is a string, then matching is based on either exact matches of the name, or if it includes a
* or ? then the basis of a globbing match. <em>name</em> may also be a regular expressiuon, in which case
matches are made on the basis of  the match with the name of the metadataObject. Finally, if <em>name</em>
is a metadataObject, then  it matches for an equyality test.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.crop_stack">
<span class="sig-name descname"><span class="pre">crop_stack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.crop_stack" title="Link to this definition">¶</a></dt>
<dd><p>Crop the imagestack to a box.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>box</strong> (<em>array or list of type int</em>) – [xmin,xmax,ymin,ymax]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>(ImageStack)</em> –     cropped images</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.dtype_limits">
<span class="sig-name descname"><span class="pre">dtype_limits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">clip_negative</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.dtype_limits" title="Link to this definition">¶</a></dt>
<dd><p>Return intensity limits, i.e. (min, max) tuple, of imarray dtype.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>clip_negative</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If True, clip the negative range (i.e. return 0 for min intensity)
even if the image dtype allows negative values.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>(imin,imax) (tuple)</em> –     Lower and upper intensity limits.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.extend">
<span class="sig-name descname"><span class="pre">extend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.extend" title="Link to this definition">¶</a></dt>
<dd><p>S.extend(iterable) – extend sequence by appending elements from the iterable</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.fetch">
<span class="sig-name descname"><span class="pre">fetch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.fetch" title="Link to this definition">¶</a></dt>
<dd><p>Preload the contents of the DiskBasedFolderMixin.</p>
<p>With multiprocess enabled this will parallel load the contents of the folder into memory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.file">
<span class="sig-name descname"><span class="pre">file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pathsplit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.file" title="Link to this definition">¶</a></dt>
<dd><p>recursely add groups in order to put the named value into a virtual tree of <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseFolder</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – A name (which may be a nested path) of the object to file.</p></li>
<li><p><strong>value</strong> (<em>metadataObject</em>) – The object to be filed - it should be an instance of <code class="xref py py-attr docutils literal notranslate"><span class="pre">BaseFolder.type</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Keyword Aprameters:</dt><dd><dl class="simple">
<dt>create(bool):</dt><dd><p>Whether to create missing groups or to raise an error (default True to create groups).</p>
</dd>
<dt>pathsplit(str or None):</dt><dd><p>Character to use to split the name into path components. Defaults to using os.path.split()</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>(BaseFolder)</em> –     A reference to the group where the value was eventually filed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.filter">
<span class="sig-name descname"><span class="pre">filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invert</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recurse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prune</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.filter" title="Link to this definition">¶</a></dt>
<dd><p>Filter the current set of files by some criterion.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filter</strong> (<em>string or callable</em>) – Either a string flename pattern or a callable function which takes a single parameter x which is an
instance of a metadataObject and evaluates True or False</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>invert</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Invert the sense of the filter (done by doing an XOR with the filter condition</p></li>
<li><p><strong>copy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If set True then the <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFolder</span></code> is copied before being filtered. Default is False -
work in place.</p></li>
<li><p><strong>recurse</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If True, apply the filter recursely to all groups. Default False</p></li>
<li><p><strong>prune</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If True, execute a <code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseFolder.prune()</span></code> to remove empty groups after filering</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The current objectFolder object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.filterout">
<span class="sig-name descname"><span class="pre">filterout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recurse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prune</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.filterout" title="Link to this definition">¶</a></dt>
<dd><p>Synonym for self.filter(filter,invert=True).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filter</strong> (<em>string or callable</em>) – Either a string flename pattern or a callable function which takes a single parameter x which is an
instance of a metadataObject and evaluates True or False</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>copy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If set True then the <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFolder</span></code> is copied before being filtered. Default is False -
work in place.</p></li>
<li><p><strong>recurse</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If True, apply the filter recursely to all groups. Default False</p></li>
<li><p><strong>prune</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If True, execute a <code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseFolder.prune()</span></code> to remove empty groups after filering</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The current objectFolder object with the files in the file list filtered.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.flatten">
<span class="sig-name descname"><span class="pre">flatten</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.flatten" title="Link to this definition">¶</a></dt>
<dd><p>Compresses all the groups and sub-groups iunto a single flat file list.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>)</strong> (<em>depth</em>)</p></li>
<li><p><strong>level.</strong> (<em>Only flatten ub-=groups that are within</em><em> (</em><em>depth</em><em> of </em><em>the deepest</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A copy of the now flattened DatFolder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.from_tiff">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_tiff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.from_tiff" title="Link to this definition">¶</a></dt>
<dd><p>Create a new ImageArray from a tiff file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.get" title="Link to this definition">¶</a></dt>
<dd><p>Return either a sub-group or named object from this folder.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.getlist">
<span class="sig-name descname"><span class="pre">getlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.getlist" title="Link to this definition">¶</a></dt>
<dd><p>Scan the current directory, optionally recursively to build a list of filenames.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>recursive</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Do a walk through all the directories for files</p></li>
<li><p><strong>directory</strong> (<em>string</em><em> or </em><em>False</em>) – Either a string path to a new directory or False to open a dialog box or not set in which case existing
directory is used.</p></li>
<li><p><strong>flatten</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – After scanning the directory tree, flaten all the subgroupos to make a flat file list. (this is the
previous behaviour of <code class="xref py py-meth docutils literal notranslate"><span class="pre">objectFolder.getlist()</span></code>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A copy of the current DataFoder directory with the files stored in the files attribute</p>
</dd>
</dl>
<p>getlist() scans a directory tree finding files that match the pattern. By default it will recurse through
the entire directory tree finding sub directories and creating groups in the data folder for each sub
directory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.group">
<span class="sig-name descname"><span class="pre">group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.group" title="Link to this definition">¶</a></dt>
<dd><p>Sort Files into a series of objectFolders according to the value of the key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>string or callable or list</em>) – Either a simple string or callable function or a list. If a string then it is interpreted as an item
of metadata in each file. If a callable function then takes a single argument x which should be an
instance of a metadataObject and returns some vale. If key is a list then the grouping is
done recursely for each element in key.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A copy of the current objectFolder object in which the groups attribute is a dictionary of objectFolder
objects with sub lists of files</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If ne of the grouping metadata keys does not exist in one file then no exception is raised - rather the
fiiles will be returned into the grou with key None. Metadata keys that are generated from the filename
are supported.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.index">
<span class="sig-name descname"><span class="pre">index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.index" title="Link to this definition">¶</a></dt>
<dd><p>Provide an index method like a sequence.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> (str, regexp, or <code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Core.metadataObject</span></code>) – The thing to search for.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>start</strong><strong>,</strong><strong>end</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – Limit the index search to a sub-range as per Python 3.5+ list.index</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>(int)</em> –     The index of the first matching metadataObject instances.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If <em>name</em> is a string, then matching is based on either exact matches of the name, or if it includes a
* or ? then the basis of a globbing match. <em>name</em> may also be a regular expressiuon, in which case
matches are made on the basis of  the match with the name of the metadataObject. Finally, if <em>name</em>
is a metadataObject, then it matches for an equyality test.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.insert">
<span class="sig-name descname"><span class="pre">insert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.insert" title="Link to this definition">¶</a></dt>
<dd><p>Implement the insert method with the option to append as well.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.items" title="Link to this definition">¶</a></dt>
<dd><p>Return the key,value pairs for the subbroups of this folder.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.keep_latest">
<span class="sig-name descname"><span class="pre">keep_latest</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.keep_latest" title="Link to this definition">¶</a></dt>
<dd><p>Filter out earlier revisions of files with the same name.</p>
<p>The CM group LabVIEW software will avoid overwriting files when measuring by inserting !#### where #### is an
integer revision number just before the filename extension. This method will look for instances of several
files which differ in name only by the presence of the revision number and will kepp only the highest revision
number. This is useful if several measurements of the same experiment have been carried out, but only the
last file is the correct one.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A copy of the DataFolder.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.keys" title="Link to this definition">¶</a></dt>
<dd><p>Return the keys used to access the sub-=groups of this folder.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.loadgroup">
<span class="sig-name descname"><span class="pre">loadgroup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.loadgroup" title="Link to this definition">¶</a></dt>
<dd><p>Load all files from this group into memory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.make_name">
<span class="sig-name descname"><span class="pre">make_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.make_name" title="Link to this definition">¶</a></dt>
<dd><p>Construct a name from the value object if possible.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.mask_select">
<span class="sig-name descname"><span class="pre">mask_select</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.mask_select" title="Link to this definition">¶</a></dt>
<dd><p>Run the ImageFile.mask.select() on each image.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.mean">
<span class="sig-name descname"><span class="pre">mean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_box</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'first'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.mean" title="Link to this definition">¶</a></dt>
<dd><p>Calculate the mean value of all the images in the stack.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_box</strong> (<em>crop box</em>) – Specifies the region of the array to be averaged. Default - entire image</p></li>
<li><p><strong>_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Specifies how to generate metadata for the averaged image.
- “first”: Just ise the first image’s metadata
- “common”: Find the common metadata across all images
- “none’: no metadata from images.</p></li>
</ul>
</dd>
</dl>
<p>Actually a synonym for self.average with not weights</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.montage">
<span class="sig-name descname"><span class="pre">montage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.montage" title="Link to this definition">¶</a></dt>
<dd><p>Call the plot method for each metadataObject, but switching to a subplot each time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – Positional arguments to pass through to the <a class="reference internal" href="Stoner.plot.PlotMixin.html#Stoner.plot.PlotMixin.plot" title="Stoner.plot.PlotMixin.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Stoner.plot.PlotMixin.plot()</span></code></a> call.</p></li>
<li><p><strong>kargs</strong> – Keyword arguments to pass through to the <a class="reference internal" href="Stoner.plot.PlotMixin.html#Stoner.plot.PlotMixin.plot" title="Stoner.plot.PlotMixin.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Stoner.plot.PlotMixin.plot()</span></code></a> call.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>plot_extra</strong> (<em>callable</em><em>(</em><em>i</em><em>,</em><em>j</em><em>,</em><em>d</em><em>)</em>) – A callable that can carry out additional processing per plot after the plot is done</p></li>
<li><p><strong>figsize</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em>(</em><em>x</em><em>,</em><em>y</em><em>)</em>) – Size of the figure to create</p></li>
<li><p><strong>dpi</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – dots per inch on the figure</p></li>
<li><p><strong>edgecolor</strong><strong>,</strong><strong>facecolor</strong> (<em>matplotlib colour</em>) – figure edge and frame colours.</p></li>
<li><p><strong>frameon</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Turns figure frames on or off</p></li>
<li><p><strong>FigureClass</strong> (<em>class</em>) – Passed to matplotlib figure call.</p></li>
<li><p><strong>plots_per_page</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – maximum number of plots per figure.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of <code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.pyplot.Axes</span></code> instances.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If the underlying type of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Core.metadataObject</span></code> instances in the
<code class="xref py py-class docutils literal notranslate"><span class="pre">PlotFolder</span></code> lacks a <strong>plot</strong> method, then the instances are converted to
<code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Core.Data</span></code>.</p>
<p>Each plot is generated as sub-plot on a page. The number of rows and columns of subplots is computed
from the aspect ratio of the figure and the number of files in the <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotFolder</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.on_load_process">
<span class="sig-name descname"><span class="pre">on_load_process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tmp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.on_load_process" title="Link to this definition">¶</a></dt>
<dd><p>Carry out processing on a newly loaded file to set means and extra metadata.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.pop">
<span class="sig-name descname"><span class="pre">pop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.pop" title="Link to this definition">¶</a></dt>
<dd><p>Return and remove either a subgroup or named object from this folder.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.popitem">
<span class="sig-name descname"><span class="pre">popitem</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.popitem" title="Link to this definition">¶</a></dt>
<dd><p>Return the most recent subgroup from this folder.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.prune">
<span class="sig-name descname"><span class="pre">prune</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.prune" title="Link to this definition">¶</a></dt>
<dd><p>Remove any empty groups from the objectFolder (and subgroups).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A copy of thte pruned objectFolder.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.remove" title="Link to this definition">¶</a></dt>
<dd><p>S.remove(value) – remove first occurrence of value.
Raise ValueError if the value is not present.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.reverse">
<span class="sig-name descname"><span class="pre">reverse</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.reverse" title="Link to this definition">¶</a></dt>
<dd><p>S.reverse() – reverse <em>IN PLACE</em></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.save" title="Link to this definition">¶</a></dt>
<dd><p>Save the entire data folder out to disc using the groups as a directory tree.</p>
<p>Calls the save method for each file in turn.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>root</strong> (<em>string</em>) – The root directory to start creating files and subdirectories under. If set to None or not specified,
the current folder’s directory attribute will be used.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of the saved files</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.select">
<span class="sig-name descname"><span class="pre">select</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.select" title="Link to this definition">¶</a></dt>
<dd><p>Select a subset of the objects in the folder based on flexible search criteria on the metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> (<em>various</em>) – A single positional argument if present is interpreted as follows:</p>
<ul class="simple">
<li><p>If a callable function is given, the entire metadataObject is presented to it.
If it evaluates True then that metadataObject is selected. This allows arbitrary select operations</p></li>
<li><p>If a dict is given, then it and the kargs dictionary are merged and used to select the
metadataObjects</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>recurse</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Also recursively slect through the sub groups</p></li>
<li><p><strong>kargs</strong> (<em>varuous</em>) – <p>Arbitrary keyword arguments are interpreted as requestion matches against the corresponding
metadata values. The keyword argument may have an additional <strong>__operator</strong> appended to it which is
interpreted as follows:</p>
<ul>
<li><p><em>eq</em> metadata value equals argument value (this is the default test for scalar argument)</p></li>
<li><p><em>ne</em> metadata value doe not equal argument value</p></li>
<li><p><em>gt</em> metadata value doe greater than argument value</p></li>
<li><p><em>lt</em> metadata value doe less than argument value</p></li>
<li><p><em>ge</em> metadata value doe greater than or equal to argument value</p></li>
<li><p><em>le</em> metadata value doe less than or equal to argument value</p></li>
<li><p><em>contains</em> metadata value contains argument value</p></li>
<li><dl class="simple">
<dt><em>in</em> metadata value is in the argument value (this is the default test for non-tuple iterable</dt><dd><p>arguments)</p>
</dd>
</dl>
</li>
<li><p><em>startswith</em> metadata value startswith argument value</p></li>
<li><p><em>endswith</em> metadata value endwith argument value</p></li>
<li><p><em>icontains</em>,*iin*, <em>istartswith</em>,*iendswith* as above but case insensitive</p></li>
<li><p><em>between</em> metadata value lies between the minimum and maximum values of the argument
(the default test for 2-length tuple arguments)</p></li>
<li><p><em>ibetween</em>,*ilbetween*,*iubetween* as above but include both,lower or upper values</p></li>
</ul>
</p></li>
<li><p><strong>rich.</strong> (<em>The syntax is inspired by the Django project for selecting</em><em>, </em><em>but is not quite as</em>)</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>(baseFGolder)</em> –     A new BaseFolder instance that contains just the matching metadataObjects.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If any of the tests is True, then the metadataObject will be selected, so the effect is a logical OR. To
achieve a logical AND, you can chain two selects together:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">d</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">temp__le</span><span class="o">=</span><span class="mf">4.2</span><span class="p">,</span><span class="n">vti_temp__lt</span><span class="o">=</span><span class="mf">4.2</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">field_gt</span><span class="o">=</span><span class="mf">3.0</span><span class="p">)</span>
</pre></div>
</div>
<p>will select metadata objects that have either temp or vti_temp metadata values below 4.2 AND field
metadata values greater than 3.</p>
<p>There are a few cases where special treatment is needed:</p>
<ul class="simple">
<li><p>If you need to select on a aparameter called <em>recurse</em>, pass a dictionary of {“recurse”:value} as
the sole positional argument.</p></li>
<li><p>If you need to select on a metadata value that ends in an operator word, then append <em>__eq</em> in the
keyword name to force the equality test.</p></li>
<li><p>If the metadata keys to select on are not valid python  identifiers, then pass them via the first
positional dictionary value.</p></li>
</ul>
<p>If the metadata item being checked exists in a regular expression file pattern for the folder, then
the files are not loaded and the metadata is evaluated based on the filename. This can speed up operations
where a file load is not required.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.setdefault">
<span class="sig-name descname"><span class="pre">setdefault</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.setdefault" title="Link to this definition">¶</a></dt>
<dd><p>Return or set a subgroup or named object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.show">
<span class="sig-name descname"><span class="pre">show</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.show" title="Link to this definition">¶</a></dt>
<dd><p>Pass through to <code class="xref py py-meth docutils literal notranslate"><span class="pre">Stoner.Image.ImageFolder.view()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.slice_metadata">
<span class="sig-name descname"><span class="pre">slice_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'smart'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.slice_metadata" title="Link to this definition">¶</a></dt>
<dd><p>Return an array of the metadata values for each item/file in the top level group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str, regexp or list of str</em>) – the meta data key(s) to return</p>
</dd>
</dl>
<dl class="simple">
<dt>Keyword Parameters:</dt><dd><dl class="simple">
<dt>output (str):</dt><dd><p>Output format - values are
-   dict: return an array of dictionaries
-   list: return a list of lists
-   array: return a numpy array
-   Data: return a <a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a> object
-   smart: (default) return either a list if only one key or a list of dictionaries</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>(array of metadata)</em> –     If single key is given and is an exact match then returns an array of the matching values.
If the key results in a regular expression match, then returns an array of dictionaries of all
matching keys. If key is a list ir other iterable, then return a 2D array where each column
corresponds to one of the keys.</p>
</dd>
</dl>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>Add options to recurse through all groups? Put back RCT’s values only functionality?</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.sort">
<span class="sig-name descname"><span class="pre">sort</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recurse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.sort" title="Link to this definition">¶</a></dt>
<dd><p>Sort the files by some key.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>string</em><em>, </em><em>callable</em><em> or </em><em>None</em>) – Either a string or a callable function. If a string then this is interpreted as a
metadata key, if callable then it is assumed that this is a a function of one parameter x
that is a <code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Core.metadataObject</span></code> object and that returns a key value.
If key is not specified (default), then a sort is performed on the filename</p></li>
<li><p><strong>reverse</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Optionally sort in reverse order</p></li>
<li><p><strong>recurse</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If True (default) sort the sub-groups as well.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A copy of the current objectFolder object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.stddev">
<span class="sig-name descname"><span class="pre">stddev</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_box</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'first'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.stddev" title="Link to this definition">¶</a></dt>
<dd><p>Calculate weighted standard deviation for stack.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_box</strong> (<em>crop box</em>) – Specifies the region of the array to be averaged. Default - entire image</p></li>
<li><p><strong>_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Specifies how to generate metadata for the averaged image.
- “first”: Just ise the first image’s metadata
- “common”: Find the common metadata across all images
- “none’: no metadata from images.</p></li>
</ul>
</dd>
</dl>
<p>This is a biased standard deviation, may not be appropriate for small sample sizes</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.stderr">
<span class="sig-name descname"><span class="pre">stderr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_box</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'first'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.stderr" title="Link to this definition">¶</a></dt>
<dd><p>Calculate standard error in the stack average.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_box</strong> (<em>crop box</em>) – Specifies the region of the array to be averaged. Default - entire image</p></li>
<li><p><strong>_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Specifies how to generate metadata for the averaged image.
- “first”: Just ise the first image’s metadata
- “common”: Find the common metadata across all images
- “none’: no metadata from images.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.subtract">
<span class="sig-name descname"><span class="pre">subtract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">background</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.subtract" title="Link to this definition">¶</a></dt>
<dd><p>Subtract a background image (or index) from all images in the stack.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>background</strong> (<em>int, str or 2D array</em>) – Background image to index</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>(ImageStack)</em> –     The modified image stack.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Method changed for v0.10 to not normalise or clip the data.
The background image is scaled by the ratio of the mean pixel values of the unmasked
region in the background image.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.to_tiff">
<span class="sig-name descname"><span class="pre">to_tiff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.to_tiff" title="Link to this definition">¶</a></dt>
<dd><p>Save the ImageArray as a tiff image with metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Filename to save file as.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>PIL can save in modes “L” (8bit unsigned int), “I” (32bit signed int),
or “F” (32bit signed float). In general max info is preserved for “F”
type so if forcetype is not specified then this is the default. For
boolean type data mode “L” will suffice and this is chosen in all cases.
The type name is added as a string to the metadata before saving.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.unflatten">
<span class="sig-name descname"><span class="pre">unflatten</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.unflatten" title="Link to this definition">¶</a></dt>
<dd><p>Take the file list an unflattens them according to the file paths.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A copy of the objectFolder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.unload">
<span class="sig-name descname"><span class="pre">unload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.unload" title="Link to this definition">¶</a></dt>
<dd><p>Remove the instance from memory without losing the name in the Folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<em>string,int or None</em>) – Specifies the entry to unload from memory. If set to None all loaded entries are unloaded.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>(DataFolder)</em> – returns a copy of itself.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.update" title="Link to this definition">¶</a></dt>
<dd><p>Update this folder with a dictionary or another folder.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.values">
<span class="sig-name descname"><span class="pre">values</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.values" title="Link to this definition">¶</a></dt>
<dd><p>Return the sub-groups of this folder.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.walk_groups">
<span class="sig-name descname"><span class="pre">walk_groups</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">walker</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.walk_groups" title="Link to this definition">¶</a></dt>
<dd><p>Walk through a hierarchy of groups and calls walker for each file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>walker</strong> (<em>callable</em>) – A callable object that takes either a metadataObject instance or a objectFolder instance.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>group</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – (default False) determines whether the walker function will expect to be given the objectFolder
representing the lowest level group or individual metadataObject objects from the lowest level group</p></li>
<li><p><strong>replace_terminal</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If group is True and the walker function returns an instance of metadataObject then the return value
is appended to the files and the group is removed from the current objectFolder. This will unwind
the group hierarchy by one level.</p></li>
<li><p><strong>obly_terminal</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Only execute the walker function on groups that have no sub-groups inside them (i.e. are terminal
groups)</p></li>
<li><p><strong>walker_args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>) – A dictionary of static arguments for the walker function.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The walker function should have a prototype of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">walker</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">list_of_group_names</span><span class="p">,</span><span class="o">**</span><span class="n">walker_args</span><span class="p">)</span>
</pre></div>
</div>
<p>where f is either a objectFolder or metadataObject.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Image.stack.ImageStack.zip_groups">
<span class="sig-name descname"><span class="pre">zip_groups</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">groups</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Image.stack.ImageStack.zip_groups" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of tuples of metadataObjects drawn from the specified groups.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>groups</strong> (<em>list of strings</em>) – A list of keys of groups in the Lpy:class:<cite>objectFolder</cite></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>A list of tuples of groups of files</em> –     [(grp_1_file_1,grp_2_file_1….grp_n_files_1),(grp_1_file_2,
grp_2_file_2….grp_n_file_2)….(grp_1_file_m,grp_2_file_m…grp_n_file_m)]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/StonerLogo2.png" alt="Logo of Stoner Package"/>
            </a></p>
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">ImageStack</a><ul>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack"><code class="docutils literal notranslate"><span class="pre">ImageStack</span></code></a><ul>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.basenames"><code class="docutils literal notranslate"><span class="pre">ImageStack.basenames</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.clone"><code class="docutils literal notranslate"><span class="pre">ImageStack.clone</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.debug"><code class="docutils literal notranslate"><span class="pre">ImageStack.debug</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.defaults"><code class="docutils literal notranslate"><span class="pre">ImageStack.defaults</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.depth"><code class="docutils literal notranslate"><span class="pre">ImageStack.depth</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.directory"><code class="docutils literal notranslate"><span class="pre">ImageStack.directory</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.each"><code class="docutils literal notranslate"><span class="pre">ImageStack.each</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.files"><code class="docutils literal notranslate"><span class="pre">ImageStack.files</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.groups"><code class="docutils literal notranslate"><span class="pre">ImageStack.groups</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.images"><code class="docutils literal notranslate"><span class="pre">ImageStack.images</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.imarray"><code class="docutils literal notranslate"><span class="pre">ImageStack.imarray</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.instance"><code class="docutils literal notranslate"><span class="pre">ImageStack.instance</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.is_empty"><code class="docutils literal notranslate"><span class="pre">ImageStack.is_empty</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.key"><code class="docutils literal notranslate"><span class="pre">ImageStack.key</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.layout"><code class="docutils literal notranslate"><span class="pre">ImageStack.layout</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.loaded"><code class="docutils literal notranslate"><span class="pre">ImageStack.loaded</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.loader"><code class="docutils literal notranslate"><span class="pre">ImageStack.loader</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.ls"><code class="docutils literal notranslate"><span class="pre">ImageStack.ls</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.lsgrp"><code class="docutils literal notranslate"><span class="pre">ImageStack.lsgrp</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.max_size"><code class="docutils literal notranslate"><span class="pre">ImageStack.max_size</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.metadata"><code class="docutils literal notranslate"><span class="pre">ImageStack.metadata</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.mindepth"><code class="docutils literal notranslate"><span class="pre">ImageStack.mindepth</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.not_empty"><code class="docutils literal notranslate"><span class="pre">ImageStack.not_empty</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.not_loaded"><code class="docutils literal notranslate"><span class="pre">ImageStack.not_loaded</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.objects"><code class="docutils literal notranslate"><span class="pre">ImageStack.objects</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.pattern"><code class="docutils literal notranslate"><span class="pre">ImageStack.pattern</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.root"><code class="docutils literal notranslate"><span class="pre">ImageStack.root</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.setas"><code class="docutils literal notranslate"><span class="pre">ImageStack.setas</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.shape"><code class="docutils literal notranslate"><span class="pre">ImageStack.shape</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.size"><code class="docutils literal notranslate"><span class="pre">ImageStack.size</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.trunkdepth"><code class="docutils literal notranslate"><span class="pre">ImageStack.trunkdepth</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.type"><code class="docutils literal notranslate"><span class="pre">ImageStack.type</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.add_group"><code class="docutils literal notranslate"><span class="pre">ImageStack.add_group()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.align"><code class="docutils literal notranslate"><span class="pre">ImageStack.align()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.all"><code class="docutils literal notranslate"><span class="pre">ImageStack.all()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.append"><code class="docutils literal notranslate"><span class="pre">ImageStack.append()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.apply_all"><code class="docutils literal notranslate"><span class="pre">ImageStack.apply_all()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.as_stack"><code class="docutils literal notranslate"><span class="pre">ImageStack.as_stack()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.asfloat"><code class="docutils literal notranslate"><span class="pre">ImageStack.asfloat()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.average"><code class="docutils literal notranslate"><span class="pre">ImageStack.average()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.clear"><code class="docutils literal notranslate"><span class="pre">ImageStack.clear()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.compress"><code class="docutils literal notranslate"><span class="pre">ImageStack.compress()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.convert"><code class="docutils literal notranslate"><span class="pre">ImageStack.convert()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.correct_drifts"><code class="docutils literal notranslate"><span class="pre">ImageStack.correct_drifts()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.count"><code class="docutils literal notranslate"><span class="pre">ImageStack.count()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.crop_stack"><code class="docutils literal notranslate"><span class="pre">ImageStack.crop_stack()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.dtype_limits"><code class="docutils literal notranslate"><span class="pre">ImageStack.dtype_limits()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.extend"><code class="docutils literal notranslate"><span class="pre">ImageStack.extend()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.fetch"><code class="docutils literal notranslate"><span class="pre">ImageStack.fetch()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.file"><code class="docutils literal notranslate"><span class="pre">ImageStack.file()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.filter"><code class="docutils literal notranslate"><span class="pre">ImageStack.filter()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.filterout"><code class="docutils literal notranslate"><span class="pre">ImageStack.filterout()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.flatten"><code class="docutils literal notranslate"><span class="pre">ImageStack.flatten()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.from_tiff"><code class="docutils literal notranslate"><span class="pre">ImageStack.from_tiff()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.get"><code class="docutils literal notranslate"><span class="pre">ImageStack.get()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.getlist"><code class="docutils literal notranslate"><span class="pre">ImageStack.getlist()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.group"><code class="docutils literal notranslate"><span class="pre">ImageStack.group()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.index"><code class="docutils literal notranslate"><span class="pre">ImageStack.index()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.insert"><code class="docutils literal notranslate"><span class="pre">ImageStack.insert()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.items"><code class="docutils literal notranslate"><span class="pre">ImageStack.items()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.keep_latest"><code class="docutils literal notranslate"><span class="pre">ImageStack.keep_latest()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.keys"><code class="docutils literal notranslate"><span class="pre">ImageStack.keys()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.loadgroup"><code class="docutils literal notranslate"><span class="pre">ImageStack.loadgroup()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.make_name"><code class="docutils literal notranslate"><span class="pre">ImageStack.make_name()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.mask_select"><code class="docutils literal notranslate"><span class="pre">ImageStack.mask_select()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.mean"><code class="docutils literal notranslate"><span class="pre">ImageStack.mean()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.montage"><code class="docutils literal notranslate"><span class="pre">ImageStack.montage()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.on_load_process"><code class="docutils literal notranslate"><span class="pre">ImageStack.on_load_process()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.pop"><code class="docutils literal notranslate"><span class="pre">ImageStack.pop()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.popitem"><code class="docutils literal notranslate"><span class="pre">ImageStack.popitem()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.prune"><code class="docutils literal notranslate"><span class="pre">ImageStack.prune()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.remove"><code class="docutils literal notranslate"><span class="pre">ImageStack.remove()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.reverse"><code class="docutils literal notranslate"><span class="pre">ImageStack.reverse()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.save"><code class="docutils literal notranslate"><span class="pre">ImageStack.save()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.select"><code class="docutils literal notranslate"><span class="pre">ImageStack.select()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.setdefault"><code class="docutils literal notranslate"><span class="pre">ImageStack.setdefault()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.show"><code class="docutils literal notranslate"><span class="pre">ImageStack.show()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.slice_metadata"><code class="docutils literal notranslate"><span class="pre">ImageStack.slice_metadata()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.sort"><code class="docutils literal notranslate"><span class="pre">ImageStack.sort()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.stddev"><code class="docutils literal notranslate"><span class="pre">ImageStack.stddev()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.stderr"><code class="docutils literal notranslate"><span class="pre">ImageStack.stderr()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.subtract"><code class="docutils literal notranslate"><span class="pre">ImageStack.subtract()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.to_tiff"><code class="docutils literal notranslate"><span class="pre">ImageStack.to_tiff()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.unflatten"><code class="docutils literal notranslate"><span class="pre">ImageStack.unflatten()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.unload"><code class="docutils literal notranslate"><span class="pre">ImageStack.unload()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.update"><code class="docutils literal notranslate"><span class="pre">ImageStack.update()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.values"><code class="docutils literal notranslate"><span class="pre">ImageStack.values()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.walk_groups"><code class="docutils literal notranslate"><span class="pre">ImageStack.walk_groups()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Image.stack.ImageStack.zip_groups"><code class="docutils literal notranslate"><span class="pre">ImageStack.zip_groups()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="Stoner.Image.stack.ImageStackMixin.html"
                          title="previous chapter">ImageStackMixin</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="Stoner.Image.attrs.DrawProxy.html"
                          title="next chapter">DrawProxy</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/classes/Stoner.Image.stack.ImageStack.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<form class="search" action="../search.html" method="get">
  <input type="text" name="q"
   placeholder="type to search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="related bottom">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="Stoner.Image.stack.ImageStackMixin.html" title="Previous document">ImageStackMixin</a>
        </li>
        <li>
          <a href="Stoner.Image.attrs.DrawProxy.html" title="Next document">DrawProxy</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Stoner Package</a></li>
      <li>
        <a href="../Stoner.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Stoner</span></code> Package</a>
      </li> 
    </ul>
  </nav>
  </div>
  <footer id="pagefooter">&copy; 2013-15, Gavin Burnell et al.Last updated on Apr 16, 2025.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a>
      8.2.3
        with the <a href="http://github.com/irskep/sphinx-better-theme">
          better</a> theme.

  </footer>

  
  </body>
</html>