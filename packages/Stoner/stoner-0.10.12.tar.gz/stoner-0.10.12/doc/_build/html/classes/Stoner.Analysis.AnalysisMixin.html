<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>AnalysisMixin &#8212; Stoner Pacakge API Documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/better.css?v=58ad701a" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=0b74bb8b" />
    <script src="../_static/documentation_options.js?v=29a6c3e3"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ODR_Model" href="Stoner.analysis.fitting.ODR_Model.html" />
    <link rel="prev" title="Tab_Delimited" href="Stoner.core.utils.Tab_Delimited.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  </head><body>
    <header id="pageheader"><h1><a href="../index.html ">
        Stoner Pacakge API Documentation
    </a></h1></header>
  <div class="related top">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="Stoner.core.utils.Tab_Delimited.html" title="Previous document">Tab_Delimited</a>
        </li>
        <li>
          <a href="Stoner.analysis.fitting.ODR_Model.html" title="Next document">ODR_Model</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Stoner Package</a></li>
      <li>
        <a href="../Stoner.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Stoner</span></code> Package</a>
      </li> 
    </ul>
  </nav>
  </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="analysismixin">
<h1>AnalysisMixin<a class="headerlink" href="#analysismixin" title="Link to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="Stoner.Analysis.AnalysisMixin">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Stoner.Analysis.</span></span><span class="sig-name descname"><span class="pre">AnalysisMixin</span></span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A mixin calss designed to work with <code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Core.DataFile</span></code> to provide additional analysis methods.</p>
<p class="rubric">Methods Summary</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.apply" title="Stoner.Analysis.AnalysisMixin.apply"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply</span></code></a>(func[, col, replace, header])</p></td>
<td><p>Apply the given function to each row in the data set and adds to the data set.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.clip" title="Stoner.Analysis.AnalysisMixin.clip"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clip</span></code></a>(clipper[, column])</p></td>
<td><p>Clips the data based on the column and the clipper value.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.decompose" title="Stoner.Analysis.AnalysisMixin.decompose"><code class="xref py py-obj docutils literal notranslate"><span class="pre">decompose</span></code></a>([xcol, ycol, sym, asym, replace])</p></td>
<td><p>Given (x,y) data, decomposes the y part into symmetric and antisymmetric contributions in x.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.integrate" title="Stoner.Analysis.AnalysisMixin.integrate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">integrate</span></code></a>([xcol, ycol, result, header, ...])</p></td>
<td><p>Integrate a column of data, optionally returning the cumulative integral.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.normalise" title="Stoner.Analysis.AnalysisMixin.normalise"><code class="xref py py-obj docutils literal notranslate"><span class="pre">normalise</span></code></a>([target, base, replace, header, ...])</p></td>
<td><p>Normalise data columns by dividing through by a base column value.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.stitch" title="Stoner.Analysis.AnalysisMixin.stitch"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stitch</span></code></a>(other[, xcol, ycol, overlap, ...])</p></td>
<td><p>Apply a scaling to this data set to make it stich to another dataset.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.threshold" title="Stoner.Analysis.AnalysisMixin.threshold"><code class="xref py py-obj docutils literal notranslate"><span class="pre">threshold</span></code></a>(threshold, **kargs)</p></td>
<td><p>Find partial indices where the data in column passes the threshold, rising or falling.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Documentation</p>
<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Analysis.AnalysisMixin.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.apply" title="Link to this definition">¶</a></dt>
<dd><p>Apply the given function to each row in the data set and adds to the data set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>callable</em>) – The function to apply to each row of the data.</p></li>
<li><p><strong>col</strong> (<em>index</em>) – The column in which to place the result of the function</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Either replace the existing column/complete data or create a new column or data file.</p></li>
<li><p><strong>header</strong> (<em>string</em><em> or </em><em>None</em>) – The new column header(s) (defaults to the name of the function func</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If any extra keyword arguments are supplied then these are passed to the function directly. If
you need to pass any arguments that overlap with the keyword arguments to <a href="#id1"><span class="problematic" id="id2">:py:math:`AnalysisMixin.apply`</span></a>
then these can be supplied in a dictionary argument <em>_extra</em>.</p>
<p>The callable <em>func</em> should have a signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="n">row</span><span class="p">,</span><span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
</pre></div>
</div>
<p>and should return either a single float, in which case it will be used to repalce the specified column,
or an array, in which case it is used to completely replace the row of data.</p>
<p>If the function returns a complete row of data, then the <em>replace</em> parameter will cause the return
value to be a new datafile, leaving the original unchanged. The <em>headers</em> parameter can give the complete
column headers for the new data file.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a>) –     The newly modified Data object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Analysis.AnalysisMixin.clip">
<span class="sig-name descname"><span class="pre">clip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">clipper</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.clip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.clip" title="Link to this definition">¶</a></dt>
<dd><p>Clips the data based on the column and the clipper value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>column</strong> (<em>index</em>) – Column to look for the maximum in</p></li>
<li><p><strong>clipper</strong> (<em>tuple or array</em>) – Either a tuple of (min,max) or a numpy.ndarray -
in which case the max and min values in that array will be
used as the clip limits</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a>) –     The newly modified Data object.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If column is not defined (or is None) the <code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFile.setas</span></code> column
assignments are used.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Analysis.AnalysisMixin.decompose">
<span class="sig-name descname"><span class="pre">decompose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xcol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ycol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sym</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asym</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwords</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.decompose"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.decompose" title="Link to this definition">¶</a></dt>
<dd><p>Given (x,y) data, decomposes the y part into symmetric and antisymmetric contributions in x.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xcol</strong> (<em>index</em>) – Index of column with x data - defaults to first x column in self.setas</p></li>
<li><p><strong>ycol</strong> (<em>index</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em> of </em><em>indices</em>) – indices of y column(s) data</p></li>
<li><p><strong>sym</strong> (<em>index</em>) – Index of column to place symmetric data in default, append to end of data</p></li>
<li><p><strong>asym</strong> (<em>index</em>) – Index of column for asymmetric part of ata. Defaults to appending to end of data</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Overwrite data with output (true)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>self</em> – The newly modified <a class="reference internal" href="#Stoner.Analysis.AnalysisMixin" title="Stoner.Analysis.AnalysisMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnalysisMixin</span></code></a>.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Decompose Into symmetric and antisymmetric parts example.&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="kn">import</span> <span class="n">linspace</span><span class="p">,</span> <span class="n">reshape</span><span class="p">,</span> <span class="n">array</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">Stoner</span><span class="w"> </span><span class="kn">import</span> <span class="n">Data</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">Stoner.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">format_val</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">201</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="mf">0.3</span> <span class="o">*</span> <span class="n">x</span><span class="o">**</span><span class="mi">3</span> <span class="o">-</span> <span class="mi">6</span> <span class="o">*</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">11</span> <span class="o">*</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">20</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">Data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">,</span> <span class="n">column_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">])</span>
<span class="n">d</span><span class="o">.</span><span class="n">decompose</span><span class="p">()</span>
<span class="n">d</span><span class="o">.</span><span class="n">setas</span> <span class="o">=</span> <span class="s2">&quot;xyyy&quot;</span>
<span class="n">coeffs</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">polynomial_order</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">str_coeffs</span> <span class="o">=</span> <span class="p">[</span><span class="n">format_val</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;eng&quot;</span><span class="p">,</span> <span class="n">places</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">coeffs</span><span class="o">.</span><span class="n">ravel</span><span class="p">()]</span>
<span class="n">str_coeffs</span> <span class="o">=</span> <span class="n">reshape</span><span class="p">(</span><span class="n">array</span><span class="p">(</span><span class="n">str_coeffs</span><span class="p">),</span> <span class="n">coeffs</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">d</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
    <span class="o">-</span><span class="mi">6</span><span class="p">,</span>
    <span class="o">-</span><span class="mi">800</span><span class="p">,</span>
    <span class="s2">&quot;Coefficients</span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">str_coeffs</span><span class="p">),</span>
    <span class="n">fontdict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="s2">&quot;x-small&quot;</span><span class="p">},</span>
<span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">ylabel</span> <span class="o">=</span> <span class="s2">&quot;Data&quot;</span>
<span class="n">d</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Decompose Example&quot;</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/decompose.png">png</a>, <a class="reference external" href="../samples/decompose.hires.png">hires.png</a>, <a class="reference external" href="../samples/decompose.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="../_images/decompose.png" src="../_images/decompose.png" />
</figure>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Analysis.AnalysisMixin.integrate">
<span class="sig-name descname"><span class="pre">integrate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xcol=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ycol=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result_name=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output='data'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds=&lt;function</span> <span class="pre">AnalysisMixin.&lt;lambda&gt;&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.integrate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.integrate" title="Link to this definition">¶</a></dt>
<dd><p>Integrate a column of data, optionally returning the cumulative integral.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xcol</strong> (<em>index</em>) – The X data column index (or header)</p></li>
<li><p><strong>ycol</strong> (<em>index</em>)</p></li>
<li><p><strong>The Y data column index</strong> (<em>or header</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>result</strong> (<em>index</em><em> or </em><em>None</em>) – Either a column index (or header) to overwrite with the cumulative data,
or True to add a new column or None to not store the cumulative result.</p></li>
<li><p><strong>result_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The metadata name for the final result</p></li>
<li><p><strong>header</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – The name of the header for the results column.</p></li>
<li><p><strong>output</strong> (<em>Str</em>) – What to return - ‘data’ (default) - this object, ‘result’: final result</p></li>
<li><p><strong>bounds</strong> (<em>callable</em>) – A function that evaluates for each row to determine if the data should be integrated over.</p></li>
<li><p><strong>**kargs</strong> – Other keyword arguments are fed direct to the scipy.integrate.cumtrapz method</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a>) –     The newly modified Data object.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a pass through to the scipy.integrate.cumtrapz routine which just uses trapezoidal integration.
A better alternative would be to offer a variety of methods including simpson’s rule and interpolation
of data. If xcol or ycol are not specified then the current values from the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Stoner.Core.DataFile.setas</span></code> attribute are used.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Analysis.AnalysisMixin.normalise">
<span class="sig-name descname"><span class="pre">normalise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.0,</span> <span class="pre">1.0)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.normalise"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.normalise" title="Link to this definition">¶</a></dt>
<dd><p>Normalise data columns by dividing through by a base column value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>target</strong> (<em>index</em>) – One or more target columns to normalise can be a string, integer or list of strings or integers.
If None then the default ‘y’ column is used.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>base</strong> (<em>index</em>) – The column to normalise to, can be an integer or string. <strong>Deprecated</strong> can also be a tuple (low,
high) being the output range</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Set True(default) to overwrite  the target data columns</p></li>
<li><p><strong>header</strong> (<em>string</em><em> or </em><em>None</em>) – The new column header - default is target name(norm)</p></li>
<li><p><strong>scale</strong> (<em>None</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em> of </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>,</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – Output range after normalising - low,high or None to map to -1,1</p></li>
<li><p><strong>limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>,</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – (low,high) - Take the input range from the <em>high</em> and <em>low</em> fraction of the input when sorted.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a>) –     The newly modified Data object.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The <em>limits</em> parameter is used to set the input scale being normalised from - if the data has a few
outliers then this setting can be used to clip the input range before normalising. The parameters in
the limit are the values at the <em>low</em> and <em>high</em> fractions of the cumulative distribution function of
the data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Analysis.AnalysisMixin.stitch">
<span class="sig-name descname"><span class="pre">stitch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xcol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ycol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'All'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.stitch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.stitch" title="Link to this definition">¶</a></dt>
<dd><p>Apply a scaling to this data set to make it stich to another dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> (<em>DataFile</em>) – Another data set that is used as the base to stitch this one on to</p></li>
<li><p><strong>xcol,ycol</strong> (<em>index or None</em>) – The x and y data columns. If left as None then the current setas attribute is used.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>overlap</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em> of </em><em>(</em><em>lower</em><em>,</em><em>higher</em><em>) or </em><em>None</em>) – The band of x values that are used in both data sets to match,
if left as None, thenthe common overlap of the x data is used.</p></li>
<li><p><strong>min_overlap</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – If you know that overlap must be bigger than a certain amount, the bounds between the two
data sets needs to be adjusted. In this case min_overlap shifts the boundary of the overlap
on this DataFile.</p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Unless <em>func</em> is specified, controls which parameters are actually variable, defaults to all of them.</p></li>
<li><p><strong>func</strong> (<em>callable</em>) – a stitching function that transforms <span class="math notranslate nohighlight">\((x,y)\rightarrow(x',y')\)</span>. Default is to use
functions defined by <em>mode</em></p></li>
<li><p><strong>p0</strong> (<em>iterable</em>) – if func is not None then p0 should be the starting values for the stitching function parameters</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a>) –     A copy of the current <a class="reference internal" href="#Stoner.Analysis.AnalysisMixin" title="Stoner.Analysis.AnalysisMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnalysisMixin</span></code></a> with the x and y data columns adjusted to stitch</p>
</dd>
</dl>
<p>To stitch the data together, the x and y data in the current data file is transforms so that
<span class="math notranslate nohighlight">\(x'=x+A\)</span> and <span class="math notranslate nohighlight">\(y'=By+C\)</span> where <span class="math notranslate nohighlight">\(A,B,C\)</span> are constants and <span class="math notranslate nohighlight">\((x',y')\)</span> are close matches
to the <span class="math notranslate nohighlight">\((x,y)\)</span> data in <em>other</em>. The algorithm assumes that the overlap region contains equal
numbers of <span class="math notranslate nohighlight">\((x,y)\)</span> points <em>mode</em> controls whether A,B, and C are fixed or adjustable</p>
<blockquote>
<div><ul class="simple">
<li><p>“All” - all three parameters adjustable</p></li>
<li><p>“Scale y, shift x” - C is fixed at 0.0</p></li>
<li><p>“Scale and shift y” A is fixed at 0.0</p></li>
<li><p>“Scale y” - only B is adjustable</p></li>
<li><p>“Shift y” - Only c is adjsutable</p></li>
<li><p>“Shift x” - Only A is adjustable</p></li>
<li><p>“Shift both” - B is fixed at 1.0</p></li>
</ul>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>User Guide section <a class="reference internal" href="../UserGuide/analysisfile.html#stitch-guide"><span class="std std-ref">Stitching Datasets together</span></a></p>
</div>
<p class="rubric">Example</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Stoner.Analysis.AnalysisMixin.threshold">
<span class="sig-name descname"><span class="pre">threshold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">threshold</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.threshold"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.threshold" title="Link to this definition">¶</a></dt>
<dd><p>Find partial indices where the data in column passes the threshold, rising or falling.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>threshold</strong> (<em>float</em>) – Value to look for in column col</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>col</strong> (<em>index</em>) – Column index to look for data in</p></li>
<li><p><strong>rising</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – look for case where the data is increasing in value (default True)</p></li>
<li><p><strong>falling</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – look for case where data is fallinh in value (default False)</p></li>
<li><p><strong>xcol</strong> (<em>index</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a><em> or </em><em>None</em>) – rather than returning a fractional row index, return the
interpolated value in column xcol. If xcol is False, then return a complete row
all_vals (bool): return all crossing points of the threshold or just the first. (default False)</p></li>
<li><p><strong>transpose</strong> (<em>bbool</em>) – Swap the x and y columns around - this is most useful when the column assignments
have been done via the setas attribute</p></li>
<li><p><strong>all_vals</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Return all values that match the criteria, or just the first in the file.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>(float)</em> –     Either a sing;le fractional row index, or an in terpolated x value</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you don’t specify a col value or set it to None, then the assigned columns via the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFile.setas</span></code> attribute will be used.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>There has been an API change. Versions prior to 0.1.9 placed the column before the threshold in the
positional argument list. In order to support the use of assigned columns, this has been swapped to the
present order.</p>
</div>
</dd></dl>

</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/StonerLogo2.png" alt="Logo of Stoner Package"/>
            </a></p>
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">AnalysisMixin</a><ul>
<li><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin"><code class="docutils literal notranslate"><span class="pre">AnalysisMixin</span></code></a><ul>
<li><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.apply"><code class="docutils literal notranslate"><span class="pre">AnalysisMixin.apply()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.clip"><code class="docutils literal notranslate"><span class="pre">AnalysisMixin.clip()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.decompose"><code class="docutils literal notranslate"><span class="pre">AnalysisMixin.decompose()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.integrate"><code class="docutils literal notranslate"><span class="pre">AnalysisMixin.integrate()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.normalise"><code class="docutils literal notranslate"><span class="pre">AnalysisMixin.normalise()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.stitch"><code class="docutils literal notranslate"><span class="pre">AnalysisMixin.stitch()</span></code></a></li>
<li><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.threshold"><code class="docutils literal notranslate"><span class="pre">AnalysisMixin.threshold()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="Stoner.core.utils.Tab_Delimited.html"
                          title="previous chapter">Tab_Delimited</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="Stoner.analysis.fitting.ODR_Model.html"
                          title="next chapter">ODR_Model</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/classes/Stoner.Analysis.AnalysisMixin.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<form class="search" action="../search.html" method="get">
  <input type="text" name="q"
   placeholder="type to search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="related bottom">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="Stoner.core.utils.Tab_Delimited.html" title="Previous document">Tab_Delimited</a>
        </li>
        <li>
          <a href="Stoner.analysis.fitting.ODR_Model.html" title="Next document">ODR_Model</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Stoner Package</a></li>
      <li>
        <a href="../Stoner.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Stoner</span></code> Package</a>
      </li> 
    </ul>
  </nav>
  </div>
  <footer id="pagefooter">&copy; 2013-15, Gavin Burnell et al.Last updated on Apr 16, 2025.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a>
      8.2.3
        with the <a href="http://github.com/irskep/sphinx-better-theme">
          better</a> theme.

  </footer>

  
  </body>
</html>