"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[440],{2511:(e,t,n)=>{var l,i;n.d(t,{A:()=>l,v:()=>i}),function(e){e.Simple="SIMPLE",e.Sql="SQL"}(l||(l={})),function(e){e.Having="HAVING",e.Where="WHERE"}(i||(i={}))},5815:(e,t,n)=>{n.d(t,{SO:()=>a,Sg:()=>s,pA:()=>o});var l=n(87903),i=n(15151),r=n(2511);const o=(e,t,n=!1,l=!1)=>{const i={};return n?i.adhoc_filters=[{expressionType:r.A.Sql,clause:r.v.Where,sqlExpression:"1 = 0"}]:null!=t&&0!==t.length&&(i.filters=[{col:e,op:l?"NOT IN":"IN",val:t}]),i},a=(e,t,n)=>{const l=[];return null!=t&&t!==n&&l.push({col:e,op:">=",val:t}),null!=n&&n!==t&&l.push({col:e,op:"<=",val:n}),null!=n&&null!=t&&n===t&&l.push({col:e,op:"==",val:n}),l.length?{filters:l}:{}};function s({timeFormatter:e,numberFormatter:t}={}){return(n,r)=>{if(null==n)return i.mu;if("boolean"==typeof n)return n?i.PU:i.qC;if(r===l.s.Boolean)try{return JSON.parse(String(n).toLowerCase())?i.PU:i.qC}catch{return i.qC}return"string"==typeof n?n:"bigint"==typeof n?String(n):e&&r===l.s.Temporal?e(n):t&&"number"==typeof n&&r===l.s.Numeric?t(n):String(n)}}},13130:(e,t,n)=>{n.d(t,{A:()=>d});const l=e=>"object"==typeof e&&null!=e&&1===e.nodeType,i=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,r=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const n=getComputedStyle(e,null);return i(n.overflowY,t)||i(n.overflowX,t)||(e=>{const t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}})(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)})(e)}return!1},o=(e,t,n,l,i,r,o,a)=>r<e&&o>t||r>e&&o<t?0:r<=e&&a<=n||o>=t&&a>=n?r-e-l:o>t&&a<n||r<e&&a>n?o-t+i:0,a=e=>{const t=e.parentElement;return null==t?e.getRootNode().host||null:t},s=(e,t)=>{var n,i,s,u;if("undefined"==typeof document)return[];const{scrollMode:d,block:c,inline:m,boundary:h,skipOverflowHiddenElements:p}=t,f="function"==typeof h?h:e=>e!==h;if(!l(e))throw new TypeError("Invalid target");const g=document.scrollingElement||document.documentElement,v=[];let b=e;for(;l(b)&&f(b);){if(b=a(b),b===g){v.push(b);break}null!=b&&b===document.body&&r(b)&&!r(document.documentElement)||null!=b&&r(b,p)&&v.push(b)}const x=null!=(i=null==(n=window.visualViewport)?void 0:n.width)?i:innerWidth,y=null!=(u=null==(s=window.visualViewport)?void 0:s.height)?u:innerHeight,{scrollX:w,scrollY:M}=window,{height:S,width:$,top:I,right:A,bottom:F,left:C}=e.getBoundingClientRect(),{top:N,right:Y,bottom:E,left:k}=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);let z="start"===c||"nearest"===c?I-N:"end"===c?F+E:I+S/2-N+E,H="center"===m?C+$/2-k+Y:"end"===m?A+Y:C-k;const V=[];for(let e=0;e<v.length;e++){const t=v[e],{height:n,width:l,top:i,right:a,bottom:s,left:u}=t.getBoundingClientRect();if("if-needed"===d&&I>=0&&C>=0&&F<=y&&A<=x&&(t===g&&!r(t)||I>=i&&F<=s&&C>=u&&A<=a))return V;const h=getComputedStyle(t),p=parseInt(h.borderLeftWidth,10),f=parseInt(h.borderTopWidth,10),b=parseInt(h.borderRightWidth,10),N=parseInt(h.borderBottomWidth,10);let Y=0,E=0;const k="offsetWidth"in t?t.offsetWidth-t.clientWidth-p-b:0,W="offsetHeight"in t?t.offsetHeight-t.clientHeight-f-N:0,D="offsetWidth"in t?0===t.offsetWidth?0:l/t.offsetWidth:0,T="offsetHeight"in t?0===t.offsetHeight?0:n/t.offsetHeight:0;if(g===t)Y="start"===c?z:"end"===c?z-y:"nearest"===c?o(M,M+y,y,f,N,M+z,M+z+S,S):z-y/2,E="start"===m?H:"center"===m?H-x/2:"end"===m?H-x:o(w,w+x,x,p,b,w+H,w+H+$,$),Y=Math.max(0,Y+M),E=Math.max(0,E+w);else{Y="start"===c?z-i-f:"end"===c?z-s+N+W:"nearest"===c?o(i,s,n,f,N+W,z,z+S,S):z-(i+n/2)+W/2,E="start"===m?H-u-p:"center"===m?H-(u+l/2)+k/2:"end"===m?H-a+b+k:o(u,a,l,p,b+k,H,H+$,$);const{scrollLeft:e,scrollTop:r}=t;Y=0===T?0:Math.max(0,Math.min(r+Y/T,t.scrollHeight-n/T+W)),E=0===D?0:Math.max(0,Math.min(e+E/D,t.scrollWidth-l/D+k)),z+=r-Y,H+=e-E}V.push({el:t,top:Y,left:E})}return V},u=e=>!1===e?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&0!==Object.keys(e).length)(e)?e:{block:"start",inline:"nearest"};function d(e,t){if(!e.isConnected||!(e=>{let t=e;for(;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1})(e))return;const n=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);if((e=>"object"==typeof e&&"function"==typeof e.behavior)(t))return t.behavior(s(e,t));const l="boolean"==typeof t||null==t?void 0:t.behavior;for(const{el:i,top:r,left:o}of s(e,u(t))){const e=r-n.top+n.bottom,t=o-n.left+n.right;i.scroll({top:e,left:t,behavior:l})}}},22991:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var l=n(98023),i=n.n(l),r=n(2445),o=n(72234),a=n(32142),s=n(53682),u=n(95579),d=n(62952),c=n(86444),m=n(65482),h=n(96540),p=n(10504),f=n(7142),g=n(49826),v=n(97470),b=n(38380),x=n(56268),y=n(58904),w=n(67874),M=n(5815),S=n(23876);const $=o.I4.span`
  margin: 0 ${({theme:e})=>3*e.sizeUnit}px;
  color: ${({theme:e})=>e.colorSplit};
  font-weight: ${({theme:e})=>e.fontWeightStrong};
  font-size: ${({theme:e})=>e.fontSize}px;
  align-content: center;
`,I=o.I4.div`
  display: flex;
  justify-content: space-between;
  width: 100%;

  .ant-input-number {
    min-width: 80px;
    position: relative;
  }
`,A=o.I4.div`
  ${({theme:e})=>`\n    margin: ${4*e.sizeUnit}px 0;\n    padding: 0 ${e.sizeUnit}px;\n  `}
`,F=o.I4.div`
  ${({theme:e})=>`\n    position: absolute;\n    top: -${10*e.sizeUnit}px;\n    right: 0px;\n    z-index: 100;\n    display: flex;\n    align-items: center;\n\n    .tooltip-icon {\n      margin-left: ${2*e.sizeUnit}px;\n    }\n  `}
`,C=o.I4.div`
  ${({theme:e})=>`\n    display: flex;\n    flex-direction: column;\n    gap: ${4*e.sizeUnit}px;\n    width: 100%;\n\n    .controls-container {\n      display: flex;\n      align-items: center;\n      gap: ${4*e.sizeUnit}px;\n      width: 100%;\n\n      .slider-wrapper {\n        display: flex;\n        align-items: center;\n        flex: 2;\n      }\n\n      .slider-container {\n        flex: 1;\n        min-width: 180px;\n      }\n\n      .inputs-container {\n        min-width: 160px;\n        max-width: 200px;\n      }\n\n    }\n\n    .message-container {\n      width: 100%;\n      text-align: center;\n      padding-top: ${2*e.sizeUnit}px;\n    }\n  `}
`,N=(0,a.gV)(s.A.SMART_NUMBER),Y=(e,t,n=!1)=>n&&null!==e||null!==e&&e===t?`x = ${N(e)}`:null!==e&&null!==t?`${N(e)} ≤ x ≤ ${N(t)}`:null!==e?`x ≥ ${N(e)}`:null!==t?`x ≤ ${N(t)}`:"",E=(e,t,n,l,r)=>{const[o,a]=e,s=(0,u.t)("Please provide a valid min or max value"),d=(0,u.t)("Min value cannot be greater than max value"),c=(0,u.t)("Numbers must be within %(min)s and %(max)s",{min:t,max:n});if(void 0!==r){const e=r===S.y.Minimum||r===S.y.Exact?o:a;return i()(e)?i()(e)&&(e<t||e>n)?{isValid:!1,errorMessage:c}:{isValid:!0,errorMessage:null}:{isValid:!1,errorMessage:s}}return l||null!==o||null!==a?l&&null===o&&null===a?{isValid:!1,errorMessage:s}:null!==o&&null!==a&&o>a?{isValid:!1,errorMessage:d}:null!==o&&o<t||null!==a&&a>n?{isValid:!1,errorMessage:c}:{isValid:!0,errorMessage:null}:{isValid:!0,errorMessage:null}};function k(e){const t=(0,o.DP)(),{data:n,formData:l,height:i,width:a,setDataMask:s,setFocusedFilter:k,unsetFocusedFilter:z,setHoveredFilter:H,unsetHoveredFilter:V,setFilterActive:W,filterState:D,inputRef:T,filterBarOrientation:U=p.QI.Vertical,isOverflowingFilterBar:R}=e,[q]=n,{min:O,max:B}=q,{groupby:L,enableSingleValue:j,enableEmptyFilter:P,defaultValue:Q}=l,X=(null==l?void 0:l.rangeDisplayMode)||y.l.SliderAndInput,K=j===S.y.Exact,[J=""]=(0,d.A)(L).map(c.A),[_,G]=(0,h.useState)(D.value||Q||[null,null]),[Z,ee]=(0,h.useState)(null),te=(0,h.useMemo)((()=>{const[e,t]=_;return j===S.y.Minimum||j===S.y.Exact?null!==e?e:O:j===S.y.Maximum?null!==t?t:B:[null!==e?e:O,null!==t?t:B]}),[_,O,B,j]),ne=(0,h.useCallback)((e=>{s({extraFormData:{},filterState:{value:null,label:"",validateStatus:"error",validateMessage:e||""}})}),[s]),le=(0,h.useCallback)((e=>{const[t,n]=e;s({extraFormData:(0,M.SO)(J,t,n),filterState:{value:K?[t,t]:[t,n],label:Y(t,n,K),validateStatus:void 0,validateMessage:""}})}),[s]);(0,h.useEffect)((()=>{if(void 0!==(null==q?void 0:q.min)||void 0!==(null==q?void 0:q.max))if("error"!==D.validateStatus){if(void 0===D.value&&!D.validateStatus)return G([null,null]),void le([null,null]);(0,m.A)(Q,_)?le(Q):D.value&&!D.validateStatus&&(G(D.value),le(D.value))}else if(ee(D.validateMessage),Z!==D.validateMessage){const{isValid:e,errorMessage:t}=E(_,O,B,P,j);e?(ee(null),le(_)):(ee(t),ne(t))}}),[JSON.stringify(D.value)]);const ie=(0,h.useMemo)((()=>{switch(j){case S.y.Minimum:return(0,u.t)("Filters for values greater than or equal.");case S.y.Maximum:return(0,u.t)("Filters for values less than or equal.");case S.y.Exact:return(0,u.t)("Filters for values equal to this exact value.");default:return null}}),[j]),re=(0,h.useRef)(!1),oe=e=>{re.current=!!/^[0-9]$/.test(e.key)},ae=(0,h.useCallback)(((e,t)=>{if(void 0===(null==q?void 0:q.min)&&void 0===(null==q?void 0:q.max))return;let n=e;null!==e&&null===_[t]&&(re.current?(n=e,re.current=!1):0===t&&1===e?n=O+1:0===t&&-1===e?n=O-1:1===t&&1===e?n=B+1:1===t&&-1===e&&(n=B-1));const l=0===t?[n,_[1]]:[_[0],n];G(l);const{isValid:i,errorMessage:r}=E(l,O,B,P,j);if(!i)return ee(r),void ne(r);ee(null),le(l)}),[O,B,P,j,ne,le,_]),se=(0,h.useCallback)((e=>{let t;if(void 0!==j){const n="number"==typeof e?e:Array.isArray(e)&&e.length>0?e[0]:(O+B)/2;t=j===S.y.Minimum?[n,null]:j===S.y.Maximum?[null,n]:[n,n]}else{const n=Array.isArray(e)?e:[O,B],[l,i]=n.length>=2?[n[0],n[1]]:[O,B];t=[l,i]}G(t),ee(null),le(t)}),[O,B,j,le]),ue=(0,h.useCallback)((()=>{const e=(0,u.t)("Choose numbers between %(min)s and %(max)s",{min:O,max:B});return Z?{message:Z,status:"error"}:void 0!==j&&ie?{message:ie,status:"help"}:{message:e,status:"help"}}),[Z,O,B,j,ie]),de=(0,h.useCallback)((()=>{const{message:e,status:t}=ue();return U===p.QI.Vertical?(0,r.Y)(w.Mo,{status:t,children:e}):null}),[ue,U]),ce=(0,h.useCallback)((()=>{const{message:e,status:n}=ue();return(0,r.Y)(v.m,{title:e,placement:"top",children:(0,r.Y)(b.F.InfoCircleOutlined,{iconSize:"m",iconColor:"error"===n?t.colors.error.base:t.colors.grayscale.base,className:"tooltip-icon"})})}),[ue]);(0,h.useEffect)((()=>{if(void 0!==j)switch(j){case S.y.Minimum:case S.y.Exact:null!==_[1]&&ae(null,1);break;case S.y.Maximum:null!==_[0]&&ae(null,0)}s({extraFormData:{},filterState:{value:null,label:""}})}),[j]);const me=()=>void 0!==j?(0,r.Y)(A,{children:(0,r.Y)(g.A,{min:O,max:B,value:Array.isArray(te)?te[0]:te,onChange:se,tooltip:{formatter:e=>null!==e?N(e):""}})}):(0,r.Y)(A,{children:(0,r.Y)(g.A,{min:O,max:B,range:!0,value:Array.isArray(te)?te:[O,te],onChange:se,tooltip:{formatter:e=>null!==e?N(e):""}})}),he=()=>(0,r.FD)(I,{tabIndex:-1,ref:T,onFocus:k,onBlur:z,onMouseEnter:H,onMouseLeave:V,onMouseDown:()=>W(!0),onMouseUp:()=>W(!1),children:[(void 0===j||j===S.y.Minimum||j===S.y.Exact)&&(0,r.Y)(f.A,{value:_[0],onChange:e=>ae(e,0),onKeyDown:oe,placeholder:`${O}`,style:{width:"100%"},status:D.validateStatus}),void 0===j&&(0,r.Y)($,{children:"-"}),(void 0===j||j===S.y.Maximum)&&(0,r.Y)(f.A,{value:_[1],onChange:e=>ae(e,1),onKeyDown:oe,placeholder:`${B}`,style:{width:"100%"},status:D.validateStatus})]});return(0,r.Y)(w.j3,{height:i,width:a,children:Number.isNaN(Number(O))||Number.isNaN(Number(B))?(0,r.Y)("h4",{children:(0,u.t)("Chosen non-numeric column")}):(0,r.Y)(x.e,{"aria-labelledby":`filter-name-${l.nativeFilterId}`,children:U!==p.QI.Horizontal||R?(0,r.Y)(r.FK,{children:(0,r.FD)("div",{style:{position:"relative"},children:[R&&(0,r.Y)(F,{children:(0,r.Y)(ce,{})}),(X===y.l.Slider||X===y.l.SliderAndInput)&&me(),(X===y.l.Input||X===y.l.SliderAndInput)&&he(),(0,r.Y)(de,{})]})}):(0,r.Y)(C,{children:(0,r.FD)("div",{className:"controls-container",children:[(0,r.Y)(ce,{}),(X===y.l.Slider||X===y.l.SliderAndInput)&&(0,r.Y)("div",{className:"slider-wrapper",children:(0,r.Y)("div",{className:"slider-container",children:me()})}),(X===y.l.Input||X===y.l.SliderAndInput)&&(0,r.Y)("div",{className:"inputs-container",children:he()})]})})})})}},49826:(e,t,n)=>{n.d(t,{A:()=>r});var l=n(2445),i=n(6531);function r(e){return(0,l.Y)(i.A,{...e})}},56268:(e,t,n)=>{n.d(t,{e:()=>i});var l=n(89467);const i=(0,n(72234).I4)(l.A.Item)`
  ${({theme:e})=>`\n    &.ant-form-item > .ant-row > .ant-form-item-label {\n      padding-bottom: ${e.paddingXXS}px;\n    }\n    .ant-form-item-label {\n      & > label {\n        font-size: ${e.fontSizeSM}px;\n        &.ant-form-item-required:not(.ant-form-item-required-mark-optional) {\n          &::before {\n            display: none;\n          }\n          &::after {\n            display: inline-block;\n            visibility: visible;\n            color: ${e.colorError};\n            font-size: ${e.fontSizeSM}px;\n            content: '*';\n          }\n        }\n      }\n    }\n    .ant-form-item-extra {\n      margin-top: ${e.sizeUnit}px;\n      font-size: ${e.fontSizeSM}px;\n    }\n  `}
`},58904:(e,t,n)=>{var l;n.d(t,{l:()=>l}),function(e){e.Slider="slider",e.Input="input",e.SliderAndInput="slider-and-input"}(l||(l={}))},67874:(e,t,n)=>{n.d(t,{Mo:()=>a,YH:()=>r,j3:()=>o});var l=n(72234),i=n(56268);const r=0,o=l.I4.div`
  min-height: ${({height:e})=>e}px;
  width: ${({width:e})=>e===r?"100%":`${e}px`};
`,a=((0,l.I4)(i.e)`
  &.ant-row.ant-form-item {
    margin: 0;
  }
`,l.I4.div`
  color: ${({theme:e,status:t="error"})=>{var n;return"help"===t?e.colors.grayscale.light1:null==(n=e.colors[t])?void 0:n.base}};
  text-align: ${({centerText:e})=>e?"center":"left"};
  width: 100%;
`)}}]);