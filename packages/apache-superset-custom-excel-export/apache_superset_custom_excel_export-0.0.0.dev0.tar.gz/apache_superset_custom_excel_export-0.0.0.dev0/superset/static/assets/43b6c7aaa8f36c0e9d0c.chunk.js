"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[2139],{2139:(t,e,n)=>{n.r(e),n.d(e,{default:()=>$});var r=n(7240),s=n(72234),o=n(24143),a=n.n(o),c=n(5556),i=n.n(c),l=n(61573),p=n(32142),u=n(69161),d=n(94963),h=n(5438);const g={data:i().arrayOf(i().shape({country_id:i().string,metric:i().number})),width:i().number,height:i().number,country:i().string,colorScheme:i().string,linearColorScheme:i().string,mapBaseUrl:i().string,numberFormat:i().string},y={};function m(t,e){const{data:n,width:r,height:s,country:o,linearColorScheme:c,numberFormat:i,colorScheme:g,sliceId:m}=e,f=t,x=(0,p.gV)(i),v=(0,u.A)().get(c).createLinearScale((0,l.A)(n,(t=>t.metric))),$=d.getScale(g),b={};n.forEach((t=>{b[t.country_id]=g?$(t.country_id,m):v(t.metric)}));const k=t=>b[t.properties.ISO]||"none",S=a().geo.path(),C=a().select(f);C.classed("superset-legacy-chart-country-map",!0),C.selectAll("*").remove(),f.style.height=`${s}px`,f.style.width=`${r}px`;const A=C.append("svg:svg").attr("width",r).attr("height",s).attr("preserveAspectRatio","xMidYMid meet"),N=A.append("rect").attr("class","background").attr("width",r).attr("height",s),w=A.append("g"),T=w.append("g").classed("map-layer",!0),_=w.append("g").classed("text-layer",!0).attr("transform",`translate(${r/2}, 45)`),z=_.append("text").classed("big-text",!0),M=_.append("text").classed("result-text",!0).attr("dy","1em");let I;const R=function(t){const e=t&&I!==t;let n,o,a;const c=r/2,i=s/2;if(e){const e=S.centroid(t);[n,o]=e,a=4,I=t}else n=c,o=i,a=1,I=null;w.transition().duration(750).attr("transform",`translate(${c},${i})scale(${a})translate(${-n},${-o})`),_.style("opacity",0).attr("transform",`translate(0,0)translate(${n},${e?o-5:45})`).transition().duration(750).style("opacity",1),z.transition().duration(750).style("font-size",e?6:16),M.transition().duration(750).style("font-size",e?16:24)};N.on("click",R);const U=function(t){let e=k(t);"none"!==e&&(e=a().rgb(e).darker().toString()),a().select(this).style("fill",e),function(t){let e="";t&&t.properties&&(e=t.properties.ID_2?t.properties.NAME_2:t.properties.NAME_1),z.text(e)}(t);const r=n.filter((e=>e.country_id===t.properties.ISO));var s;(s=r).length>0&&M.text(x(s[0].metric))},W=function(){a().select(this).style("fill",k),z.text(""),M.text("")};function L(t){const{features:e}=t,n=a().geo.centroid(t),o=a().geo.mercator().scale(100).center(n).translate([r/2,s/2]);S.projection(o);const c=S.bounds(t),i=100*r/(c[1][0]-c[0][0]),l=100*s/(c[1][1]-c[0][1]),p=i<l?i:l;o.scale(p);const u=S.bounds(t);o.translate([r-(u[0][0]+u[1][0])/2,s-(u[0][1]+u[1][1])/2]),T.selectAll("path").data(e).enter().append("path").attr("d",S).attr("class","region").attr("vector-effect","non-scaling-stroke").style("fill",k).on("mouseenter",U).on("mouseout",W).on("click",R)}const Y=y[o];if(Y)L(Y);else{const e=h.Ay[o];a().json(e,((e,n)=>{if(e){var r;const e=(null==(r=h.JK.find((t=>t[0]===o)))?void 0:r[1])||o;a().select(t).html(`<div class="alert alert-danger">Could not load map data for ${e}</div>`)}else y[o]=n,L(n)}))}}m.displayName="CountryMap",m.propTypes=g;const f=m;var x=n(2445);const v=(0,r.A)(f),$=(0,s.I4)((({className:t,...e})=>(0,x.Y)("div",{className:t,children:(0,x.Y)(v,{...e})})))`
  ${({theme:t})=>`\n    .superset-legacy-chart-country-map svg {\n      background-color: ${t.colors.grayscale.light5};\n    }\n\n    .superset-legacy-chart-country-map {\n      position: relative;\n    }\n\n    .superset-legacy-chart-country-map .background {\n      fill: ${t.colors.grayscale.light5};\n      pointer-events: all;\n    }\n\n    .superset-legacy-chart-country-map .map-layer {\n      fill: ${t.colors.grayscale.light5};\n      stroke: ${t.colors.grayscale.light1};\n    }\n\n    .superset-legacy-chart-country-map .effect-layer {\n      pointer-events: none;\n    }\n\n    .superset-legacy-chart-country-map .text-layer {\n      color: ${t.colorText};\n      text-anchor: middle;\n      pointer-events: none;\n    }\n\n    .superset-legacy-chart-country-map text.result-text {\n      font-weight: ${t.fontWeightLight};\n      font-size: ${t.fontSizeXL}px;\n    }\n\n    .superset-legacy-chart-country-map text.big-text {\n      font-weight: ${t.fontWeightStrong};\n      font-size: ${t.fontSizeLG}px;\n    }\n\n    .superset-legacy-chart-country-map path.region {\n      cursor: pointer;\n      stroke: ${t.colors.grayscale.light2};\n    }\n  `}
`},7240:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(2445),s=n(96540);function o(t,e){class n extends s.Component{constructor(t){super(t),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=e&&e.componentWillUnmount&&e.componentWillUnmount.bind(this)()}setContainerRef(t){this.container=t}execute(){this.container&&t(this.container,this.props)}render(){const{id:t,className:e}=this.props;return(0,r.Y)("div",{ref:this.setContainerRef,id:t,className:e})}}const o=n;return t.displayName&&(o.displayName=t.displayName),t.propTypes&&(o.propTypes={...o.propTypes,...t.propTypes}),t.defaultProps&&(o.defaultProps=t.defaultProps),n}}}]);