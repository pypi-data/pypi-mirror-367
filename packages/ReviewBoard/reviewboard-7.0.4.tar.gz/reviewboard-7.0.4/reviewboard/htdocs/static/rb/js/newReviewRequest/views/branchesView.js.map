{"version":3,"file":"branchesView.js","names":["RB","BranchesView","CollectionView","extend","tagName","itemViewType","BranchView","events","render","prototype","apply","arguments","collection","each","branch","get","trigger","_onAdded","_rendered","_onChange","selectedIx","$el","prop","models"],"sources":["../../../../../../static/rb/js/newReviewRequest/views/branchesView.es6.js"],"sourcesContent":["/**\n * A view for a collection of branches.\n *\n * This is presented as a ``<select>`` in the document.\n *\n * Users can listen to the \"selected\" event to know which branch is currently\n * chosen. This event will be triggered with the branch model as its argument.\n */\nRB.BranchesView = RB.CollectionView.extend({\n    tagName: 'select',\n\n    itemViewType: RB.BranchView,\n\n    events: {\n        'change': '_onChange',\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     RB.BranchesView:\n     *     This object, for chaining.\n     */\n    render: function() {\n        RB.CollectionView.prototype.render.apply(this, arguments);\n\n        this.collection.each(branch => {\n            if (branch.get('isDefault')) {\n                this.trigger('selected', branch);\n            }\n        });\n\n        return this;\n    },\n\n    /**\n     * Override for CollectionView._onAdded.\n     *\n     * If the newly-added branch is the default (for example, 'trunk' in SVN or\n     * 'master' in git), start with it selected.\n     *\n     * Args:\n     *     branch (RB.RepositoryBranch):\n     *         The newly-added branch.\n     */\n    _onAdded(branch) {\n        RB.CollectionView.prototype._onAdded.apply(this, arguments);\n\n        if (this._rendered && branch.get('isDefault')) {\n            this.trigger('selected', branch);\n        }\n    },\n\n    /**\n     * Callback for the 'change' event on the select node.\n     *\n     * Triggers 'selected' with the given model.\n     */\n    _onChange() {\n        const selectedIx = this.$el.prop('selectedIndex');\n        this.trigger('selected', this.collection.models[selectedIx]);\n    },\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,EAAE,CAACC,YAAY,GAAGD,EAAE,CAACE,cAAc,CAACC,MAAM,CAAC;EACvCC,OAAO,EAAE,QAAQ;EAEjBC,YAAY,EAAEL,EAAE,CAACM,UAAU;EAE3BC,MAAM,EAAE;IACJ,QAAQ,EAAE;EACd,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;EACIC,MAAM,EAAE,SAAAA,CAAA,EAAW;IACfR,EAAE,CAACE,cAAc,CAACO,SAAS,CAACD,MAAM,CAACE,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;IAEzD,IAAI,CAACC,UAAU,CAACC,IAAI,CAACC,MAAM,IAAI;MAC3B,IAAIA,MAAM,CAACC,GAAG,CAAC,WAAW,CAAC,EAAE;QACzB,IAAI,CAACC,OAAO,CAAC,UAAU,EAAEF,MAAM,CAAC;MACpC;IACJ,CAAC,CAAC;IAEF,OAAO,IAAI;EACf,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIG,QAAQA,CAACH,MAAM,EAAE;IACbd,EAAE,CAACE,cAAc,CAACO,SAAS,CAACQ,QAAQ,CAACP,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;IAE3D,IAAI,IAAI,CAACO,SAAS,IAAIJ,MAAM,CAACC,GAAG,CAAC,WAAW,CAAC,EAAE;MAC3C,IAAI,CAACC,OAAO,CAAC,UAAU,EAAEF,MAAM,CAAC;IACpC;EACJ,CAAC;EAED;AACJ;AACA;AACA;AACA;EACIK,SAASA,CAAA,EAAG;IACR,MAAMC,UAAU,GAAG,IAAI,CAACC,GAAG,CAACC,IAAI,CAAC,eAAe,CAAC;IACjD,IAAI,CAACN,OAAO,CAAC,UAAU,EAAE,IAAI,CAACJ,UAAU,CAACW,MAAM,CAACH,UAAU,CAAC,CAAC;EAChE;AACJ,CAAC,CAAC","ignoreList":[]}