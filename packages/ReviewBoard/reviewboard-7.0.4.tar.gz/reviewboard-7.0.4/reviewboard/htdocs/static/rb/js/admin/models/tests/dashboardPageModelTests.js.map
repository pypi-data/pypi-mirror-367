{"version":3,"file":"dashboardPageModelTests.js","names":["suite","page","beforeEach","RB","Admin","DashboardPage","describe","it","set","id","domID","viewClass","modelClass","modelAttrs","myAttr","viewOptions","myOption","onWidgetLoaded","jasmine","createSpy","loadWidgets","expect","widgets","length","toBe","model1","at","model2","toBeInstanceOf","Widget","get","toHaveBeenCalledTimes","toHaveBeenCalledWith","ViewType","WidgetView","widgetModel","spyOn","console","error","toHaveBeenCalled","args","calls","argsFor"],"sources":["../../../../../../../static/rb/js/admin/models/tests/dashboardPageModelTests.es6.js"],"sourcesContent":["suite('rb/admin/models/DashboardPage', function() {\n    let page;\n\n    beforeEach(function() {\n        page = new RB.Admin.DashboardPage();\n    });\n\n    describe('Widgets', function() {\n        it('Loading', function() {\n            page.set('widgetsData', [\n                {\n                    id: 'widget-1',\n                    domID: 'widget-1',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                    modelAttrs: {\n                        myAttr: 1,\n                    },\n                    viewOptions: {\n                        myOption: true,\n                    },\n                },\n                {\n                    id: 'widget-2',\n                    domID: 'widget-2',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                    modelAttrs: {\n                        myAttr: 2,\n                    },\n                    viewOptions: {\n                        myOption: false,\n                    },\n                },\n            ]);\n\n            const onWidgetLoaded = jasmine.createSpy();\n\n            page.loadWidgets(onWidgetLoaded);\n\n            expect(page.widgets.length).toBe(2);\n\n            const model1 = page.widgets.at(0);\n            const model2 = page.widgets.at(1);\n\n            expect(model1).toBeInstanceOf(RB.Admin.Widget);\n            expect(model1.get('myAttr')).toBe(1);\n\n            expect(model2).toBeInstanceOf(RB.Admin.Widget);\n            expect(model2.get('myAttr')).toBe(2);\n\n            expect(onWidgetLoaded).toHaveBeenCalledTimes(2);\n            expect(onWidgetLoaded).toHaveBeenCalledWith({\n                domID: 'widget-1',\n                ViewType: RB.Admin.WidgetView,\n                viewOptions: {\n                    myOption: true,\n                },\n                widgetModel: model1,\n            });\n            expect(onWidgetLoaded).toHaveBeenCalledWith({\n                domID: 'widget-2',\n                ViewType: RB.Admin.WidgetView,\n                viewOptions: {\n                    myOption: false,\n                },\n                widgetModel: model2,\n            });\n        });\n\n        it('Loading errors sandboxed', function() {\n            spyOn(console, 'error');\n\n            page.set('widgetsData', [\n                {\n                    id: 'widget-1',\n                    domID: 'widget-1',\n                    viewClass: 'BadViewClass',\n                    modelClass: 'BadModelClass',\n                },\n                {\n                    id: 'widget-2',\n                    domID: 'widget-2',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                    modelAttrs: {\n                        myAttr: 2,\n                    },\n                    viewOptions: {\n                        myOption: false,\n                    },\n                },\n            ]);\n\n            const onWidgetLoaded = jasmine.createSpy();\n\n            page.loadWidgets(onWidgetLoaded);\n\n            expect(page.widgets.length).toBe(1);\n\n            const model1 = page.widgets.at(0);\n            expect(model1).toBeInstanceOf(RB.Admin.Widget);\n\n            expect(onWidgetLoaded).toHaveBeenCalledTimes(1);\n            expect(onWidgetLoaded).toHaveBeenCalledWith({\n                domID: 'widget-2',\n                ViewType: RB.Admin.WidgetView,\n                viewOptions: {\n                    myOption: false,\n                },\n                widgetModel: model1,\n            });\n\n            expect(console.error).toHaveBeenCalled();\n            const args = console.error.calls.argsFor(0);\n            expect(args[0]).toBe(\n                'Unable to render administration widget \"%s\": %s');\n            expect(args[1]).toBe('widget-1');\n        });\n    });\n});\n"],"mappings":"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","ignoreList":[]}