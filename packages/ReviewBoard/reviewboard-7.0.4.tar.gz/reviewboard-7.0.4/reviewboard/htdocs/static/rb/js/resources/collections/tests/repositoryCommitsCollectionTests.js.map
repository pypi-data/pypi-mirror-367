{"version":3,"file":"repositoryCommitsCollectionTests.js","names":["suite","url","start","collection","beforeEach","RB","RepositoryCommits","urlBase","describe","it","spyOn","$","and","callFake","request","expect","toBe","type","success","stat","commits","author_name","date","id","message","parent","review_request_url","join","fetch","ajax","toHaveBeenCalled","length","at","get","getUTCHours","_","result"],"sources":["../../../../../../../static/rb/js/resources/collections/tests/repositoryCommitsCollectionTests.es6.js"],"sourcesContent":["suite('rb/resources/collections/RepositoryCommits', function() {\n    const url = '/api/repositories/123/commits/';\n    const start = '859d4e148ce3ce60bbda6622cdbe5c2c2f8d9817';\n    let collection;\n\n    beforeEach(function() {\n        collection = new RB.RepositoryCommits([], {\n            urlBase: url,\n            start: start,\n        });\n    });\n\n    describe('Methods', function() {\n        it('fetch', function() {\n            spyOn($, 'ajax').and.callFake(request => {\n                expect(request.url).toBe(`${url}?start=${start}`);\n                expect(request.type).toBe('GET');\n\n                request.success({\n                    stat: 'ok',\n                    commits: [\n                        {\n                            author_name: 'Christian Hammond',\n                            date: '2013-06-25T23:31:22Z',\n                            id: '859d4e148ce3ce60bbda6622cdbe5c2c2f8d9817',\n                            message: \"Merge branch 'release-1.7.x'\",\n                            parent: '92463764015ef463b4b6d1a1825fee7aeec8cb15',\n                            review_request_url: '',\n                        },\n                        {\n                            author_name: 'Christian Hammond',\n                            date: '2013-06-25T23:30:59Z',\n                            id: '92463764015ef463b4b6d1a1825fee7aeec8cb15',\n                            message: 'Fixed the bug number for the ' +\n                                     'blacktriangledown bug.',\n                            parent: '84c730c7823b653a5bbcc007188d5c85a7c4ac58',\n                            review_request_url: 'http://example.com/r/18274/',\n                        },\n                        {\n                            author_name: 'Christian Hammond',\n                            date: '2013-06-25T22:53:32Z',\n                            id: '84c730c7823b653a5bbcc007188d5c85a7c4ac58',\n                            message: [\n                                \"Don't expose child resources in \",\n                                'ValidateDiffResource.\\n\\nFor convenience, ',\n                                'ValidateDiffResource inherited from ',\n                                'DiffResource.\\nThis brought along the child ',\n                                \"resources, which weren't valid to have.\\n\",\n                                'That ended up breaking docs, which tried ',\n                                'to traverse them.'].join(''),\n                            parent: '',\n                            review_request_url: '',\n                        },\n                    ],\n                });\n\n            });\n\n            collection.fetch();\n\n            expect($.ajax).toHaveBeenCalled();\n            expect(collection.length).toBe(3);\n            expect(collection.at(0).get('authorName'))\n                .toBe('Christian Hammond');\n            expect(collection.at(1).get('date').getUTCHours()).toBe(23);\n            expect(collection.at(2).get('summary'))\n                .toBe(\"Don't expose child resources in ValidateDiffResource.\");\n            expect(collection.at(1).get('reviewRequestURL'))\n                .toBe('http://example.com/r/18274/');\n        });\n\n        it('url', function() {\n            expect(_.result(collection, 'url')).toBe(`${url}?start=${start}`);\n        });\n    });\n});\n"],"mappings":"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","ignoreList":[]}