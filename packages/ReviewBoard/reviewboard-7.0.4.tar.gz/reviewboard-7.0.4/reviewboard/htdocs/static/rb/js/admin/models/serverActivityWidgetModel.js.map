{"version":3,"file":"serverActivityWidgetModel.js","names":["RB","Admin","ServerActivityWidget","Widget","extend","defaults","_","data","changeDescriptions","comments","reviewRequests","reviews","rangeStart","rangeEnd","show","legend","prototype","loadData","direction","fetch","attributes","then","rsp","json","set","range","range_start","range_end","activity_data","change_descriptions","review_requests","trigger"],"sources":["../../../../../../static/rb/js/admin/models/serverActivityWidgetModel.es6.js"],"sourcesContent":["/**\n * State and operations for the server activity graph admin widget.\n *\n * Model Attributes:\n *     data (dict):\n *         A dictionary containing the data to display for the graph.\n *\n *     rangeStart (string):\n *         The beginning of the date range shown, in YYYY-MM-DD format.\n *\n *     rangeEnd (string):\n *         The end of the date range shown, in YYYY-MM-DD format.\n */\nRB.Admin.ServerActivityWidget = RB.Admin.Widget.extend({\n    defaults: _.defaults({\n        data: {\n            changeDescriptions: [],\n            comments: [],\n            reviewRequests: [],\n            reviews: [],\n        },\n        rangeStart: '',\n        rangeEnd: '',\n        show: {\n            changeDescriptions: true,\n            comments: true,\n            legend: true,\n            reviewRequests: true,\n            reviews: true,\n        },\n    }, RB.Admin.Widget.prototype.defaults),\n\n    /**\n     * Reload data from the server.\n     *\n     * Args:\n     *     direction (string):\n     *         A direction to move from the currently-shown period.\n     */\n    loadData(direction) {\n        fetch(`widget-activity/?range_start=${this.attributes.rangeStart}&range_end=${this.attributes.rangeEnd}&direction=${direction}`)\n            .then(rsp => rsp.json())\n            .then(rsp => {\n                this.set({\n                    rangeStart: rsp.range.range_start,\n                    rangeEnd: rsp.range.range_end,\n                    data: {\n                        changeDescriptions: rsp.activity_data.change_descriptions,\n                        comments: rsp.activity_data.comments,\n                        reviewRequests: rsp.activity_data.review_requests,\n                        reviews: rsp.activity_data.reviews,\n                    }\n                });\n\n                this.trigger('updated');\n            });\n    },\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,EAAE,CAACC,KAAK,CAACC,oBAAoB,GAAGF,EAAE,CAACC,KAAK,CAACE,MAAM,CAACC,MAAM,CAAC;EACnDC,QAAQ,EAAEC,CAAC,CAACD,QAAQ,CAAC;IACjBE,IAAI,EAAE;MACFC,kBAAkB,EAAE,EAAE;MACtBC,QAAQ,EAAE,EAAE;MACZC,cAAc,EAAE,EAAE;MAClBC,OAAO,EAAE;IACb,CAAC;IACDC,UAAU,EAAE,EAAE;IACdC,QAAQ,EAAE,EAAE;IACZC,IAAI,EAAE;MACFN,kBAAkB,EAAE,IAAI;MACxBC,QAAQ,EAAE,IAAI;MACdM,MAAM,EAAE,IAAI;MACZL,cAAc,EAAE,IAAI;MACpBC,OAAO,EAAE;IACb;EACJ,CAAC,EAAEX,EAAE,CAACC,KAAK,CAACE,MAAM,CAACa,SAAS,CAACX,QAAQ,CAAC;EAEtC;AACJ;AACA;AACA;AACA;AACA;AACA;EACIY,QAAQA,CAACC,SAAS,EAAE;IAChBC,KAAK,CAAC,gCAAgC,IAAI,CAACC,UAAU,CAACR,UAAU,cAAc,IAAI,CAACQ,UAAU,CAACP,QAAQ,cAAcK,SAAS,EAAE,CAAC,CAC3HG,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACC,GAAG,IAAI;MACT,IAAI,CAACE,GAAG,CAAC;QACLZ,UAAU,EAAEU,GAAG,CAACG,KAAK,CAACC,WAAW;QACjCb,QAAQ,EAAES,GAAG,CAACG,KAAK,CAACE,SAAS;QAC7BpB,IAAI,EAAE;UACFC,kBAAkB,EAAEc,GAAG,CAACM,aAAa,CAACC,mBAAmB;UACzDpB,QAAQ,EAAEa,GAAG,CAACM,aAAa,CAACnB,QAAQ;UACpCC,cAAc,EAAEY,GAAG,CAACM,aAAa,CAACE,eAAe;UACjDnB,OAAO,EAAEW,GAAG,CAACM,aAAa,CAACjB;QAC/B;MACJ,CAAC,CAAC;MAEF,IAAI,CAACoB,OAAO,CAAC,SAAS,CAAC;IAC3B,CAAC,CAAC;EACV;AACJ,CAAC,CAAC","ignoreList":[]}