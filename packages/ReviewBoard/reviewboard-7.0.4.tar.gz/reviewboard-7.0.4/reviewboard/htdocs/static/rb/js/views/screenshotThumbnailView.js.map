{"version":3,"file":"screenshotThumbnailView.js","names":["RB","ScreenshotThumbnail","Backbone","View","extend","events","render","listenTo","model","$el","fadeOut","remove","$caption","find","captionEditorView","InlineEditorView","el","editIconClass","showButtons","trigger","value","ready","set","save","_captionEditorView","_onDeleteClicked","e","preventDefault","stopPropagation","destroy"],"sources":["../../../../../static/rb/js/views/screenshotThumbnailView.es6.js"],"sourcesContent":["/**\n * Displays a thumbnail for a screenshot.\n *\n * Screenshot thumbnails allow the caption to be edited and the screenshot\n * to be deleted.\n *\n * This expects to take an existing element for the thumbnail contents, and\n * will attach handlers for interaction.\n *\n * The following signals are provided, on top of the standard Backbone.View\n * signals:\n *\n *     * beginEdit\n *       - Editing of the screenshot (caption) has begun.\n *\n *     * endEdit\n *       - Editing of the screenshot (caption) has finished.\n */\nRB.ScreenshotThumbnail = Backbone.View.extend({\n    events: {\n        'click a.delete': '_onDeleteClicked',\n    },\n\n    /**\n     * Render the thumbnail.\n     *\n     * This will listen for events on the screenshot and for events on the\n     * thumbnail itself (to allow for caption editing).\n     *\n     * Returns:\n     *     RB.ScreenshotThumbnail:\n     *     This object, for chaining.\n     */\n    render() {\n        this.listenTo(this.model, 'destroy', () => {\n            this.$el.fadeOut(() => this.remove());\n        });\n\n        this.$caption = this.$el.find('a.edit');\n        const captionEditorView = new RB.InlineEditorView({\n            el: this.$caption,\n            editIconClass: 'rb-icon rb-icon-edit',\n            showButtons: false,\n        });\n        captionEditorView.render();\n\n        this.listenTo(captionEditorView, 'beginEdit',\n                      () => this.trigger('beginEdit'));\n        this.listenTo(captionEditorView, 'cancel',\n                      () => this.trigger('endEdit'));\n        this.listenTo(\n            captionEditorView, 'complete', async value => {\n                /*\n                 * We want to set the caption after ready() finishes, it case\n                 * it loads state and overwrites.\n                 */\n                await this.model.ready();\n                this.model.set('caption', value);\n                this.trigger('endEdit');\n                await this.model.save();\n            });\n\n        this._captionEditorView = captionEditorView;\n\n        return this;\n    },\n\n    /**\n     * Delete the screenshot.\n     *\n     * Once the screenshot has been deleted, the view will be removed.\n     *\n     * Args:\n     *     e (Event):\n     *         The event that triggered the delete.\n     */\n    _onDeleteClicked(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this.model.destroy();\n    },\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,EAAE,CAACC,mBAAmB,GAAGC,QAAQ,CAACC,IAAI,CAACC,MAAM,CAAC;EAC1CC,MAAM,EAAE;IACJ,gBAAgB,EAAE;EACtB,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,MAAMA,CAAA,EAAG;IACL,IAAI,CAACC,QAAQ,CAAC,IAAI,CAACC,KAAK,EAAE,SAAS,EAAE,MAAM;MACvC,IAAI,CAACC,GAAG,CAACC,OAAO,CAAC,MAAM,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC;IACzC,CAAC,CAAC;IAEF,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACH,GAAG,CAACI,IAAI,CAAC,QAAQ,CAAC;IACvC,MAAMC,iBAAiB,GAAG,IAAId,EAAE,CAACe,gBAAgB,CAAC;MAC9CC,EAAE,EAAE,IAAI,CAACJ,QAAQ;MACjBK,aAAa,EAAE,sBAAsB;MACrCC,WAAW,EAAE;IACjB,CAAC,CAAC;IACFJ,iBAAiB,CAACR,MAAM,CAAC,CAAC;IAE1B,IAAI,CAACC,QAAQ,CAACO,iBAAiB,EAAE,WAAW,EAC9B,MAAM,IAAI,CAACK,OAAO,CAAC,WAAW,CAAC,CAAC;IAC9C,IAAI,CAACZ,QAAQ,CAACO,iBAAiB,EAAE,QAAQ,EAC3B,MAAM,IAAI,CAACK,OAAO,CAAC,SAAS,CAAC,CAAC;IAC5C,IAAI,CAACZ,QAAQ,CACTO,iBAAiB,EAAE,UAAU,EAAE,MAAMM,KAAK,IAAI;MAC1C;AAChB;AACA;AACA;MACgB,MAAM,IAAI,CAACZ,KAAK,CAACa,KAAK,CAAC,CAAC;MACxB,IAAI,CAACb,KAAK,CAACc,GAAG,CAAC,SAAS,EAAEF,KAAK,CAAC;MAChC,IAAI,CAACD,OAAO,CAAC,SAAS,CAAC;MACvB,MAAM,IAAI,CAACX,KAAK,CAACe,IAAI,CAAC,CAAC;IAC3B,CAAC,CAAC;IAEN,IAAI,CAACC,kBAAkB,GAAGV,iBAAiB;IAE3C,OAAO,IAAI;EACf,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIW,gBAAgBA,CAACC,CAAC,EAAE;IAChBA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBD,CAAC,CAACE,eAAe,CAAC,CAAC;IAEnB,IAAI,CAACpB,KAAK,CAACqB,OAAO,CAAC,CAAC;EACxB;AACJ,CAAC,CAAC","ignoreList":[]}