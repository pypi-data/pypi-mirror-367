{"version":3,"file":"pageManagerModelTests.js","names":["suite","pageManager","page","beforeEach","RB","PageManager","Backbone","View","spyOn","describe","callbacks","expectedRender","cb","_page","expect","toBe","get","it","beforeRender","not","toHaveBeenCalled","set","rendered","toThrow","ready","render","oldInstance","instance","afterEach","toHaveBeenCalledWith","setPage","getPage"],"sources":["../../../../../../../static/rb/js/pages/models/tests/pageManagerModelTests.es6.js"],"sourcesContent":["suite('rb/pages/models/PageManager', function() {\n    let pageManager;\n    let page;\n\n    beforeEach(function() {\n        pageManager = new RB.PageManager();\n        page = new Backbone.View();\n\n        spyOn(page, 'render');\n    });\n\n    describe('Instance', function() {\n        let callbacks;\n        let expectedRender;\n\n        beforeEach(function() {\n            expectedRender = false;\n\n            callbacks = {\n                cb: _page => {\n                    expect(_page).toBe(page);\n                    expect(pageManager.get('rendered')).toBe(expectedRender);\n                },\n            };\n\n            spyOn(callbacks, 'cb');\n        });\n\n        describe('Methods', function() {\n            describe('beforeReady', function() {\n                it('Without page set', function() {\n                    pageManager.beforeRender(callbacks.cb);\n                    expect(callbacks.cb).not.toHaveBeenCalled();\n\n                    pageManager.set('page', page);\n                    expect(callbacks.cb).toHaveBeenCalled();\n                });\n\n                it('With page set, not rendered', function() {\n                    pageManager.set('page', page);\n                    pageManager.set('rendered', false);\n\n                    pageManager.beforeRender(callbacks.cb);\n                    expect(callbacks.cb).toHaveBeenCalled();\n                });\n\n                it('With page set, rendered', function() {\n                    pageManager.set({\n                        page: page,\n                        rendered: true,\n                    });\n\n                    expect(() => pageManager.beforeRender(callbacks.cb))\n                        .toThrow();\n\n                    expect(callbacks.cb).not.toHaveBeenCalled();\n                });\n            });\n\n            describe('ready', function() {\n                it('Without page set', function() {\n                    pageManager.ready(callbacks.cb);\n                    expect(callbacks.cb).not.toHaveBeenCalled();\n\n                    pageManager.set('page', page);\n                    expect(pageManager.get('rendered')).toBe(true);\n                    expect(page.render).toHaveBeenCalled();\n\n                    expect(callbacks.cb).toHaveBeenCalled();\n                });\n\n                it('With page set, not rendered', function() {\n                    /* Prevent the page from rendering for this test. */\n                    spyOn(pageManager, '_renderPage');\n\n                    pageManager.set('page', page);\n                    expect(pageManager.get('rendered')).toBe(false);\n                    expect(page.render).not.toHaveBeenCalled();\n\n                    pageManager.ready(callbacks.cb);\n                    expect(callbacks.cb).not.toHaveBeenCalled();\n                });\n\n                it('With page set, rendered', function() {\n                    pageManager.set('page', page);\n                    expect(pageManager.get('rendered')).toBe(true);\n                    expect(page.render).toHaveBeenCalled();\n\n                    pageManager.ready(callbacks.cb);\n                    expect(callbacks.cb).toHaveBeenCalled();\n                });\n            });\n        });\n    });\n\n    describe('Class methods', function() {\n        let oldInstance;\n\n        beforeEach(function() {\n            oldInstance = RB.PageManager.instance;\n            RB.PageManager.instance = pageManager;\n        });\n\n        afterEach(function() {\n            RB.PageManager.instance = oldInstance;\n        });\n\n        it('beforeRender', function() {\n            spyOn(RB.PageManager.instance, 'beforeRender');\n            RB.PageManager.beforeRender(1, 2);\n            expect(RB.PageManager.instance.beforeRender)\n                .toHaveBeenCalledWith(1, 2);\n        });\n\n        it('ready', function() {\n            spyOn(RB.PageManager.instance, 'ready');\n            RB.PageManager.ready(1, 2);\n            expect(RB.PageManager.instance.ready)\n                .toHaveBeenCalledWith(1, 2);\n        });\n\n        it('setPage', function() {\n            const page = new Backbone.View();\n            RB.PageManager.setPage(page);\n            expect(pageManager.get('page')).toBe(page);\n        });\n\n        it('getPage', function() {\n            const page = new Backbone.View();\n            pageManager.set('page', page);\n            expect(RB.PageManager.getPage()).toBe(page);\n        });\n    });\n});\n"],"mappings":";;AAAAA,KAAK,CAAC,6BAA6B,EAAE,YAAW;EAC5C,IAAIC,WAAW;EACf,IAAIC,IAAI;EAERC,UAAU,CAAC,YAAW;IAClBF,WAAW,GAAG,IAAIG,EAAE,CAACC,WAAW,CAAC,CAAC;IAClCH,IAAI,GAAG,IAAII,QAAQ,CAACC,IAAI,CAAC,CAAC;IAE1BC,KAAK,CAACN,IAAI,EAAE,QAAQ,CAAC;EACzB,CAAC,CAAC;EAEFO,QAAQ,CAAC,UAAU,EAAE,YAAW;IAC5B,IAAIC,SAAS;IACb,IAAIC,cAAc;IAElBR,UAAU,CAAC,YAAW;MAClBQ,cAAc,GAAG,KAAK;MAEtBD,SAAS,GAAG;QACRE,EAAE,EAAEC,KAAK,IAAI;UACTC,MAAM,CAACD,KAAK,CAAC,CAACE,IAAI,CAACb,IAAI,CAAC;UACxBY,MAAM,CAACb,WAAW,CAACe,GAAG,CAAC,UAAU,CAAC,CAAC,CAACD,IAAI,CAACJ,cAAc,CAAC;QAC5D;MACJ,CAAC;MAEDH,KAAK,CAACE,SAAS,EAAE,IAAI,CAAC;IAC1B,CAAC,CAAC;IAEFD,QAAQ,CAAC,SAAS,EAAE,YAAW;MAC3BA,QAAQ,CAAC,aAAa,EAAE,YAAW;QAC/BQ,EAAE,CAAC,kBAAkB,EAAE,YAAW;UAC9BhB,WAAW,CAACiB,YAAY,CAACR,SAAS,CAACE,EAAE,CAAC;UACtCE,MAAM,CAACJ,SAAS,CAACE,EAAE,CAAC,CAACO,GAAG,CAACC,gBAAgB,CAAC,CAAC;UAE3CnB,WAAW,CAACoB,GAAG,CAAC,MAAM,EAAEnB,IAAI,CAAC;UAC7BY,MAAM,CAACJ,SAAS,CAACE,EAAE,CAAC,CAACQ,gBAAgB,CAAC,CAAC;QAC3C,CAAC,CAAC;QAEFH,EAAE,CAAC,6BAA6B,EAAE,YAAW;UACzChB,WAAW,CAACoB,GAAG,CAAC,MAAM,EAAEnB,IAAI,CAAC;UAC7BD,WAAW,CAACoB,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC;UAElCpB,WAAW,CAACiB,YAAY,CAACR,SAAS,CAACE,EAAE,CAAC;UACtCE,MAAM,CAACJ,SAAS,CAACE,EAAE,CAAC,CAACQ,gBAAgB,CAAC,CAAC;QAC3C,CAAC,CAAC;QAEFH,EAAE,CAAC,yBAAyB,EAAE,YAAW;UACrChB,WAAW,CAACoB,GAAG,CAAC;YACZnB,IAAI,EAAEA,IAAI;YACVoB,QAAQ,EAAE;UACd,CAAC,CAAC;UAEFR,MAAM,CAAC,MAAMb,WAAW,CAACiB,YAAY,CAACR,SAAS,CAACE,EAAE,CAAC,CAAC,CAC/CW,OAAO,CAAC,CAAC;UAEdT,MAAM,CAACJ,SAAS,CAACE,EAAE,CAAC,CAACO,GAAG,CAACC,gBAAgB,CAAC,CAAC;QAC/C,CAAC,CAAC;MACN,CAAC,CAAC;MAEFX,QAAQ,CAAC,OAAO,EAAE,YAAW;QACzBQ,EAAE,CAAC,kBAAkB,EAAE,YAAW;UAC9BhB,WAAW,CAACuB,KAAK,CAACd,SAAS,CAACE,EAAE,CAAC;UAC/BE,MAAM,CAACJ,SAAS,CAACE,EAAE,CAAC,CAACO,GAAG,CAACC,gBAAgB,CAAC,CAAC;UAE3CnB,WAAW,CAACoB,GAAG,CAAC,MAAM,EAAEnB,IAAI,CAAC;UAC7BY,MAAM,CAACb,WAAW,CAACe,GAAG,CAAC,UAAU,CAAC,CAAC,CAACD,IAAI,CAAC,IAAI,CAAC;UAC9CD,MAAM,CAACZ,IAAI,CAACuB,MAAM,CAAC,CAACL,gBAAgB,CAAC,CAAC;UAEtCN,MAAM,CAACJ,SAAS,CAACE,EAAE,CAAC,CAACQ,gBAAgB,CAAC,CAAC;QAC3C,CAAC,CAAC;QAEFH,EAAE,CAAC,6BAA6B,EAAE,YAAW;UACzC;UACAT,KAAK,CAACP,WAAW,EAAE,aAAa,CAAC;UAEjCA,WAAW,CAACoB,GAAG,CAAC,MAAM,EAAEnB,IAAI,CAAC;UAC7BY,MAAM,CAACb,WAAW,CAACe,GAAG,CAAC,UAAU,CAAC,CAAC,CAACD,IAAI,CAAC,KAAK,CAAC;UAC/CD,MAAM,CAACZ,IAAI,CAACuB,MAAM,CAAC,CAACN,GAAG,CAACC,gBAAgB,CAAC,CAAC;UAE1CnB,WAAW,CAACuB,KAAK,CAACd,SAAS,CAACE,EAAE,CAAC;UAC/BE,MAAM,CAACJ,SAAS,CAACE,EAAE,CAAC,CAACO,GAAG,CAACC,gBAAgB,CAAC,CAAC;QAC/C,CAAC,CAAC;QAEFH,EAAE,CAAC,yBAAyB,EAAE,YAAW;UACrChB,WAAW,CAACoB,GAAG,CAAC,MAAM,EAAEnB,IAAI,CAAC;UAC7BY,MAAM,CAACb,WAAW,CAACe,GAAG,CAAC,UAAU,CAAC,CAAC,CAACD,IAAI,CAAC,IAAI,CAAC;UAC9CD,MAAM,CAACZ,IAAI,CAACuB,MAAM,CAAC,CAACL,gBAAgB,CAAC,CAAC;UAEtCnB,WAAW,CAACuB,KAAK,CAACd,SAAS,CAACE,EAAE,CAAC;UAC/BE,MAAM,CAACJ,SAAS,CAACE,EAAE,CAAC,CAACQ,gBAAgB,CAAC,CAAC;QAC3C,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC,CAAC;EACN,CAAC,CAAC;EAEFX,QAAQ,CAAC,eAAe,EAAE,YAAW;IACjC,IAAIiB,WAAW;IAEfvB,UAAU,CAAC,YAAW;MAClBuB,WAAW,GAAGtB,EAAE,CAACC,WAAW,CAACsB,QAAQ;MACrCvB,EAAE,CAACC,WAAW,CAACsB,QAAQ,GAAG1B,WAAW;IACzC,CAAC,CAAC;IAEF2B,SAAS,CAAC,YAAW;MACjBxB,EAAE,CAACC,WAAW,CAACsB,QAAQ,GAAGD,WAAW;IACzC,CAAC,CAAC;IAEFT,EAAE,CAAC,cAAc,EAAE,YAAW;MAC1BT,KAAK,CAACJ,EAAE,CAACC,WAAW,CAACsB,QAAQ,EAAE,cAAc,CAAC;MAC9CvB,EAAE,CAACC,WAAW,CAACa,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC;MACjCJ,MAAM,CAACV,EAAE,CAACC,WAAW,CAACsB,QAAQ,CAACT,YAAY,CAAC,CACvCW,oBAAoB,CAAC,CAAC,EAAE,CAAC,CAAC;IACnC,CAAC,CAAC;IAEFZ,EAAE,CAAC,OAAO,EAAE,YAAW;MACnBT,KAAK,CAACJ,EAAE,CAACC,WAAW,CAACsB,QAAQ,EAAE,OAAO,CAAC;MACvCvB,EAAE,CAACC,WAAW,CAACmB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;MAC1BV,MAAM,CAACV,EAAE,CAACC,WAAW,CAACsB,QAAQ,CAACH,KAAK,CAAC,CAChCK,oBAAoB,CAAC,CAAC,EAAE,CAAC,CAAC;IACnC,CAAC,CAAC;IAEFZ,EAAE,CAAC,SAAS,EAAE,YAAW;MACrB,MAAMf,IAAI,GAAG,IAAII,QAAQ,CAACC,IAAI,CAAC,CAAC;MAChCH,EAAE,CAACC,WAAW,CAACyB,OAAO,CAAC5B,IAAI,CAAC;MAC5BY,MAAM,CAACb,WAAW,CAACe,GAAG,CAAC,MAAM,CAAC,CAAC,CAACD,IAAI,CAACb,IAAI,CAAC;IAC9C,CAAC,CAAC;IAEFe,EAAE,CAAC,SAAS,EAAE,YAAW;MACrB,MAAMf,IAAI,GAAG,IAAII,QAAQ,CAACC,IAAI,CAAC,CAAC;MAChCN,WAAW,CAACoB,GAAG,CAAC,MAAM,EAAEnB,IAAI,CAAC;MAC7BY,MAAM,CAACV,EAAE,CAACC,WAAW,CAAC0B,OAAO,CAAC,CAAC,CAAC,CAAChB,IAAI,CAACb,IAAI,CAAC;IAC/C,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC,CAAC","ignoreList":[]}