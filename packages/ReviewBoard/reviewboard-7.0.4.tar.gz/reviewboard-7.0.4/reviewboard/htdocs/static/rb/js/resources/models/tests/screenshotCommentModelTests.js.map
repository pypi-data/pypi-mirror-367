{"version":3,"file":"screenshotCommentModelTests.js","names":["suite","strings","RB","ScreenshotComment","model","beforeEach","screenshotID","parentObject","BaseResource","x","y","width","height","describe","it","data","parse","stat","screenshot_comment","id","issue_opened","issue_status","text_type","text","w","h","thumbnail_url","screenshot","filename","expect","not","toBe","undefined","issueOpened","issueStatus","BaseComment","STATE_RESOLVED","richText","thumbnailURL","get","spyOn","prototype","and","callThrough","toJSON","toHaveBeenCalled","set","force_text_type","include_text_types","validate","INVALID_X","INVALID_Y","INVALID_WIDTH","INVALID_HEIGHT"],"sources":["../../../../../../../static/rb/js/resources/models/tests/screenshotCommentModelTests.es6.js"],"sourcesContent":["suite('rb/resources/models/ScreenshotComment', function() {\n    const strings = RB.ScreenshotComment.strings;\n    let model;\n\n    beforeEach(function() {\n        /* Set some sane defaults needed to pass validation. */\n        model = new RB.ScreenshotComment({\n            screenshotID: 16,\n            parentObject: new RB.BaseResource({\n                'public': true,\n            }),\n            x: 0,\n            y: 0,\n            width: 1,\n            height: 1,\n        });\n    });\n\n    describe('parse', function() {\n        it('API payloads', function() {\n            const data = model.parse({\n                stat: 'ok',\n                screenshot_comment: {\n                    id: 42,\n                    issue_opened: true,\n                    issue_status: 'resolved',\n                    text_type: 'markdown',\n                    text: 'foo',\n                    x: 10,\n                    y: 20,\n                    w: 30,\n                    h: 40,\n                    thumbnail_url: '/thumbnail.png',\n                    screenshot: {\n                        id: 10,\n                        filename: 'image.png',\n                    },\n                },\n            });\n\n            expect(data).not.toBe(undefined);\n            expect(data.id).toBe(42);\n            expect(data.issueOpened).toBe(true);\n            expect(data.issueStatus).toBe(RB.BaseComment.STATE_RESOLVED);\n            expect(data.richText).toBe(true);\n            expect(data.text).toBe('foo');\n            expect(data.x).toBe(10);\n            expect(data.y).toBe(20);\n            expect(data.width).toBe(30);\n            expect(data.height).toBe(40);\n            expect(data.thumbnailURL).toBe('/thumbnail.png');\n            expect(data.screenshot).not.toBe(undefined);\n            expect(data.screenshot.id).toBe(10);\n            expect(data.screenshot.get('filename')).toBe('image.png');\n            expect(data.screenshotID).toBe(10);\n        });\n    });\n\n    describe('toJSON', function() {\n        it('BaseComment.toJSON called', function() {\n            spyOn(RB.BaseComment.prototype, 'toJSON').and.callThrough();\n            model.toJSON();\n            expect(RB.BaseComment.prototype.toJSON).toHaveBeenCalled();\n        });\n\n        it('x field', function() {\n            model.set('x', 10);\n            const data = model.toJSON();\n            expect(data.x).toBe(10);\n        });\n\n        it('y field', function() {\n            model.set('y', 10);\n            const data = model.toJSON();\n            expect(data.y).toBe(10);\n        });\n\n        it('w field', function() {\n            model.set('width', 10);\n            const data = model.toJSON();\n            expect(data.w).toBe(10);\n        });\n\n        it('h field', function() {\n            model.set('height', 10);\n            const data = model.toJSON();\n            expect(data.h).toBe(10);\n        });\n\n        describe('force_text_type field', function() {\n            it('With value', function() {\n                model.set('forceTextType', 'html');\n                const data = model.toJSON();\n                expect(data.force_text_type).toBe('html');\n            });\n\n            it('Without value', function() {\n                const data = model.toJSON();\n                expect(data.force_text_type).toBe(undefined);\n            });\n        });\n\n        describe('include_text_types field', function() {\n            it('With value', function() {\n                model.set('includeTextTypes', 'html');\n                const data = model.toJSON();\n                expect(data.include_text_types).toBe('html');\n            });\n\n            it('Without value', function() {\n                const data = model.toJSON();\n                expect(data.include_text_types).toBe(undefined);\n            });\n        });\n    });\n\n    describe('validate', function() {\n        it('Inherited behavior', function() {\n            spyOn(RB.BaseComment.prototype, 'validate');\n            model.validate({});\n            expect(RB.BaseComment.prototype.validate).toHaveBeenCalled();\n        });\n\n        describe('x', function() {\n            describe('Valid values', function() {\n                it('0', function() {\n                    expect(model.validate({\n                        x: 0,\n                    })).toBe(undefined);\n                });\n\n                it('> 0', function() {\n                    expect(model.validate({\n                        x: 10,\n                    })).toBe(undefined);\n                });\n            });\n\n            describe('Invalid values', function() {\n                it('< 0', function() {\n                    expect(model.validate({\n                        x: -1,\n                    })).toBe(strings.INVALID_X);\n                });\n            });\n        });\n\n        describe('y', function() {\n            describe('Valid values', function() {\n                it('0', function() {\n                    expect(model.validate({\n                        y: 0,\n                    })).toBe(undefined);\n                });\n\n                it('> 0', function() {\n                    expect(model.validate({\n                        y: 10,\n                    })).toBe(undefined);\n                });\n            });\n\n            describe('Invalid values', function() {\n                it('< 0', function() {\n                    expect(model.validate({\n                        y: -1,\n                    })).toBe(strings.INVALID_Y);\n                });\n            });\n        });\n\n        describe('width', function() {\n            describe('Valid values', function() {\n                it('> 0', function() {\n                    expect(model.validate({\n                        width: 10,\n                    })).toBe(undefined);\n                });\n            });\n\n            describe('Invalid values', function() {\n                it('0', function() {\n                    expect(model.validate({\n                        width: 0,\n                    })).toBe(strings.INVALID_WIDTH);\n                });\n\n                it('< 0', function() {\n                    expect(model.validate({\n                        width: -1,\n                    })).toBe(strings.INVALID_WIDTH);\n                });\n            });\n        });\n\n        describe('height', function() {\n            describe('Valid values', function() {\n                it('> 0', function() {\n                    expect(model.validate({\n                        height: 10,\n                    })).toBe(undefined);\n                });\n            });\n\n            describe('Invalid values', function() {\n                it('0', function() {\n                    expect(model.validate({\n                        height: 0,\n                    })).toBe(strings.INVALID_HEIGHT);\n                });\n\n                it('< 0', function() {\n                    expect(model.validate({\n                        height: -1,\n                    })).toBe(strings.INVALID_HEIGHT);\n                });\n            });\n        });\n    });\n});\n"],"mappings":"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","ignoreList":[]}