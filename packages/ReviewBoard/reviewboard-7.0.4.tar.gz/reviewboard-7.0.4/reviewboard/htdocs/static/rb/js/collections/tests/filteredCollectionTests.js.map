{"version":3,"file":"filteredCollectionTests.js","names":["suite","mainCollection","beforeEach","Backbone","Collection","id","label","bool","describe","it","filteredCollection","RB","FilteredCollection","collection","expect","length","toBe","filters","at","setFilters","reset","add","remove","get"],"sources":["../../../../../../static/rb/js/collections/tests/filteredCollectionTests.es6.js"],"sourcesContent":["suite('rb/collections/FilteredCollection', function() {\n    let mainCollection;\n\n    beforeEach(function() {\n        mainCollection = new Backbone.Collection([\n            {\n                id: 1,\n                label: 'One',\n                bool: true,\n            },\n            {\n                id: 2,\n                label: 'Two',\n                bool: false,\n            },\n            {\n                id: 3,\n                label: 'Three',\n                bool: true,\n            },\n        ]);\n    });\n\n    describe('Initialization', function() {\n        it('Defaults to full contents', function() {\n            const filteredCollection = new RB.FilteredCollection(null, {\n                collection: mainCollection,\n            });\n\n            expect(filteredCollection.length).toBe(mainCollection.length);\n        });\n\n        it('Respects provided filter', function() {\n            const filteredCollection = new RB.FilteredCollection(null, {\n                collection: mainCollection,\n                filters: {\n                    label: 'T',\n                },\n            });\n\n            expect(filteredCollection.length).toBe(2);\n            expect(filteredCollection.at(0).id).toBe(2);\n            expect(filteredCollection.at(1).id).toBe(3);\n        });\n    });\n\n    describe('Methods', function() {\n        let filteredCollection;\n\n        beforeEach(function() {\n            filteredCollection = new RB.FilteredCollection(null, {\n                collection: mainCollection,\n                filters: {\n                    label: 'T',\n                },\n            });\n\n            expect(filteredCollection.length).toBe(2);\n        });\n\n        describe('setFilters', function() {\n            it('With new filter', function() {\n                filteredCollection.setFilters({\n                    label: 'O',\n                });\n\n                expect(filteredCollection.length).toBe(1);\n                expect(filteredCollection.at(0).id).toBe(1);\n            });\n\n            it('With multiple filters', function() {\n                filteredCollection.setFilters({\n                    label: 'T',\n                    bool: false,\n                });\n\n                expect(filteredCollection.length).toBe(1);\n                expect(filteredCollection.at(0).id).toBe(2);\n            });\n\n            it('{}', function() {\n                filteredCollection.setFilters({});\n\n                expect(filteredCollection.length).toBe(3);\n            });\n\n            it('null', function() {\n                filteredCollection.setFilters(null);\n\n                expect(filteredCollection.length).toBe(3);\n            });\n\n            it('undefined', function() {\n                filteredCollection.setFilters();\n\n                expect(filteredCollection.length).toBe(3);\n            });\n        });\n    });\n\n    describe('Main collection events', function() {\n        describe('With filters', function() {\n            let filteredCollection;\n\n            beforeEach(function() {\n                filteredCollection = new RB.FilteredCollection(null, {\n                    collection: mainCollection,\n                    filters: {\n                        label: 'T',\n                    },\n                });\n\n                expect(filteredCollection.length).toBe(2);\n            });\n\n            it('reset', function() {\n                mainCollection.reset([\n                    {\n                        id: 10,\n                        label: 'Monday',\n                    },\n                    {\n                        id: 11,\n                        label: 'Tuesday',\n                    },\n                ]);\n\n                expect(filteredCollection.length).toBe(1);\n                expect(filteredCollection.at(0).id).toBe(11);\n            });\n\n            describe('add', function() {\n                it('Matching filter', function() {\n                    mainCollection.add({\n                        id: 4,\n                        label: 'Test',\n                    });\n\n                    expect(filteredCollection.length).toBe(3);\n                    expect(filteredCollection.at(2).id).toBe(4);\n                });\n\n                it('Not matching filter', function() {\n                    mainCollection.add({\n                        id: 4,\n                        label: 'Four',\n                    });\n\n                    expect(filteredCollection.length).toBe(2);\n                });\n            });\n\n            describe('remove', function() {\n                it('Matching filter', function() {\n                    mainCollection.remove(mainCollection.get(2));\n\n                    expect(filteredCollection.length).toBe(1);\n                });\n\n                it('Not matching filter', function() {\n                    mainCollection.remove(mainCollection.get(0));\n\n                    expect(filteredCollection.length).toBe(2);\n                });\n            });\n        });\n\n        describe('Without filters', function() {\n            let filteredCollection;\n\n            beforeEach(function() {\n                filteredCollection = new RB.FilteredCollection(null, {\n                    collection: mainCollection,\n                });\n\n                expect(filteredCollection.length).toBe(3);\n            });\n\n            it('reset', function() {\n                mainCollection.reset([\n                    {\n                        id: 10,\n                        label: 'Monday',\n                    },\n                    {\n                        id: 11,\n                        label: 'Tuesday',\n                    },\n                ]);\n\n                expect(filteredCollection.length).toBe(2);\n            });\n\n            it('add', function() {\n                mainCollection.add({\n                    id: 4,\n                    label: 'Four',\n                });\n\n                expect(filteredCollection.length).toBe(4);\n                expect(filteredCollection.at(3).id).toBe(4);\n            });\n\n            it('remove', function() {\n                mainCollection.remove(mainCollection.get(1));\n                expect(filteredCollection.length).toBe(2);\n            });\n        });\n    });\n});\n"],"mappings":"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","ignoreList":[]}