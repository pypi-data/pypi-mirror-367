{"version":3,"file":"oauthTokensView.js","names":["xhrUnknownErrorText","gettext","OAuthTokenItem","Djblets","Config","ListItem","extend","defaults","_","apiURL","application","showRemove","prototype","OAuthTokenItemView","ListItemView","template","actionHandlers","_onDeleteClicked","RB","apiCall","url","model","get","method","success","trigger","OAuthTokensView","Backbone","View","initialize","options","collection","Collection","tokens","render","$el","html","emptyText","_$list","$","_listView","ListView","ItemView","List","prependTo"],"sources":["../../../../../../static/rb/js/accountPrefsPage/views/oauthTokensView.es6.js"],"sourcesContent":["(function() {\n\n\nconst xhrUnknownErrorText = gettext('An unexpected error occurred. Could not delete OAuth2 token.');\n\n\n/**\n * A model representing an OAuth token.\n */\nconst OAuthTokenItem = Djblets.Config.ListItem.extend({\n    defaults: _.defaults({\n        apiURL: '',\n        application: '',\n        showRemove: true,\n    }, Djblets.Config.ListItem.prototype.defaults),\n});\n\n\n/**\n * A view representing a single OAuthTokenItem.\n */\nconst OAuthTokenItemView = Djblets.Config.ListItemView.extend({\n    template: _.template(dedent`\n        <span class=\"config-token-name\"><%- application %></span>\n    `),\n\n    actionHandlers: {\n        'delete': '_onDeleteClicked',\n    },\n\n    /**\n     * Delete the OAuth2 token.\n     */\n    _onDeleteClicked() {\n        RB.apiCall({\n            url: this.model.get('apiURL'),\n            method: 'DELETE',\n            success: () => this.model.trigger('destroy'),\n        });\n    },\n});\n\n\n/**\n * A view for managing OAuth2 tokens.\n */\nRB.OAuthTokensView = Backbone.View.extend({\n    template: _.template(dedent`\n        <div class=\"oauth-token-list\">\n         <div class=\"djblets-l-config-forms-container -is-top-flush\">\n          <%- emptyText %>\n         </div>\n        </div>\n    `),\n\n    /**\n     * Initialize the view.\n     *\n     * Args:\n     *     options (object):\n     *         The view options.\n     *\n     * Option Args:\n     *     tokens (array of object):\n     *         The serialized token attributes.\n     */\n    initialize(options) {\n        this.collection = new Backbone.Collection(options.tokens, {\n            model: OAuthTokenItem,\n        });\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     RB.OAuthTokensView:\n     *     This view.\n     */\n    render() {\n        this.$el.html(this.template({\n            emptyText: _`You do not have any OAuth2 tokens.`,\n        }));\n        this._$list = this.$('.oauth-token-list');\n        this._listView = new Djblets.Config.ListView({\n            ItemView: OAuthTokenItemView,\n            model: new Djblets.Config.List({}, {\n                collection: this.collection,\n            }),\n        });\n\n        this._listView\n            .render().$el\n            .prependTo(this._$list);\n\n        return this;\n    },\n});\n\n\n})();\n"],"mappings":";;AAAA,CAAC,YAAW;EAGZ,MAAMA,mBAAmB,GAAAC,OAAA,gEAA0E;;EAGnG;AACA;AACA;EACA,MAAMC,cAAc,GAAGC,OAAO,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC;IAClDC,QAAQ,EAAEC,CAAC,CAACD,QAAQ,CAAC;MACjBE,MAAM,EAAE,EAAE;MACVC,WAAW,EAAE,EAAE;MACfC,UAAU,EAAE;IAChB,CAAC,EAAER,OAAO,CAACC,MAAM,CAACC,QAAQ,CAACO,SAAS,CAACL,QAAQ;EACjD,CAAC,CAAC;;EAGF;AACA;AACA;EACA,MAAMM,kBAAkB,GAAGV,OAAO,CAACC,MAAM,CAACU,YAAY,CAACR,MAAM,CAAC;IAC1DS,QAAQ,EAAEP,CAAC,CAACO,QAAQ,CAAO,2DAE1B,CAAC;IAEFC,cAAc,EAAE;MACZ,QAAQ,EAAE;IACd,CAAC;IAED;AACJ;AACA;IACIC,gBAAgBA,CAAA,EAAG;MACfC,EAAE,CAACC,OAAO,CAAC;QACPC,GAAG,EAAE,IAAI,CAACC,KAAK,CAACC,GAAG,CAAC,QAAQ,CAAC;QAC7BC,MAAM,EAAE,QAAQ;QAChBC,OAAO,EAAEA,CAAA,KAAM,IAAI,CAACH,KAAK,CAACI,OAAO,CAAC,SAAS;MAC/C,CAAC,CAAC;IACN;EACJ,CAAC,CAAC;;EAGF;AACA;AACA;EACAP,EAAE,CAACQ,eAAe,GAAGC,QAAQ,CAACC,IAAI,CAACtB,MAAM,CAAC;IACtCS,QAAQ,EAAEP,CAAC,CAACO,QAAQ,CAAO;AAC/B;AACA;AACA;AACA,OAEK,CAAC;IAEF;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACIc,UAAUA,CAACC,OAAO,EAAE;MAChB,IAAI,CAACC,UAAU,GAAG,IAAIJ,QAAQ,CAACK,UAAU,CAACF,OAAO,CAACG,MAAM,EAAE;QACtDZ,KAAK,EAAEnB;MACX,CAAC,CAAC;IACN,CAAC;IAED;AACJ;AACA;AACA;AACA;AACA;AACA;IACIgC,MAAMA,CAAA,EAAG;MACL,IAAI,CAACC,GAAG,CAACC,IAAI,CAAC,IAAI,CAACrB,QAAQ,CAAC;QACxBsB,SAAS,EAAApC,OAAA;MACb,CAAC,CAAC,CAAC;MACH,IAAI,CAACqC,MAAM,GAAG,IAAI,CAACC,CAAC,CAAC,mBAAmB,CAAC;MACzC,IAAI,CAACC,SAAS,GAAG,IAAIrC,OAAO,CAACC,MAAM,CAACqC,QAAQ,CAAC;QACzCC,QAAQ,EAAE7B,kBAAkB;QAC5BQ,KAAK,EAAE,IAAIlB,OAAO,CAACC,MAAM,CAACuC,IAAI,CAAC,CAAC,CAAC,EAAE;UAC/BZ,UAAU,EAAE,IAAI,CAACA;QACrB,CAAC;MACL,CAAC,CAAC;MAEF,IAAI,CAACS,SAAS,CACTN,MAAM,CAAC,CAAC,CAACC,GAAG,CACZS,SAAS,CAAC,IAAI,CAACN,MAAM,CAAC;MAE3B,OAAO,IAAI;IACf;EACJ,CAAC,CAAC;AAGF,CAAC,EAAE,CAAC","ignoreList":[]}