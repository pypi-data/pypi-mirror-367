.. default-intersphinx:: djblets3.x rb5.x


================================
Review Board 5.0.4 Release Notes
================================

**Release date**: March 28, 2023


Installation/Upgrade
====================

Review Board 5.0.4 is compatible with Python 3.7-3.11.

Follow our :ref:`installation guide <installing-reviewboard-toc>` to prepare
your system for Review Board or to upgrade your existing install.

To install this release, run:

.. code-block:: console

    $ pip3 install ReviewBoard==5.0.4

To learn more, see:

* :ref:`Documentation <reviewboard-docs>`
* :ref:`Installing Review Board on Docker <installation-docker>`
* `Power Pack for Review Board <https://www.reviewboard.org/powerpack/>`_
* :pypi:`Review Board on PyPI <reviewboard>`
* `Review Board on GitHub <https://github.com/reviewboard/reviewboard>`_

For assistance with your server, `talk to us about support <Review Board
Support_>`_.


.. _Review Board Support: https://www.reviewboard.org/support/


Compatibility Changes
=====================

We've fixed several compatibility issues found throughout Review Board 5.
Details on these changes can be found in sections below.

* Renamed the root-level links to the "all reviews" and "all comments" APIs
  introduced in Review Board 5.

* Fixed a regression in the default Apache configuration generated by
  :ref:`rb-site-install`.

* Fixed compatibility issues with `Review Bot`_ 3.x.

* Fixed compatibility issues with Elasticsearch_ 7.

* Our :ref:`Docker images <installation-docker>` now include libraries
  needed for Single Sign-On support.


.. _Elasticsearch: https://www.elastic.co/what-is/elasticsearch
.. _Review Bot: https://www.reviewboard.org/downloads/reviewbot/


Web API
=======

* Renamed the new "all reviews" and "all comments" APIs introduced in
  Review Board 5.

  We made the hard decision to rename the links on the root of the API for
  the following APIs:

  * Renamed the :ref:`Root Reviews API <webapi2.0-root-review-list-resource>`
    link from ``reviews`` to ``all_reviews``

  * Renamed the :ref:`Root Diff Comments API
    <webapi2.0-root-diff-comment-list-resource>` link from ``diff_comments``
    to ``all_diff_comments``

  * Renamed the :ref:`Root General Comments API
    <webapi2.0-root-general-comment-list-resource>` link from
    ``general_comments`` to ``all_general_comments``.

  * Renamed the :ref:`Root File Attachment Comments API
    <webapi2.0-root-file-attachment-comment-list-resource>` link from
    ``file_attachment_comments`` to ``all_file_attachment_comments``.

  The old link names conflicted with existing URI template names, causing
  consumers of the old names to encounter conflicts. Since these APIs are
  relatively new, we've decided it's better to rename them rather than impact
  older clients.

* Fixed a regression in diff-related APIs where syntax highlighting could not
  be disabled.

  This regressed in Review Board :doc:`5.0.2 <5.0.2>` and :doc:`5.0.3 <5.0.3>`
  regressed. It impacted some of `Review Bot`_'s code checking tools, and may
  have impacted other tools and services as well.


Bug Fixes
=========

Installation
------------

* Fixed a regression in the default Apache configuration generated by
  :ref:`rb-site-install`.

  Review Board :doc:`5.0.3 <5.0.3>` included several new default web server
  configurations when creating a new site. However, it also regressed the
  Apache configuration when using Apache 2.4 or higher.

  The corrected examples were available on the :ref:`creating-sites`
  documentation, and a corrected template is now shipped with this release.


Diff Viewer
-----------

* Fixed a bad summary in the Trojan Source warning banner.

  The Trojan Source warning banner no longer mentions invisible characters may
  be present in the summary if there are no invisible characters.

* Fixed bad links to the CVE reports in the Trojan Source warning banner.

  Due to a rendering issue, the links weren't all pointing to valid CVE
  reports.


Review Requests
---------------
* Newlines in the bugs field are now stripped, avoiding bad bug IDs.


Search
------

* Fixed compatibility issues with Elasticsearch 7.

  The search backend used by Review Board contains a compatibility bug when
  searching some fields in Elasticsearch 7. We've worked around this in this
  release.

* Improved assistance when dealing with incompatible Elasticsearch
  configurations.

  The Elasticsearch configuration form has been improved to better help
  provide guidance when incompatible :pypi:`elasticsearch` modules are
  installed or fail to load.


Single Sign-On
--------------

* Fixed crashes when redirecting or linking a user account after a SAML login.

* Fixed retaining the login URL when a SSO backend is configured for
  automatic login.

  Automatic login is an experimental feature where visiting the standard login
  page automatically initiates Single Single Sign-On without having to click a
  button. `Contact support <Review Board Support_>`_ to learn more.


Contributors
============

* Christian Hammond
* David Trowbridge
* Michelle Aubin
