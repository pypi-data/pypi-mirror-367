!function(){var e,i,n,o,t,s;t=this,s=function(t,e){"use strict";let i=e.spina(e=class extends RB.PageView{})||e;e={PageView:i};t.Admin=e,t.BaseAdminPageView=i,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})},"object"==typeof exports&&"undefined"!=typeof module?s(exports,require("@beanbag/spina")):"function"==typeof define&&define.amd?define(["exports","@beanbag/spina"],s):s((t="undefined"!=typeof globalThis?globalThis:t||self).RB=t.RB||{},t.Spina),e=window,i=function(t,e){"use strict";var i=Array.prototype.slice,n=t.console,c=void 0===n?function(){}:function(t){n.error(t)};function o(l,d,h){(h=h||e||t.jQuery)&&(d.prototype.option||(d.prototype.option=function(t){h.isPlainObject(t)&&(this.options=h.extend(!0,this.options,t))}),h.fn[l]=function(t){var e,n,o,s,r,a;return"string"==typeof t?(e=i.call(arguments,1),o=e,r="$()."+l+'("'+(n=t)+'")',(e=this).each(function(t,e){var i,e=h.data(e,l);e?(i=e[n])&&"_"!=n.charAt(0)?(i=i.apply(e,o),s=void 0===s?i:s):c(r+" is not a valid method"):c(l+" not initialized. Cannot call methods, i.e. "+r)}),void 0!==s?s:e):(a=t,this.each(function(t,e){var i=h.data(e,l);i?(i.option(a),i._init()):(i=new d(e,a),h.data(e,l,i))}),this)},s(h))}function s(t){t&&!t.bridget&&(t.bridget=o)}return s(e||t.jQuery),o},"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("jquery")):e.jQueryBridget=i(e,e.jQuery),s="undefined"!=typeof window?window:this,t=function(){function t(){}var e=t.prototype;return e.on=function(t,e){var i;if(t&&e)return-1==(i=(i=this._events=this._events||{})[t]=i[t]||[]).indexOf(e)&&i.push(e),this},e.once=function(t,e){var i;if(t&&e)return this.on(t,e),((i=this._onceEvents=this._onceEvents||{})[t]=i[t]||{})[e]=!0,this},e.off=function(t,e){t=this._events&&this._events[t];if(t&&t.length)return-1!=(e=t.indexOf(e))&&t.splice(e,1),this},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],o=0;o<i.length;o++){var s=i[o];n&&n[s]&&(this.off(t,s),delete n[s]),s.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t},"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():s.EvEmitter=t(),s=window,t=function(){"use strict";function f(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}var e="undefined"==typeof console?function(){}:function(t){console.error(t)},_=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],y=_.length;function v(t){t=getComputedStyle(t);return t||e("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}var w,b=!1;function x(t){if(b||(b=!0,(h=document.createElement("div")).style.width="200px",h.style.padding="1px 2px 3px 4px",h.style.borderStyle="solid",h.style.borderWidth="1px 2px 3px 4px",h.style.boxSizing="border-box",(d=document.body||document.documentElement).appendChild(h),s=v(h),w=200==Math.round(f(s.width)),x.isBoxSizeOuter=w,d.removeChild(h)),(t="string"==typeof t?document.querySelector(t):t)&&"object"==typeof t&&t.nodeType){var e=v(t);if("none"==e.display){for(var i={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=0;n<y;n++)i[_[n]]=0;return i}for(var o={},s=(o.width=t.offsetWidth,o.height=t.offsetHeight,o.isBorderBox="border-box"==e.boxSizing),r=0;r<y;r++){var a=_[r],l=e[a],l=parseFloat(l);o[a]=isNaN(l)?0:l}var d=o.paddingLeft+o.paddingRight,h=o.paddingTop+o.paddingBottom,t=o.marginLeft+o.marginRight,c=o.marginTop+o.marginBottom,u=o.borderLeftWidth+o.borderRightWidth,m=o.borderTopWidth+o.borderBottomWidth,g=s&&w,p=f(e.width),p=(!1!==p&&(o.width=p+(g?0:d+u)),f(e.height));return!1!==p&&(o.height=p+(g?0:h+m)),o.innerWidth=o.width-(d+u),o.innerHeight=o.height-(h+m),o.outerWidth=o.width+t,o.outerHeight=o.height+c,o}}return x},"function"==typeof define&&define.amd?define("get-size/get-size",t):"object"==typeof module&&module.exports?module.exports=t():s.getSize=t(),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var i=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(t,e){return t[i](e)}}),n=window,o=function(i,s){var l={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},e=Array.prototype.slice,d=(l.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?e.call(t):[t]},l.removeFrom=function(t,e){e=t.indexOf(e);-1!=e&&t.splice(e,1)},l.getParent=function(t,e){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,s(t,e))return t},l.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},l.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.filterFindElements=function(t,n){t=l.makeArray(t);var o=[];return t.forEach(function(t){if(t instanceof HTMLElement)if(n){s(t,n)&&o.push(t);for(var e=t.querySelectorAll(n),i=0;i<e.length;i++)o.push(e[i])}else o.push(t)}),o},l.debounceMethod=function(t,e,n){n=n||100;var o=t.prototype[e],s=e+"Timeout";t.prototype[e]=function(){var t=this[s],e=(clearTimeout(t),arguments),i=this;this[s]=setTimeout(function(){o.apply(i,e),delete i[s]},n)}},l.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},l.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()},i.console);return l.htmlInit=function(r,a){l.docReady(function(){var t=l.toDashed(a),n="data-"+t,e=document.querySelectorAll("["+n+"]"),t=document.querySelectorAll(".js-"+t),e=l.makeArray(e).concat(l.makeArray(t)),o=n+"-options",s=i.jQuery;e.forEach(function(e){var t,i=e.getAttribute(n)||e.getAttribute(o);try{t=i&&JSON.parse(i)}catch(t){return void(d&&d.error("Error parsing "+n+" on "+e.className+": "+t))}i=new r(e,t);s&&s.data(e,a,i)})})},l},"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(t){return o(n,t)}):"object"==typeof module&&module.exports?module.exports=o(n,require("desandro-matches-selector")):n.fizzyUIUtils=o(n,n.matchesSelector),s=window,t=function(t,e){"use strict";var i=document.documentElement.style,n="string"==typeof i.transition?"transition":"WebkitTransition",i="string"==typeof i.transform?"transform":"WebkitTransform",o={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[n],s={transform:i,transition:n,transitionDuration:n+"Duration",transitionProperty:n+"Property",transitionDelay:n+"Delay"};function r(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}t=r.prototype=Object.create(t.prototype);t.constructor=r,t._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},t.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},t.getSize=function(){this.size=e(this.element)},t.css=function(t){var e,i=this.element.style;for(e in t)i[s[e]||e]=t[e]},t.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=t[e?"left":"right"],t=t[i?"top":"bottom"],o=parseFloat(n),s=parseFloat(t),r=this.layout.size;-1!=n.indexOf("%")&&(o=o/100*r.width),-1!=t.indexOf("%")&&(s=s/100*r.height),o=isNaN(o)?0:o,s=isNaN(s)?0:s,o-=e?r.paddingLeft:r.paddingRight,s-=i?r.paddingTop:r.paddingBottom,this.position.x=o,this.position.y=s},t.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),o=i?"right":"left",s=this.position.x+t[i?"paddingLeft":"paddingRight"],i=(e[i?"left":"right"]=this.getXValue(s),e[o]="",n?"paddingTop":"paddingBottom"),s=n?"bottom":"top",o=this.position.y+t[i];e[n?"top":"bottom"]=this.getYValue(o),e[s]="",this.css(e),this.emitEvent("layout",[this])},t.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},t.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},t._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,o=t==this.position.x&&e==this.position.y;this.setPosition(t,e),o&&!this.isTransitioning?this.layoutPosition():((o={}).transform=this.getTranslate(t-i,e-n),this.transition({to:o,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0}))},t.getTranslate=function(t,e){return"translate3d("+(t=this.layout._getOption("originLeft")?t:-t)+"px, "+(e=this.layout._getOption("originTop")?e:-e)+"px, 0)"},t.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},t.moveTo=t._transitionTo,t.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},t._nonTransition=function(t){for(var e in this.css(t.to),t.isCleaning&&this._removeStyles(t.to),t.onTransitionEnd)t.onTransitionEnd[e].call(this)},t.transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e,i=this._transn;for(e in t.onTransitionEnd)i.onEnd[e]=t.onTransitionEnd[e];for(e in t.to)i.ingProperties[e]=!0,t.isCleaning&&(i.clean[e]=!0);t.from&&(this.css(t.from),this.element.offsetHeight,0),this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var a="opacity,"+i.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()}),l=(t.enableTransition=function(){var t;this.isTransitioning||(t=this.layout.options.transitionDuration,this.css({transitionProperty:a,transitionDuration:t="number"==typeof t?t+"ms":t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(o,this,!1))},t.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},t.onotransitionend=function(t){this.ontransitionend(t)},{"-webkit-transform":"transform"}),d=(t.ontransitionend=function(t){var e,i;t.target===this.element&&(e=this._transn,i=l[t.propertyName]||t.propertyName,delete e.ingProperties[i],function(t){for(var e in t)return;return 1}(e.ingProperties)&&this.disableTransition(),i in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[i]),i in e.onEnd&&(e.onEnd[i].call(this),delete e.onEnd[i]),this.emitEvent("transitionEnd",[this]))},t.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(o,this,!1),this.isTransitioning=!1},t._removeStyles=function(t){var e,i={};for(e in t)i[e]="";this.css(i)},{transitionProperty:"",transitionDuration:"",transitionDelay:""});return t.removeTransitionStyles=function(){this.css(d)},t.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},t.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},t.remove=function(){n&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),this.hide()):this.removeElem()},t.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},t.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},t.getHideRevealTransitionEndProperty=function(t){var e,t=this.layout.options[t];if(t.opacity)return"opacity";for(e in t)return e},t.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},t.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},t.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},r},"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],t):"object"==typeof module&&module.exports?module.exports=t(require("ev-emitter"),require("get-size")):(s.Outlayer={},s.Outlayer.Item=t(s.EvEmitter,s.getSize)),function(o,s){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(t,e,i,n){return s(o,t,e,i,n)}):"object"==typeof module&&module.exports?module.exports=s(o,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):o.Outlayer=s(o,o.EvEmitter,o.getSize,o.fizzyUIUtils,o.Outlayer.Item)}(window,function(t,e,o,n,s){"use strict";function i(){}var r=t.console,a=t.jQuery,l=0,d={};function h(t,e){var i=n.getQueryElement(t);i?(this.element=i,a&&(this.$element=a(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e),e=++l,this.element.outlayerGUID=e,(d[e]=this)._create(),this._getOption("initLayout")&&this.layout()):r&&r.error("Bad element for "+this.constructor.namespace+": "+(i||t))}h.namespace="outlayer",h.Item=s,h.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var c=h.prototype;function u(t){function e(){t.apply(this,arguments)}return(e.prototype=Object.create(t.prototype)).constructor=e}n.extend(c,e.prototype),c.option=function(t){n.extend(this.options,t)},c._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},h.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},c._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},c.reloadItems=function(){this.items=this._itemize(this.element.children)},c._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],o=0;o<e.length;o++){var s=new i(e[o],this);n.push(s)}return n},c._filterFindItemElements=function(t){return n.filterFindElements(t,this.options.itemSelector)},c.getItemElements=function(){return this.items.map(function(t){return t.element})},c.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),t=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},c._init=c.layout,c._resetLayout=function(){this.getSize()},c.getSize=function(){this.size=o(this.element)},c._getMeasurement=function(t,e){var i,n=this.options[t];n?("string"==typeof n?i=this.element.querySelector(n):n instanceof HTMLElement&&(i=n),this[t]=i?o(i)[e]:n):this[t]=0},c.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},c._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},c._layoutItems=function(t,i){var n;this._emitCompleteOnItems("layout",t),t&&t.length&&(n=[],t.forEach(function(t){var e=this._getItemLayoutPosition(t);e.item=t,e.isInstant=i||t.isLayoutInstant,n.push(e)},this),this._processLayoutQueue(n))},c._getItemLayoutPosition=function(){return{x:0,y:0}},c._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},c.updateStagger=function(){var t=this.options.stagger;if(null!=t)return this.stagger=function(t){if("number"==typeof t)return t;var t=t.match(/(^\d*\.?\d*)(\w*)/),e=t&&t[1],t=t&&t[2];if(!e.length)return 0;e=parseFloat(e);t=m[t]||1;return e*t}(t),this.stagger;this.stagger=0},c._positionItem=function(t,e,i,n,o){n?t.goTo(e,i):(t.stagger(o*this.stagger),t.moveTo(e,i))},c._postLayout=function(){this.resizeContainer()},c.resizeContainer=function(){var t;this._getOption("resizeContainer")&&(t=this._getContainerSize())&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))},c._getContainerSize=i,c._setContainerMeasure=function(t,e){var i;void 0!==t&&((i=this.size).isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px")},c._emitCompleteOnItems=function(e,t){var i=this;function n(){i.dispatchEvent(e+"Complete",null,[t])}var o,s=t.length;function r(){++o==s&&n()}t&&s?(o=0,t.forEach(function(t){t.once(e,r)})):n()},c.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;this.emitEvent(t,n),a&&(this.$element=this.$element||a(this.element),e?((n=a.Event(e)).type=t,this.$element.trigger(n,i)):this.$element.trigger(t,i))},c.ignore=function(t){t=this.getItem(t);t&&(t.isIgnored=!0)},c.unignore=function(t){t=this.getItem(t);t&&delete t.isIgnored},c.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},c.unstamp=function(t){(t=this._find(t))&&t.forEach(function(t){n.removeFrom(this.stamps,t),this.unignore(t)},this)},c._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n.makeArray(t)},c._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},c._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},c._manageStamp=i,c._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,t=o(t);return{left:e.left-i.left-t.marginLeft,top:e.top-i.top-t.marginTop,right:i.right-e.right-t.marginRight,bottom:i.bottom-e.bottom-t.marginBottom}},c.handleEvent=n.handleEvent,c.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},c.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},c.onresize=function(){this.resize()},n.debounceMethod(h,"onresize",100),c.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},c.needsResizeLayout=function(){var t=o(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},c.addItems=function(t){t=this._itemize(t);return t.length&&(this.items=this.items.concat(t)),t},c.appended=function(t){t=this.addItems(t);t.length&&(this.layoutItems(t,!0),this.reveal(t))},c.prepended=function(t){var e,t=this._itemize(t);t.length&&(e=this.items.slice(0),this.items=t.concat(e),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(e))},c.reveal=function(t){var i;this._emitCompleteOnItems("reveal",t),t&&t.length&&(i=this.updateStagger(),t.forEach(function(t,e){t.stagger(e*i),t.reveal()}))},c.hide=function(t){var i;this._emitCompleteOnItems("hide",t),t&&t.length&&(i=this.updateStagger(),t.forEach(function(t,e){t.stagger(e*i),t.hide()}))},c.revealItemElements=function(t){t=this.getItems(t);this.reveal(t)},c.hideItemElements=function(t){t=this.getItems(t);this.hide(t)},c.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},c.getItems=function(t){t=n.makeArray(t);var e=[];return t.forEach(function(t){t=this.getItem(t);t&&e.push(t)},this),e},c.remove=function(t){t=this.getItems(t);this._emitCompleteOnItems("remove",t),t&&t.length&&t.forEach(function(t){t.remove(),n.removeFrom(this.items,t)},this)},c.destroy=function(){var t=this.element.style,t=(t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize(),this.element.outlayerGUID);delete d[t],delete this.element.outlayerGUID,a&&a.removeData(this.element,this.constructor.namespace)},h.data=function(t){t=(t=n.getQueryElement(t))&&t.outlayerGUID;return t&&d[t]},h.create=function(t,e){var i=u(h);return i.defaults=n.extend({},h.defaults),n.extend(i.defaults,e),i.compatOptions=n.extend({},h.compatOptions),i.namespace=t,i.data=h.data,i.Item=u(s),n.htmlInit(i,t),a&&a.bridget&&a.bridget(t,i),i};var m={ms:1,s:1e3};return h.Item=s,h}),t=window,s=function(t,a){var t=t.create("masonry"),e=(t.compatOptions.fitWidth="isFitWidth",t.prototype);return e._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},e.measureColumns=function(){this.getContainerWidth(),this.columnWidth||(t=(t=this.items[0])&&t.element,this.columnWidth=t&&a(t).outerWidth||this.containerWidth);var t=this.columnWidth+=this.gutter,e=this.containerWidth+this.gutter,i=e/t,e=t-e%t,i=Math[e&&e<1?"round":"floor"](i);this.cols=Math.max(i,1)},e.getContainerWidth=function(){var t=this._getOption("fitWidth")?this.element.parentNode:this.element,t=a(t);this.containerWidth=t&&t.innerWidth},e._getItemLayoutPosition=function(t){t.getSize();for(var e=t.size.outerWidth%this.columnWidth,e=Math[e&&e<1?"round":"ceil"](t.size.outerWidth/this.columnWidth),e=Math.min(e,this.cols),i=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](e,t),n={x:this.columnWidth*i.col,y:i.y},o=i.y+t.size.outerHeight,s=e+i.col,r=i.col;r<s;r++)this.colYs[r]=o;return n},e._getTopColPosition=function(t){var t=this._getTopColGroup(t),e=Math.min.apply(Math,t);return{col:t.indexOf(e),y:e}},e._getTopColGroup=function(t){if(t<2)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;n<i;n++)e[n]=this._getColGroupY(n,t);return e},e._getColGroupY=function(t,e){return e<2?this.colYs[t]:(t=this.colYs.slice(t,t+e),Math.max.apply(Math,t))},e._getHorizontalColPosition=function(t,e){var i=this.horizontalColIndex%this.cols,i=1<t&&i+t>this.cols?0:i,e=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=e?i+t:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,t)}},e._manageStamp=function(t){var e=a(t),t=this._getElementOffset(t),i=this._getOption("originLeft")?t.left:t.right,n=i+e.outerWidth,i=Math.floor(i/this.columnWidth),i=Math.max(0,i),o=Math.floor(n/this.columnWidth);o-=n%this.columnWidth?0:1;for(var o=Math.min(this.cols-1,o),s=(this._getOption("originTop")?t.top:t.bottom)+e.outerHeight,r=i;r<=o;r++)this.colYs[r]=Math.max(s,this.colYs[r])},e._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},e._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},e.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},t},"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],s):"object"==typeof module&&module.exports?module.exports=s(require("outlayer"),require("get-size")):t.Masonry=s(t.Outlayer,t.getSize),RB.Admin.ChangeListPage=RB.Page.extend({defaults:_.defaults({actions:[],selectionCount:0},_.result(RB.Page.prototype.defaults)),initialize(){RB.Page.prototype.initialize.apply(this,arguments),this.selection=new Backbone.Collection,this.listenTo(this.selection,"add remove reset",()=>this.set("selectionCount",this.selection.length))},select(t){this.selection.add({id:t})},unselect(t){this.selection.remove(this.selection.get(t))}}),RB.Admin.DashboardPage=RB.Page.extend({defaults(){return _.defaults({supportData:null,widgetsData:[]},_.result(RB.Page.prototype.defaults))},initialize(){RB.Page.prototype.initialize.apply(this,arguments),this.widgets=new Backbone.Collection},loadWidgets(i){var n={},e=this.get("widgetsData");this.widgets.reset();for(let t=0;t<e.length;t++){var o=e[t];try{let t=n[o.modelClass],e=n[o.viewClass];void 0===t&&(t=Djblets.getObjectByName(o.modelClass),n[o.modelClass]=t),void 0===e&&(e=Djblets.getObjectByName(o.viewClass),n[o.viewClass]=e);var s=new t(_.defaults({id:o.id},o.modelAttrs),o.modelOptions);this.widgets.add(s),i({domID:o.domID,ViewType:e,viewOptions:o.viewOptions,widgetModel:s})}catch(t){console.error('Unable to render administration widget "%s": %s',o.id,t)}}}}),RB.Admin.InlineFormGroup=Backbone.Model.extend({defaults:{initialInlines:0,maxInlines:0,minInlines:0,prefix:null},initialize(){this.inlines=new Backbone.Collection([],{model:RB.Admin.InlineForm})},canAddInline(){var t=this.get("maxInlines");return null===t||this.inlines.length<t}}),RB.Admin.InlineForm=Backbone.Model.extend({defaults:{index:null,isInitial:!1,prefix:null}}),RB.Admin.Widget=Backbone.Model.extend(),RB.Admin.NewsWidget=RB.Admin.Widget.extend({defaults:_.defaults({maxItems:5,newsItems:null,newsURL:null,rssURL:null,subscribeURL:null},RB.Admin.Widget.prototype.defaults),loadNews(){this.trigger("loadingNews"),$.ajax(this.get("rssURL"),{accepts:{xml:"application/rss+xml"},dataType:"xml",success:t=>{var e=this.get("maxItems"),t=$(t).find(`item:lt(${e})`);this.set("newsItems",_.map(t,t=>{t=$(t);return{date:moment(t.find("pubDate").text(),"ddd, DD MMM YYYY HH:mm:ss ZZ"),title:t.find("title").text(),url:t.find("link").text()}}))},error:()=>{this.set("newsItems",[])}})}}),RB.Admin.ServerActivityWidget=RB.Admin.Widget.extend({defaults:_.defaults({data:{changeDescriptions:[],comments:[],reviewRequests:[],reviews:[]},rangeStart:"",rangeEnd:"",show:{changeDescriptions:!0,comments:!0,legend:!0,reviewRequests:!0,reviews:!0}},RB.Admin.Widget.prototype.defaults),loadData(t){fetch(`widget-activity/?range_start=${this.attributes.rangeStart}&range_end=${this.attributes.rangeEnd}&direction=`+t).then(t=>t.json()).then(t=>{this.set({rangeStart:t.range.range_start,rangeEnd:t.range.range_end,data:{changeDescriptions:t.activity_data.change_descriptions,comments:t.activity_data.comments,reviewRequests:t.activity_data.review_requests,reviews:t.activity_data.reviews}}),this.trigger("updated")})}}),RB.Admin.ChangeFormPageView=RB.Admin.PageView.extend({initialize(t){RB.Admin.PageView.prototype.initialize.call(this,t),this.formID=t.formID,this.formView=null,this.inlineGroupViews=[]},renderPage(){RB.Admin.PageView.prototype.renderPage.call(this),console.assert(0===this.inlineGroupViews.length),this.formView=new RB.FormView({el:$("#"+this.formID)}),this.formView.render(),this.$(".rb-c-admin-form-inline-group").each((t,e)=>{var i=new RB.Admin.InlineFormGroup({prefix:$(e).data("prefix")});const n=new RB.Admin.InlineFormGroupView({el:e,model:i});n.render(),this.inlineGroupViews.push(n),this.listenTo(n,"inlineFormAdded",()=>this.formView.setupFormWidgets(n.$el))})}});{const r=RB.DrawerView.extend({template:_.template(`<p class="rb-c-drawer__summary"></p>
<div class="rb-c-drawer__actions">
 <ul class="rb-c-drawer__action-group">
  <% _.each(actions, function(actionInfo) { %>
   <li class="rb-c-drawer__action"
       data-action-id="<%- actionInfo.id %>">
    <strong><%- actionInfo.label %></strong>
   </li>
  <% }) %>
 </ul>
</div>`),events:{"click .rb-c-drawer__action":"_onActionClicked"},initialize(t){this.actions=t.actions},render(){return RB.DrawerView.prototype.render.call(this),this.$content.html(this.template({actions:this.actions})),this.$summary=this.$(".rb-c-drawer__summary"),this},_onActionClicked(t){t.stopPropagation(),t.preventDefault(),this.trigger("actionClicked",$(t.currentTarget).data("action-id"))}});RB.Admin.ChangeListPageView=RB.Admin.PageView.extend({events:{"change #action-toggle":"_onToggleAllCheckboxesChanged","change .action-select":"_onRowSelected"},initialize(){RB.Admin.PageView.prototype.initialize.apply(this,arguments),this.drawerShown=!1},renderPage(){RB.Admin.PageView.prototype.renderPage.call(this);var t=this.model,e=(this._$changelist=this.$pageContent.children(".rb-c-admin-change-list"),this._$form=this._$changelist.children(".rb-c-admin-change-list__form"),this._$datagrid=this._$form.children(".rb-c-admin-change-list__results"),this._datagrid=this._$datagrid.data("datagrid"),this._$actions=this._$form.find('select[name="action"]'),new r({actions:t.get("actions")}));this.setDrawer(e),this.listenTo(e,"actionClicked",t=>{this._$actions.children(`option[value="${t}"]`).prop("selected",!0),this._$form.submit()});const i=t.get("modelName").toLowerCase(),n=t.get("modelNamePlural").toLowerCase();this.listenTo(t,"change:selectionCount",(t,e)=>{this.drawer.$summary.text(interpolate(ngettext("%(count)s %(modelNameLower)s selected","%(count)s %(modelNameLowerPlural)s selected",e),{count:e,modelNameLower:i,modelNameLowerPlural:n},!0));e=0<e;e!==this._drawerShown&&(e?this.drawer.show():this.drawer.hide(),this._drawerShown=e)})},onResize(){this.resizeElementForFullHeight(this._$changelist),this.resizeElementForFullHeight(this._$form),this._datagrid.resizeToFit()},_onToggleAllCheckboxesChanged(t){t=$(t.target);this._$datagrid.find(".action-select").prop("checked",t.prop("checked")).change()},_onRowSelected(t){var t=$(t.target),e=t.val();t.prop("checked")?this.model.select(e):this.model.unselect(e)}})}RB.Admin.DashboardPageView=RB.Admin.PageView.extend({events:{"click .js-action-remove-widget":"_onRemoveWidgetClicked"},initialize(){RB.Admin.PageView.prototype.initialize.apply(this,arguments),this._widgetViews={},this._widgetWidths={},this._orderedWidgets=[],this._$dashboardView=null,this._$widgetsContainer=null,this._$widgetsMain=null,this._$widgets=null,this._masonry=null},renderPage(){RB.Admin.PageView.prototype.renderPage.call(this),this._$dashboardView=this.$("#admin-dashboard"),this._$widgetsContainer=this._$dashboardView.find(".rb-c-admin-widgets"),this._$widgetsMain=this._$widgetsContainer.children(".rb-c-admin-widgets__main"),this._$widgets=this._$widgetsMain.children(".rb-c-admin-widget");var t=this._$widgetsContainer.children(".rb-c-admin-widgets__sizer-gutter"),e=this._$widgetsContainer.children(".rb-c-admin-widgets__sizer-column"),e=(this._masonry=new Masonry(this._$widgetsMain[0],{columnWidth:e[0],gutter:t[0],transitionDuration:0,initLayout:!1}),this.model.get("supportData"));e&&new RB.SupportBannerView({el:$("#support-banner"),supportData:this.model.get("supportData")}).render(),this._loadWidgets(),this._masonry.on("layoutComplete",this._onLayoutComplete.bind(this)),this._$dashboardView.css("visibility","visible")},_loadWidgets(){const o=[];this.model.loadWidgets(t=>{const e=t.widgetModel,i=new t.ViewType(_.defaults({el:$("#"+t.domID),model:e},t.viewOptions));i.$el.addClass("js-masonry-item"),i.render(),this.listenTo(i,"sizeChanged",()=>this._onWidgetSizeChanged(e.id,i.$el));var t=i.el,n=t.offsetWidth;this._widgetViews[e.id]=i,this._widgetWidths[e.id]=n,o.push({el:t,index:0,isFullWidth:i.$el.hasClass("-is-full-size"),width:n})}),o.sort((t,e)=>{if(t.isFullWidth&&!e.isFullWidth)return-1;if(!t.isFullWidth&&e.isFullWidth)return 1;if(!t.isFullWidth&&!e.isFullWidth&&t.width!==e.width){if(t.width>e.width)return-1;if(t.width<e.width)return 1}return t.index-e.index}),this._masonry.items=[],this._masonry.addItems(_.pluck(o,"el")),this._masonry.layout()},_onLayoutComplete(){this.model.widgets.each(t=>{var e=this._widgetViews[t.id],i=e.$el.width();i!==this._widgetWidths[t.id]&&(e.updateSize(),this._widgetWidths[t.id]=i)})},_onWidgetSizeChanged(t,e){e=e.width();e!==this._widgetWidths[t]&&(this._widgetWidths[t]=e,this._masonry.layout())}}),RB.Admin.InlineFormGroupView=Backbone.View.extend({events:{"click .rb-c-admin-form-inline-group__add-action":"_onAddClicked"},initialize(){this._$addButton=null,this._$inlineTemplate=null,this._$inlines=null,this._inlineViews=[]},render(){const t=this.model;var e=t.get("prefix"),i=this.$el.children(".rb-c-admin-form-inline-group__inlines"),n=(console.assert(1===i.length),this.$el.children(".rb-c-admin-form-inline-group__actions"));console.assert(1===n.length);const o=n.children(".rb-c-admin-form-inline-group__add-action");console.assert(1===o.length),this._$inlines=i,this._$inlineTemplate=i.children(".-is-template").detach().removeClass("-is-template"),console.assert(1===this._$inlineTemplate.length);var n=i.children(`#id_${e}-INITIAL_FORMS`),s=i.children(`#id_${e}-MAX_NUM_FORMS`),r=i.children(`#id_${e}-MIN_NUM_FORMS`);const a=i.children(`#id_${e}-TOTAL_FORMS`);console.assert(1===n.length),console.assert(1===s.length),console.assert(1===r.length),console.assert(1===a.length);e=s.val();return t.set({initialInlines:parseInt(n.val(),10),maxInlines:""===e?null:parseInt(e,10),minInlines:parseInt(r.val(),10)}),this.listenTo(t.inlines,"update",()=>{o.toggle(t.canAddInline()),a.val(t.inlines.length)}),this.listenTo(t.inlines,"remove",this._onInlineRemoved),i.children(".rb-c-admin-form-inline").each((t,e)=>{this._setupInlineForm(e,{index:t,isInitial:!0})}),console.assert(parseInt(a.val(),10)===t.inlines.length),this},addInlineForm(){var t=this.model.inlines.length,e=this._$inlineTemplate.clone(),i=this._setupInlineForm(e[0]);return i.model.set("index",t),this._$inlines.append(e),this.trigger("inlineFormAdded",i),i},_setupInlineForm(t,e){var i=this.model,e=new RB.Admin.InlineForm(_.extend({prefix:i.get("prefix")},e)),t=new RB.Admin.InlineFormView({el:t,model:e});return t.render(),this._inlineViews.push(t),i.inlines.add(e),t},_onInlineRemoved(t){var t=t.get("index"),e=this._inlineViews[t];this._inlineViews.splice(t,1),e.remove(),this._inlineViews.forEach((t,e)=>t.model.set("index",e)),this.trigger("inlineFormRemoved",e)},_onAddClicked(t){t.preventDefault(),t.stopPropagation(),this.addInlineForm()}}),RB.Admin.InlineFormView=Backbone.View.extend({events:{"click .rb-c-admin-form-inline__delete-action":"_onDeleteClicked"},initialize(){this._$removeButton=null,this._$title=null},render(){return this._$removeButton=this.$(".rb-c-admin-form-inline__delete-action"),this._$title=this.$(".rb-c-admin-form-inline__title-index"),this.listenTo(this.model,"change:index",this._onIndexChanged),this},_onIndexChanged(){var t=this.model.get("index"),e=this.model.get("prefix");const n=new RegExp(`(${e}-(\\d+|__prefix__))`),o=e+"-"+t;this.el.id=o,this._$title.text("#"+(t+1)),function e(i){i.id&&(i.id=i.id.replace(n,o)),i.name&&(i.name=i.name.replace(n,o)),i.htmlFor&&(i.htmlFor=i.htmlFor.replace(n,o));for(let t=i.firstChild;null!==t;t=t.nextSibling)e(t)}(this.el)},_onDeleteClicked(t){this.model.get("isInitial")||(t.preventDefault(),t.stopPropagation(),confirm(gettext("Are you sure you want to delete this? This cannot be undone."))&&this.model.destroy())}}),RB.SupportBannerView=Backbone.View.extend({_loadingHTML:_.template(`<h2><%- titleText %></h2>
<p><span class="djblets-o-spinner"></span></p>`)({titleText:gettext("Retrieving support information...")}),_errorHTML:_.template(`<h2><%- titleText %></h2>
<p><%- bodyText %></p>
<p><%= fileText %></p>`)({titleText:gettext("Failed to retrieve support information"),bodyText:gettext("We could not communicate with the Beanbag, Inc. server to retrieve your support information. You may be behind a firewall or have no Internet access."),fileText:gettext('You may file an issue on our <a href="https://reviewboard.googlegroups.com">community support tracker.</a>')}),initialize(t){var e=new Date;console.assert(null===RB.SupportBannerView.instance),RB.SupportBannerView.instance=this,_.bindAll(this,"_onError"),window.addEventListener("error",this._onError,!0),this._script=$("<script>").attr("src",RB.SupportBannerView.supportURL+"?"+$.param({"support-data":t.supportData,callback:"RB.SupportBannerView.instance.receive",_:e.valueOf()})).get(0),document.body.appendChild(this._script)},_onError(t){t.target===this._script&&(this.render({html:this._errorHTML,className:"error"}),window.removeEventListener("error",this._onError,!0))},render(t){return t=_.extend({className:"loading",html:this._loadingHTML},t),this.$el.empty().html(t.html).attr("class",t.className),this},receive(t){window.removeEventListener("error",this._onError,!0),this.render({className:t.supportLevel+"-support",html:t.html})}},{instance:null,supportURL:"https://www.beanbaginc.com/support/reviewboard/_status/"}),RB.Admin.WidgetView=Backbone.View.extend({events:{"click .js-action-reload":"reloadContent"},canReload:!1,reloadTitle:null,initialize(){this.$header=null,this.$content=null,this.$footer=null,this.$headerActions=null,this.$footerActions=null,this._$reloadAction=null},addHeaderAction(t){return this._buildAction(t).appendTo(this.$headerActions)},addFooterAction(t){return this._buildAction(t).appendTo(this.$footerActions)},setReloading(t){console.assert(this.canReload,"This widget did not set canReload=true."),this._$reloadAction.toggleClass("fa-spin",t)},render(){return this.$header=this.$el.children(".rb-c-admin-widget__header"),this.$content=this.$el.children(".rb-c-admin-widget__content"),this.$footer=this.$el.children(".rb-c-admin-widget__footer"),this.$headerActions=this.$header.children(".rb-c-admin-widget__actions"),this.$footerActions=this.$footer.children(".rb-c-admin-widget__actions"),this.canReload&&(this._$reloadAction=this.addHeaderAction({id:"reload",cssClasses:"fa fa-refresh",title:this.reloadTitle})),this.renderWidget(),this.$el.trigger("widget-shown"),this},renderWidget(){},updateSize(){},reloadContent(){},_buildAction(t){console.assert(t.id,'An "id" value must be provided');var e=$('<li class="rb-c-admin-widget__action">').addClass("js-action-"+t.id);return t.cssClasses&&e.addClass(t.cssClasses),t.el?e.append(t.el):t.html?e.html(t.html):t.text&&e.text(t.text),t.title&&e.attr("title",t.title),e}}),RB.Admin.NewsWidgetView=RB.Admin.WidgetView.extend({canReload:!0,reloadTitle:gettext("Reload news posts"),itemsTemplate:_.template(`<% _.each(items, function(item) { %>
 <a href="<%- item.url %>" class="rb-c-admin-news-widget__item"
    target="_blank">
  <span class="rb-c-admin-news-widget__item-date">
   <%- item.date.format('MMM DD') %>
  </span>
  <span class="rb-c-admin-news-widget__item-title">
   <%- item.title %>
  </span>
 </a>
<% }) %>`),renderWidget(){var t=this.model,e=(this.addFooterAction({id:"more-news",el:$('<a href="#" target="_blank">').text(gettext("More News")).attr("href",t.get("newsURL"))}),this.model.get("subscribeURL"));e&&this.addFooterAction({id:"subscribe",cssClasses:"-is-right",el:$('<a href="#" target="_blank">').text(gettext("Subscribe")).attr("href",e)}),this.listenTo(t,"loadingNews",()=>this.setReloading(!0)),this.listenTo(t,"change:newsItems",this._onNewsItemsChanged),t.loadNews()},reloadContent(){this.model.loadNews()},_onNewsItemsChanged(){var t=this.model.get("newsItems");this.setReloading(!1),0<t.length?this.$content.html(this.itemsTemplate({items:t})):(t=$('<p class="rb-c-admin-news-widget__error">').html(interpolate(gettext('There was an error loading the news. Please <a href="%s">visit the news page</a> directly, or try again later.'),[this.model.get("newsURL")])),this.$content.empty().append(t)),this.trigger("sizeChanged")}}),RB.Admin.ServerActivityWidgetView=RB.Admin.WidgetView.extend({renderWidget(){let s=null;this._$tooltip=$(),this._$chart=$('<div class="rb-c-admin-server-activity-widget__chart">').appendTo(this.$content).bind("plothover",(t,e,i)=>{var n,o;i?s!==i.dataIndex&&(this._$tooltip&&this._$tooltip.remove(),n=new Date(i.datapoint[0]).toLocaleDateString(),o=i.datapoint[1],s=i.dataIndex,this._$tooltip=$('<div class="rb-c-admin-server-activity-widget-tooltip">').text(i.series.label+` on ${n}: `+o).appendTo("body").css({left:i.pageX+5+"px",top:i.pageY+5+"px"}).fadeIn(200)):(this._$tooltip.remove(),this._$tooltip=$(),s=null)}),this._addClickAction({id:"prev",text:"<",loadKey:"prev"}),this._addClickAction({id:"next",text:">",loadKey:"next"}),this._addToggleAction({id:"show-reviews",text:_("Reviews"),toggleKey:"reviews"}),this._addToggleAction({id:"show-comments",text:_("Comments"),toggleKey:"comments"}),this._addToggleAction({id:"show-review-requests",text:_("Review Requests"),toggleKey:"reviewRequests"}),this._addToggleAction({id:"show-changes",text:_("Changes"),toggleKey:"changeDescriptions"}),this._addToggleAction({id:"show-legend",text:_("Legend"),toggleKey:"legend"}),this.listenTo(this.model,"updated",this._update),this.model.loadData("none")},_addClickAction(e){this.addFooterAction({id:e.id,html:`<a href="#">${e.text}</a>`}).click(t=>{t.preventDefault(),t.stopPropagation(),this.model.loadData(e.loadKey)})},_addToggleAction(e){this.addFooterAction({id:e.id,html:`<a href="#">${e.text}</a>`}).click(t=>{t.preventDefault(),t.stopPropagation();t=this.model.get("show");t[e.toggleKey]=!t[e.toggleKey],this.model.set("show",t),this.model.loadData("same")})},_update(){var t={xaxis:{mode:"time",tickLength:1,min:moment(this.model.get("rangeStart")).valueOf(),max:moment(this.model.get("rangeEnd")).valueOf()},yaxis:{min:0,tickDecimals:0},grid:{markings:t=>{var e=[],i=new Date(t.xaxis.min);i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+1)%7),i.setUTCSeconds(0),i.setUTCMinutes(0),i.setUTCHours(0);let n=i.getTime();for(;e.push({xaxis:{from:n,to:n+1728e5}}),(n+=6048e5)<t.xaxis.max;);return e},hoverable:!0},series:{points:{show:!0,radius:3},lines:{show:!0}},legend:{position:"nw",show:this.model.get("show").legend}},e=[];this.model.get("show").changeDescriptions&&e.push({label:_("Change Descriptions"),data:this.model.get("data").changeDescriptions,bars:{show:!0},lines:{show:!1},color:0}),this.model.get("show").comments&&e.push({label:_("Comments"),data:this.model.get("data").comments,bars:{show:!0},lines:{show:!1},color:1}),this.model.get("show").reviewRequests&&e.push({label:_("Review Requests"),data:this.model.get("data").reviewRequests,bars:{show:!0},lines:{show:!1},color:2}),this.model.get("show").reviews&&e.push({label:_("Reviews"),data:this.model.get("data").reviews,bars:{show:!0},lines:{show:!1},color:3}),0===e.length&&e.push({bars:{show:!0},lines:{show:!1}}),$.plot(this._$chart,e,t)}}),RB.Admin.UserActivityWidgetView=RB.Admin.WidgetView.extend({template:_.template(`<div class="rb-c-admin-user-activity-widget__chart"></div>
<div class="rb-c-admin-user-activity-widget__user-total">
 <%- userTotalLabel %>: <strong><%- totalUsers %></strong>
</div>`),renderWidget(){this.$content.html(this.template({totalUsers:this.model.get("total"),userTotalLabel:gettext("Total Users")})),this._$chart=this.$(".rb-c-admin-user-activity-widget__chart"),this._plotData()},updateSize(){this._plotData()},_plotData(){var t=this.model,e=t.get("now"),i=t.get("sevenDays"),n=t.get("thirtyDays"),o=t.get("sixtyDays"),t=t.get("ninetyDays");$.plot(this._$chart,[{data:e,label:interpolate(gettext("Active (%s)"),[e])},{data:i,label:interpolate(gettext("7 days ago (%s)"),[i])},{data:n,label:interpolate(gettext("30 days ago (%s)"),[n])},{data:o,label:interpolate(gettext("60 days ago (%s)"),[o])},{data:t,label:interpolate(gettext("90 days ago (%s)"),[t])}],{series:{pie:{show:!0,label:{show:!0,radius:1,background:{opacity:.8},formatter:(t,e)=>`<div>${Math.round(e.percent)}%</div>`}}}}),this.trigger("sizeChanged")}})}.call(this);
