{"version":3,"file":"keyBindingUtilsTests.js","names":["suite","describe","sendKeyPress","$el","keyCode","handled","evt","jQuery","Event","which","charCodeAt","trigger","expect","isDefaultPrevented","toBe","isPropagationStopped","it","MyView","Backbone","View","extend","keyBindings","_","prototype","RB","KeyBindingsMixin","spyOn","_view","delegateKeyBindings","toHaveBeenCalled","view","undelegateEvents","undelegateKeyBindings","myFunc1","myFunc2","render","appendTo","$testsScratch","not","abc","def"],"sources":["../../../../../../static/rb/js/utils/tests/keyBindingUtilsTests.es6.js"],"sourcesContent":["suite('rb/utils/keyBindingUtils', function() {\n    describe('KeyBindingsMixin', function() {\n        function sendKeyPress($el, keyCode, handled) {\n            const evt = jQuery.Event('keypress');\n            evt.which = keyCode.charCodeAt(0);\n            $el.trigger(evt);\n\n            expect(evt.isDefaultPrevented()).toBe(handled);\n            expect(evt.isPropagationStopped()).toBe(handled);\n        }\n\n        it('Registered on create', function() {\n            const MyView = Backbone.View.extend({\n                keyBindings: {},\n            });\n            _.extend(MyView.prototype, RB.KeyBindingsMixin);\n\n            spyOn(MyView.prototype, 'delegateKeyBindings');\n\n            this._view = new MyView();\n            expect(MyView.prototype.delegateKeyBindings).toHaveBeenCalled();\n        });\n\n        it('Unregistered on undelegateEvents', function() {\n            const MyView = Backbone.View.extend({\n                keyBindings: {},\n            });\n            _.extend(MyView.prototype, RB.KeyBindingsMixin);\n\n            const view = new MyView();\n            spyOn(MyView.prototype, 'undelegateKeyBindings');\n\n            view.undelegateEvents();\n            expect(MyView.prototype.undelegateKeyBindings).toHaveBeenCalled();\n        });\n\n        it('Keys to function name', function() {\n            const MyView = Backbone.View.extend({\n                keyBindings: {\n                    'abc': 'myFunc1',\n                    'def': 'myFunc2',\n                },\n\n                myFunc1: function() {},\n                myFunc2: function() {},\n            });\n            _.extend(MyView.prototype, RB.KeyBindingsMixin);\n\n            const view = new MyView();\n            view.render().$el.appendTo($testsScratch);\n\n            spyOn(view, 'myFunc1');\n            spyOn(view, 'myFunc2');\n\n            sendKeyPress(view.$el, 'e', true);\n\n            expect(view.myFunc1).not.toHaveBeenCalled();\n            expect(view.myFunc2).toHaveBeenCalled();\n        });\n\n        it('Keys to function', function() {\n            const MyView = Backbone.View.extend({\n                keyBindings: {\n                    'abc': function() {},\n                    'def': function() {},\n                }\n            });\n            _.extend(MyView.prototype, RB.KeyBindingsMixin);\n\n            const view = new MyView();\n            view.render().$el.appendTo($testsScratch);\n\n            spyOn(view.keyBindings, 'abc');\n            spyOn(view.keyBindings, 'def');\n\n            sendKeyPress(view.$el, 'b', true);\n\n            expect(view.keyBindings.abc).toHaveBeenCalled();\n            expect(view.keyBindings.def).not.toHaveBeenCalled();\n        });\n\n        it('Unmatched keys', function() {\n            const MyView = Backbone.View.extend({\n                keyBindings: {\n                    'abc': function() {},\n                    'def': function() {},\n                }\n            });\n            _.extend(MyView.prototype, RB.KeyBindingsMixin);\n\n            const view = new MyView();\n            view.render().$el.appendTo($testsScratch);\n\n            spyOn(view.keyBindings, 'abc');\n            spyOn(view.keyBindings, 'def');\n\n            sendKeyPress(view.$el, '!', false);\n\n            expect(view.keyBindings.abc).not.toHaveBeenCalled();\n            expect(view.keyBindings.def).not.toHaveBeenCalled();\n        });\n    });\n});\n"],"mappings":"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","ignoreList":[]}