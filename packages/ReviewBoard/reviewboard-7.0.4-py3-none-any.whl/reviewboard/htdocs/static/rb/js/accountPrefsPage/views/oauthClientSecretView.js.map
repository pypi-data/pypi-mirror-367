{"version":3,"file":"oauthClientSecretView.js","names":["RB","OAuthClientSecretView","Backbone","View","extend","events","initialize","options","_apiURL","apiURL","render","_$input","$","_$regen","_onCopyClicked","e","preventDefault","stopPropagation","focus","select","document","execCommand","_onRegenerateClicked","prop","apiCall","url","method","data","success","rsp","val","oauth_app","client_secret","error"],"sources":["../../../../../../static/rb/js/accountPrefsPage/views/oauthClientSecretView.es6.js"],"sourcesContent":["/**\n * A view for editing a client secret.\n *\n * This view hits the API to regenerate the associated application's\n * client secret and updates the ``<input>`` element with the updated value. It\n * also bundles a copy button so that the value can be copied to the user's\n * clipboard.\n */\nRB.OAuthClientSecretView = Backbone.View.extend({\n    events: {\n        'click .copyable-text-input-link': '_onCopyClicked',\n        'click .regenerate-secret-button': '_onRegenerateClicked',\n    },\n\n    /**\n     * Initialize the view.\n     *\n     * Args:\n     *     options (object):\n     *         The view options.\n     *\n     * Option Args:\n     *     apiURL (string):\n     *         The URL of the API endpoint for the application.\n     */\n    initialize(options) {\n        this._apiURL = options.apiURL;\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     RB.OAuthClientSecretView:\n     *     This view.\n     */\n    render() {\n        this._$input = this.$('input');\n        this._$regen = this.$('.regenerate-secret-button');\n\n        return this;\n    },\n\n    /**\n     * Copy the client secret to the clipboard.\n     *\n     * Args:\n     *     e (Event):\n     *         The click event that triggered this handler.\n     */\n    _onCopyClicked(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this._$input\n            .focus()\n            .select();\n\n        document.execCommand('copy');\n    },\n\n    /**\n     * Regenerate the client secret.\n     *\n     * Args:\n     *     e (Event):\n     *         The click event that triggered this handler.\n     */\n    _onRegenerateClicked(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this._$regen.prop('disabled', true);\n        RB.apiCall({\n            url: this._apiURL,\n            method: 'PUT',\n            data: {\n                'regenerate_client_secret': 1,\n            },\n            success: rsp => {\n                this._$input.val(rsp.oauth_app.client_secret);\n                this._$regen.prop('disabled', false);\n            },\n            error: () => {\n                this._$regen.prop('disabled', false);\n            }\n        });\n    }\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,EAAE,CAACC,qBAAqB,GAAGC,QAAQ,CAACC,IAAI,CAACC,MAAM,CAAC;EAC5CC,MAAM,EAAE;IACJ,iCAAiC,EAAE,gBAAgB;IACnD,iCAAiC,EAAE;EACvC,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,UAAUA,CAACC,OAAO,EAAE;IAChB,IAAI,CAACC,OAAO,GAAGD,OAAO,CAACE,MAAM;EACjC,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;EACIC,MAAMA,CAAA,EAAG;IACL,IAAI,CAACC,OAAO,GAAG,IAAI,CAACC,CAAC,CAAC,OAAO,CAAC;IAC9B,IAAI,CAACC,OAAO,GAAG,IAAI,CAACD,CAAC,CAAC,2BAA2B,CAAC;IAElD,OAAO,IAAI;EACf,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;EACIE,cAAcA,CAACC,CAAC,EAAE;IACdA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBD,CAAC,CAACE,eAAe,CAAC,CAAC;IAEnB,IAAI,CAACN,OAAO,CACPO,KAAK,CAAC,CAAC,CACPC,MAAM,CAAC,CAAC;IAEbC,QAAQ,CAACC,WAAW,CAAC,MAAM,CAAC;EAChC,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;EACIC,oBAAoBA,CAACP,CAAC,EAAE;IACpBA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBD,CAAC,CAACE,eAAe,CAAC,CAAC;IAEnB,IAAI,CAACJ,OAAO,CAACU,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC;IACnCvB,EAAE,CAACwB,OAAO,CAAC;MACPC,GAAG,EAAE,IAAI,CAACjB,OAAO;MACjBkB,MAAM,EAAE,KAAK;MACbC,IAAI,EAAE;QACF,0BAA0B,EAAE;MAChC,CAAC;MACDC,OAAO,EAAEC,GAAG,IAAI;QACZ,IAAI,CAAClB,OAAO,CAACmB,GAAG,CAACD,GAAG,CAACE,SAAS,CAACC,aAAa,CAAC;QAC7C,IAAI,CAACnB,OAAO,CAACU,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC;MACxC,CAAC;MACDU,KAAK,EAAEA,CAAA,KAAM;QACT,IAAI,CAACpB,OAAO,CAACU,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC;MACxC;IACJ,CAAC,CAAC;EACN;AACJ,CAAC,CAAC","ignoreList":[]}