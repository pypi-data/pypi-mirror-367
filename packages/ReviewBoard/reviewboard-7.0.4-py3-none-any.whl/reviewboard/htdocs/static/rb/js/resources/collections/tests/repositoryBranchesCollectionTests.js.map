{"version":3,"file":"repositoryBranchesCollectionTests.js","names":["suite","collection","beforeEach","RB","RepositoryBranches","url","describe","it","spyOn","$","and","callFake","request","expect","toBe","type","success","stat","branches","name","commit","fetch","ajax","toHaveBeenCalled","length","at","get","reduce","memo","item"],"sources":["../../../../../../../static/rb/js/resources/collections/tests/repositoryBranchesCollectionTests.es6.js"],"sourcesContent":["suite('rb/resources/collections/RepositoryBranches', function() {\n    let collection;\n\n    beforeEach(function() {\n        collection = new RB.RepositoryBranches();\n        collection.url = '/api/repositories/123/branches/';\n    });\n\n    describe('Methods', function() {\n        it('fetch', function() {\n            spyOn($, 'ajax').and.callFake(request => {\n                expect(request.url)\n                    .toBe('/api/repositories/123/branches/');\n                expect(request.type).toBe('GET');\n\n                request.success({\n                    stat: 'ok',\n                    branches: [\n                        {\n                            name: 'master',\n                            commit: '859d4e148ce3ce60bbda6622cdbe5c2c2f8d9817',\n                            'default': true,\n                        },\n                        {\n                            name: 'release-1.7.x',\n                            commit: '92463764015ef463b4b6d1a1825fee7aeec8cb15',\n                            'default': false,\n                        },\n                        {\n                            name: 'release-1.6.x',\n                            commit: 'a15d0e635064a2e1929ce1bf3bc8d4aa65738b64',\n                            'default': false,\n                        },\n                    ],\n                });\n            });\n\n            collection.fetch();\n\n            expect($.ajax).toHaveBeenCalled();\n            expect(collection.length).toBe(3);\n            expect(collection.at(0).get('name')).toBe('master');\n            expect(collection.at(1).get('commit'))\n                .toBe('92463764015ef463b4b6d1a1825fee7aeec8cb15');\n            expect(collection.at(2).get('isDefault')).toBe(false);\n\n            expect(collection.reduce(\n                (memo, item) => (memo + item.get('isDefault') ? 1 : 0), 0))\n                .toBe(1);\n        });\n    });\n});\n"],"mappings":";;AAAAA,KAAK,CAAC,6CAA6C,EAAE,YAAW;EAC5D,IAAIC,UAAU;EAEdC,UAAU,CAAC,YAAW;IAClBD,UAAU,GAAG,IAAIE,EAAE,CAACC,kBAAkB,CAAC,CAAC;IACxCH,UAAU,CAACI,GAAG,GAAG,iCAAiC;EACtD,CAAC,CAAC;EAEFC,QAAQ,CAAC,SAAS,EAAE,YAAW;IAC3BC,EAAE,CAAC,OAAO,EAAE,YAAW;MACnBC,KAAK,CAACC,CAAC,EAAE,MAAM,CAAC,CAACC,GAAG,CAACC,QAAQ,CAACC,OAAO,IAAI;QACrCC,MAAM,CAACD,OAAO,CAACP,GAAG,CAAC,CACdS,IAAI,CAAC,iCAAiC,CAAC;QAC5CD,MAAM,CAACD,OAAO,CAACG,IAAI,CAAC,CAACD,IAAI,CAAC,KAAK,CAAC;QAEhCF,OAAO,CAACI,OAAO,CAAC;UACZC,IAAI,EAAE,IAAI;UACVC,QAAQ,EAAE,CACN;YACIC,IAAI,EAAE,QAAQ;YACdC,MAAM,EAAE,0CAA0C;YAClD,SAAS,EAAE;UACf,CAAC,EACD;YACID,IAAI,EAAE,eAAe;YACrBC,MAAM,EAAE,0CAA0C;YAClD,SAAS,EAAE;UACf,CAAC,EACD;YACID,IAAI,EAAE,eAAe;YACrBC,MAAM,EAAE,0CAA0C;YAClD,SAAS,EAAE;UACf,CAAC;QAET,CAAC,CAAC;MACN,CAAC,CAAC;MAEFnB,UAAU,CAACoB,KAAK,CAAC,CAAC;MAElBR,MAAM,CAACJ,CAAC,CAACa,IAAI,CAAC,CAACC,gBAAgB,CAAC,CAAC;MACjCV,MAAM,CAACZ,UAAU,CAACuB,MAAM,CAAC,CAACV,IAAI,CAAC,CAAC,CAAC;MACjCD,MAAM,CAACZ,UAAU,CAACwB,EAAE,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC,MAAM,CAAC,CAAC,CAACZ,IAAI,CAAC,QAAQ,CAAC;MACnDD,MAAM,CAACZ,UAAU,CAACwB,EAAE,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC,QAAQ,CAAC,CAAC,CACjCZ,IAAI,CAAC,0CAA0C,CAAC;MACrDD,MAAM,CAACZ,UAAU,CAACwB,EAAE,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC,WAAW,CAAC,CAAC,CAACZ,IAAI,CAAC,KAAK,CAAC;MAErDD,MAAM,CAACZ,UAAU,CAAC0B,MAAM,CACpB,CAACC,IAAI,EAAEC,IAAI,KAAMD,IAAI,GAAGC,IAAI,CAACH,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAE,EAAE,CAAC,CAAC,CAAC,CAC1DZ,IAAI,CAAC,CAAC,CAAC;IAChB,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC,CAAC","ignoreList":[]}