{"version":3,"file":"fileAttachmentRevisionSelectorView.js","names":["RB","FileAttachmentRevisionSelectorView","RevisionSelectorView","extend","initialize","prototype","call","firstLabelActive","numHandles","render","numRevisions","model","get","labels","gettext","i","push","toString","_update","revision","diffRevision","_values","_rendered","_updateHandles","_onLabelClick","ev","$target","$","currentTarget","trigger","data"],"sources":["../../../../../static/rb/js/views/fileAttachmentRevisionSelectorView.es6.js"],"sourcesContent":["/**\n * A view that allows users to select a revision of a file attachment to view.\n */\nRB.FileAttachmentRevisionSelectorView = RB.RevisionSelectorView.extend({\n    /**\n     * Initialize the view.\n     */\n    initialize() {\n        RB.RevisionSelectorView.prototype.initialize.call(this, {\n            firstLabelActive: true,\n            numHandles: 2,\n        });\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     RB.FileAttachmentRevisionSelectorView:\n     *     This object, for chaining.\n     */\n    render() {\n        const numRevisions = this.model.get('numRevisions');\n        const labels = [gettext('No Diff')];\n\n        for (let i = 1; i <= numRevisions; i++) {\n            labels.push(i.toString());\n        }\n\n        RB.RevisionSelectorView.prototype.render.call(\n            this, labels, true /* whether the first label is clickable */);\n    },\n\n    /**\n     * Update the displayed revision based on the model.\n     */\n    _update() {\n        const revision = this.model.get('fileRevision');\n        const diffRevision = this.model.get('diffRevision');\n\n        if (diffRevision) {\n            this._values = [diffRevision, revision];\n        } else {\n            this._values = [0, revision];\n        }\n\n        if (this._rendered) {\n            this._updateHandles();\n        }\n    },\n\n    /**\n     * Callback for when one of the labels is clicked.\n     *\n     * This will jump to the target revision.\n     *\n     * Args:\n     *     ev (Event):\n     *         The click event.\n     */\n    _onLabelClick(ev) {\n        const $target = $(ev.currentTarget);\n        this.trigger('revisionSelected', [0, $target.data('revision')]);\n    },\n});\n"],"mappings":";;AAAA;AACA;AACA;AACAA,EAAE,CAACC,kCAAkC,GAAGD,EAAE,CAACE,oBAAoB,CAACC,MAAM,CAAC;EACnE;AACJ;AACA;EACIC,UAAUA,CAAA,EAAG;IACTJ,EAAE,CAACE,oBAAoB,CAACG,SAAS,CAACD,UAAU,CAACE,IAAI,CAAC,IAAI,EAAE;MACpDC,gBAAgB,EAAE,IAAI;MACtBC,UAAU,EAAE;IAChB,CAAC,CAAC;EACN,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;EACIC,MAAMA,CAAA,EAAG;IACL,MAAMC,YAAY,GAAG,IAAI,CAACC,KAAK,CAACC,GAAG,CAAC,cAAc,CAAC;IACnD,MAAMC,MAAM,GAAG,CAAAC,OAAA,YAAoB;IAEnC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIL,YAAY,EAAEK,CAAC,EAAE,EAAE;MACpCF,MAAM,CAACG,IAAI,CAACD,CAAC,CAACE,QAAQ,CAAC,CAAC,CAAC;IAC7B;IAEAjB,EAAE,CAACE,oBAAoB,CAACG,SAAS,CAACI,MAAM,CAACH,IAAI,CACzC,IAAI,EAAEO,MAAM,EAAE,IAAI,CAAC,0CAA0C,CAAC;EACtE,CAAC;EAED;AACJ;AACA;EACIK,OAAOA,CAAA,EAAG;IACN,MAAMC,QAAQ,GAAG,IAAI,CAACR,KAAK,CAACC,GAAG,CAAC,cAAc,CAAC;IAC/C,MAAMQ,YAAY,GAAG,IAAI,CAACT,KAAK,CAACC,GAAG,CAAC,cAAc,CAAC;IAEnD,IAAIQ,YAAY,EAAE;MACd,IAAI,CAACC,OAAO,GAAG,CAACD,YAAY,EAAED,QAAQ,CAAC;IAC3C,CAAC,MAAM;MACH,IAAI,CAACE,OAAO,GAAG,CAAC,CAAC,EAAEF,QAAQ,CAAC;IAChC;IAEA,IAAI,IAAI,CAACG,SAAS,EAAE;MAChB,IAAI,CAACC,cAAc,CAAC,CAAC;IACzB;EACJ,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,aAAaA,CAACC,EAAE,EAAE;IACd,MAAMC,OAAO,GAAGC,CAAC,CAACF,EAAE,CAACG,aAAa,CAAC;IACnC,IAAI,CAACC,OAAO,CAAC,kBAAkB,EAAE,CAAC,CAAC,EAAEH,OAAO,CAACI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;EACnE;AACJ,CAAC,CAAC","ignoreList":[]}