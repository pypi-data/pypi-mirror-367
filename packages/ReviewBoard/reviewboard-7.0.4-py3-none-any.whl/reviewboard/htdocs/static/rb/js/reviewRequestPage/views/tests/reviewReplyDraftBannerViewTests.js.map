{"version":3,"file":"reviewReplyDraftBannerViewTests.js","names":["suite","reviewReply","view","beforeEach","RB","ReviewReply","ReviewRequestPage","ReviewReplyDraftBannerView","model","$floatContainer","$testsScratch","reviewRequestEditor","ReviewRequestEditor","reviewRequest","ReviewRequest","render","$el","appendTo","describe","it","spyOn","$","click","expect","destroy","toHaveBeenCalled","publish","$buttons","prop","toBe","trigger","and","resolveTo","remove","showSendEmail","calls","argsFor","trivial","length","toEqual"],"sources":["../../../../../../../static/rb/js/reviewRequestPage/views/tests/reviewReplyDraftBannerViewTests.es6.js"],"sourcesContent":["suite('rb/reviewRequestPage/views/ReviewReplyDraftBannerView', function() {\n    let reviewReply;\n    let view;\n\n    beforeEach(function() {\n        reviewReply = new RB.ReviewReply();\n        view = new RB.ReviewRequestPage.ReviewReplyDraftBannerView({\n            model: reviewReply,\n            $floatContainer: $testsScratch,\n            reviewRequestEditor: new RB.ReviewRequestEditor({\n                reviewRequest: new RB.ReviewRequest(),\n            }),\n        });\n        view.render().$el.appendTo($testsScratch);\n    });\n\n    describe('Actions', function() {\n        it('Discard', function() {\n            spyOn(reviewReply, 'destroy');\n            view.$('.discard-button').click();\n            expect(reviewReply.destroy).toHaveBeenCalled();\n        });\n\n        it('Publish', function() {\n            spyOn(reviewReply, 'publish');\n            view.$('.publish-button').click();\n            expect(reviewReply.publish).toHaveBeenCalled();\n        });\n    });\n\n    describe('Event Handling', function() {\n        describe('Buttons', function() {\n            let $buttons;\n\n            beforeEach(function() {\n                $buttons = view.$('input');\n            });\n\n            describe('Disabled', function() {\n                it('When saving', function() {\n                    expect($buttons.prop('disabled')).toBe(false);\n                    reviewReply.trigger('saving');\n                    expect($buttons.prop('disabled')).toBe(true);\n                });\n\n                it('When destroying', function() {\n                    expect($buttons.prop('disabled')).toBe(false);\n                    reviewReply.trigger('destroying');\n                    expect($buttons.prop('disabled')).toBe(true);\n                });\n            });\n\n            describe('Enabled', function() {\n                it('When saved', function() {\n                    $buttons.prop('disabled', true);\n                    reviewReply.trigger('saved');\n                    expect($buttons.prop('disabled')).toBe(false);\n                });\n            });\n        });\n    });\n\n    describe('Publish', function() {\n        beforeEach(function() {\n            spyOn(reviewReply, 'ensureCreated').and.resolveTo();\n            spyOn(reviewReply, 'publish');\n        });\n\n        describe('With Send E-Mail shown', function() {\n            beforeEach(function() {\n                view.remove();\n                view = new RB.ReviewRequestPage.ReviewReplyDraftBannerView({\n                    model: reviewReply,\n                    $floatContainer: $testsScratch,\n                    reviewRequestEditor: new RB.ReviewRequestEditor({\n                        reviewRequest: new RB.ReviewRequest(),\n                        showSendEmail: true\n                    })\n                });\n                view.render().$el.appendTo($testsScratch);\n            });\n\n            it('Send E-Mail true', function() {\n                $('.send-email').prop('checked', true);\n\n                $('.publish-button').click();\n\n                expect(reviewReply.publish).toHaveBeenCalled();\n                expect(reviewReply.publish.calls.argsFor(0)[0].trivial)\n                    .toBe(false);\n            });\n\n            it('Send E-Mail false', function() {\n                $('.send-email').prop('checked', false);\n\n                $('.publish-button').click();\n\n                expect(reviewReply.publish).toHaveBeenCalled();\n                expect(reviewReply.publish.calls.argsFor(0)[0].trivial)\n                    .toBe(true);\n            });\n        });\n\n        it('Without Send E-Mail shown', function() {\n            $('.publish-button').click();\n\n            expect($('.send-email').length).toEqual(0);\n            expect(reviewReply.publish).toHaveBeenCalled();\n            expect(reviewReply.publish.calls.argsFor(0)[0].trivial).toBe(false);\n        });\n    });\n});\n"],"mappings":"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","ignoreList":[]}