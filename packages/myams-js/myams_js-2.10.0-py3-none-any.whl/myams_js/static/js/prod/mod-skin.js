!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.modSkin=n.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.skin=void 0;const t=MyAMS.$;let n=!1;const a=e.skin={init:()=>{n||(n=!0,MyAMS.config.enableTooltips&&MyAMS.dom.root.tooltip({selector:".hint",html:MyAMS.config.enableHtmlTooltips}),t(".hint").mousedown((e=>{t(e.currentTarget).tooltip("hide")})),t(document).on("clear.ams.content",(()=>{t(".tooltip").remove()})),a.checkURL(),t(window).on("hashchange",a.checkURL))},initElement:e=>{MyAMS.config.enableTooltips||t(".hint",e).tooltip({html:MyAMS.config.enableHtmlTooltips})},checkURL:()=>new Promise(((e,n)=>{const a=MyAMS.dom.nav;let o=location.hash,i=o.replace(/^#/,""),s=null;const l=i.indexOf("!");let r;if(l>0&&(o=o.substring(0,l+1),s=i.substring(l+1),i=i.substring(0,l)),i){let l=t("#content");l.exists()||(l=MyAMS.dom.root),r=t(`a[href="${o}"]`,a),MyAMS.skin.loadURL(i,l).then((()=>{const n=t("html head title").data("ams-title-prefix"),a=n?`${n} > `:"";if(document.title=`${a}${t("[data-ams-page-title]:first",l).data("ams-page-title")||r.attr("title")||r.text().trim()||document.title}`,s){const e=t(`#${s}`);e.exists()&&MyAMS.require("helpers").then((()=>{MyAMS.helpers.scrollTo("#main",e,{offset:-15})}))}r.exists()?MyAMS.require("nav").then((()=>{MyAMS.nav.setActiveMenu(r),MyAMS.nav.drawBreadcrumbs()})).then(e):e()}),n)}else{const o=t("[data-ams-active-menu]").data("ams-active-menu");r=o?t(`a[href="${o}"]`,a):t('ul li a[href!="#"]',a).first(),r.length>0?MyAMS.require("nav").then((()=>{MyAMS.nav.setActiveMenu(r),o?MyAMS.nav.drawBreadcrumbs():window.location.replace(window.location.href+r.attr("href"))})).then(e,n):e()}})),loadURL:(e,n,a={})=>new Promise(((o,i)=>{e.startsWith("#")&&(e=e.substr(1)),n=t(n),MyAMS.core.executeFunctionByName(MyAMS.config.clearContent,document,n).then((s=>{if(!s)return;const l={type:"GET",url:e,dataType:"html",cache:!1,beforeSend:()=>{n.html(`<h1 class="loading"><i class="fa fa-cog fa-spin"></i> ${MyAMS.i18n.LOADING}</h1>`),a&&a.preLoadCallback&&MyAMS.core.executeFunctionByName(a.preLoadCallback,void 0,a.preLoadCallbackOptions),"content"===n.attr("id")&&MyAMS.require("nav").then((()=>{const e=t("html head title").data("ams-title-prefix"),n=e?`${e} > `:"";document.title=`${n}${t(".breadcrumb li:last-child").text()}`,MyAMS.dom.root.animate({scrollTop:0},"fast")}))}},r=t.extend({},l,a),c={veto:!1};n.trigger("before-load.ams.content",[r,c]),c.veto||t.ajax(r).then(((e,s,l)=>{t.isArray(e)&&([e,s,l]=e),MyAMS.require("ajax").then((()=>{const e=MyAMS.ajax.getResponse(l);if(e){const r=e.contentType,c=e.data;switch(t(".loading",n).remove(),r){case"json":MyAMS.ajax.handleJSON(c,n),o(c,s,l);break;case"script":case"xml":o(c,s,l);break;default:n.parents(".hidden").removeClass("hidden"),MyAMS.core.executeFunctionByName(n.data("ams-clear-content")||MyAMS.config.clearContent,document,n).then((()=>{n.css({opacity:"0.0"}).html(c).removeClass("hidden").delay(30).animate({opacity:"1.0"},300),MyAMS.core.executeFunctionByName(n.data("ams-init-content")||MyAMS.config.initContent,window,n).then((()=>{MyAMS.form&&MyAMS.form.setFocus(n),a&&a.afterLoadCallback?MyAMS.core.executeFunctionByName(a.afterLoadCallback,void 0,a.afterLoadCallbackOptions).then((()=>{n.trigger("after-load.ams.content"),o(c,s,l)}),i):(n.trigger("after-load.ams.content"),o(c,s,l))}),i)}),i)}MyAMS.stats&&MyAMS.stats.logPageview()}}))}),((e,t,a)=>{n.html(`<h3 class="error"><i class="fa fa-exclamation-triangle text-danger"></i> \n\t\t\t\t\t\t\t\t${MyAMS.i18n.ERROR} ${a}</h3>${e.responseText}`),i(a)}))}))}))};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("skin"):(MyAMS.skin=a,console.debug("MyAMS: skin module loaded...")))}));