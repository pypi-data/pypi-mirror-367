!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.modHelpers=n.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.helpers=void 0;const t=MyAMS.$,n=e.helpers={clearValue:e=>{const n=t(e.currentTarget).data("target");n&&t(n).val(null)},clearDatetimeValue:e=>{const n=t(e.currentTarget).data("target"),a=t(n).data("datetimepicker");a&&a.date(null)},scrollTo:(e="#content",n,{...a})=>{"string"==typeof n&&(n=t(n)),n.exists()&&MyAMS.require("ajax").then((()=>{MyAMS.ajax.check(t.fn.scrollTo,`${MyAMS.env.baseURL}../ext/jquery-scrollto${MyAMS.env.extext}.js`).then((()=>{t(e).scrollTo(n,a)}))}))},setLoginHash:()=>{const e=t("#login_form");t('input[name="login_form.widgets.hash"]',e).val(window.location.hash)},setSEOStatus:e=>{const n=t(e.target),a=n.siblings(".progress").children(".progress-bar"),o=Math.min(n.val().length,100);let r="success";o<20||o>80?r="danger":(o<40||o>66)&&(r="warning"),a.removeClassPrefix("bg-").addClass("bg-"+r).css("width",o+"%")},select2ChangeHelper:e=>new Promise(((n,a)=>{const o=t(e.currentTarget),r=o.data(),s=t(r.amsSelect2HelperTarget),l={};let i;if("html"===r.amsSelect2HelperType)s.html('<div class="text-center"><i class="fas fa-2x fa-spinner fa-spin"></i></div>'),l[r.amsSelect2HelperArgument||"value"]=o.val(),t.get(r.amsSelect2HelperUrl,l).then((e=>{i=MyAMS.core.getFunctionByName(r.amsSelect2HelperCallback)||(e=>{e?(s.html(e),MyAMS.core.initContent(s).then((()=>{n()}))):(s.empty(),n())}),i(e)})).catch((()=>{s.empty(),a()}));else i=r.amsSelect2HelperCallback,i&&(MyAMS.core.executeFunctionByName(i,o,r),n())})),refreshElement:(e,n)=>new Promise(((e,a)=>{let o=t(`[id="${n.object_id}"]`);MyAMS.core.executeFunctionByName(MyAMS.config.clearContent,document,o).then((()=>{o.replaceWith(t(n.content)),o=t(`[id="${n.object_id}"]`);const r=o.parents().first();MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,r).then((()=>{e(o)}),a)}),a)})),hideElement:(e,n)=>{t(n.selector,e).hide()},removeElement:(e,n)=>{t(n.selector,e).remove()},refreshWidget:(e,n)=>new Promise(((e,a)=>{let o=t(`[id="${n.widget_id}"]`),r=o.parents(".widget-group");MyAMS.core.executeFunctionByName(MyAMS.config.clearContent,document,r).then((()=>{r.replaceWith(t(n.content)),o=t(`[id="${n.widget_id}"]`),r=o.parents(".widget-group"),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,r).then((()=>{e(o)}),a)}),a)})),refreshTable:(e,n)=>new Promise(((e,a)=>{const o=`table[id="${n.table_id}"]`;let r=t(o);if(r.exists()){if(r.hasClass("datatable")){const e=r.DataTable();e&&e.destroy()}r.replaceWith(t(n.content)),r=t(o),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,r.parent()).then((()=>{e(r)}),a)}})),addTableRow:(e,n)=>new Promise(((e,a)=>{const o=`table[id="${n.table_id}"]`,r=t(o),s=r.DataTable();let l;n.data?(s.rows.add(n.data).draw(),l=t(`tr[id="${n.row_id}"]`,r),e(l)):(l=t(n.content),s.rows.add(l).draw(),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,l).then((()=>{e(l)}),a))})),refreshTableRow:(e,n)=>new Promise(((e,a)=>{const o=`tr[id="${n.row_id}"]`,r=t(o),s=r.parents("table").first();if(n.data)if(t.fn.DataTable){const a=s.DataTable();"string"==typeof n.data?(a.row(o).remove(),a.row.add(t(n.data)).draw()):a.row(o).data(n.data).draw(),e(r)}else a("No DataTable plug-in available!");else{const o=t(n.content);r.replaceWith(o),MyAMS.core.executeFunctionByName(MyAMS.config.initContent,document,o).then((()=>{e(o)}),a)}})),deleteTableRow:(e,n)=>new Promise(((e,a)=>{const o=`tr[id="${n.row_id}"]`,r=t(o),s=r.parents("table").first();if(t.fn.DataTable){const e=s.DataTable();e.row(o).remove(),e.draw()}else r.remove()})),refreshImage:(e,n)=>{t(`[id="${n.image_id}"]`).attr("src",n.src)},moveElementToParentEnd:e=>{const t=e.parent();return e.detach().appendTo(t)},addElementToParent:(e,{element:n,parent:a,...o})=>{n=t(n),a=t(a);const r=n.appendTo(a);return o.scrollTo&&MyAMS.helpers.scrollTo(o.scrollParent,n),r},hideDropdown:e=>{t(e.target).closest(".dropdown-menu").dropdown("hide")}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("helpers"):(MyAMS.helpers=n,console.debug("MyAMS: helpers module loaded...")))}));