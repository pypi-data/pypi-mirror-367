{"version":3,"file":"mod-clipboard-dev.js","names":["$","MyAMS","doCopy","text","copied","window","clipboardData","setData","document","queryCommandSupported","textarea","val","css","appendTo","dom","root","get","select","execCommand","e","console","warn","remove","require","then","alert","smallBox","status","message","length","i18n","CLIPBOARD_TEXT_COPY_OK","CLIPBOARD_CHARACTER_COPY_OK","icon","timeout","prompt","CLIPBOARD_COPY","clipboard","_exports","copy","source","parents","removeClass","copyText","event","currentTarget","input","data","value","env","bundle","config","modules","push","debug"],"sources":["mod-clipboard.js"],"sourcesContent":["/* global MyAMS, clipboardData */\n/**\n * MyAMS i18n translations\n */\n\nconst $ = MyAMS.$;\n\n\n/**\n * Internal function used to copy text to clipboard\n *\n * @param text: text to be copied\n */\nfunction doCopy(text) {\n\tlet copied = false;\n\tif (window.clipboardData && window.clipboardData.setData) {\n\t\t// IE specific code\n\t\tcopied = clipboardData.setData(\"Text\", text);\n\t} else if (document.queryCommandSupported && document.queryCommandSupported('copy')) {\n\t\tconst textarea = $('<textarea>');\n\t\ttextarea.val(text)\n\t\t\t.css('position', 'fixed')  // prevent scrolling to bottom of page in Edge\n\t\t\t.appendTo(MyAMS.dom.root);\n\t\ttextarea.get(0).select();\n\t\ttry {\n\t\t\tdocument.execCommand('copy');  // security exception may be thrown by some browsers!\n\t\t\tcopied = true;\n\t\t} catch (e) {\n\t\t\tconsole.warn(\"Clipboard copy failed!\", e);\n\t\t} finally {\n\t\t\ttextarea.remove();\n\t\t}\n\t}\n\tif (copied) {\n\t\tMyAMS.require('i18n', 'alert').then(() => {\n\t\t\tMyAMS.alert.smallBox({\n\t\t\t\tstatus: 'success',\n\t\t\t\tmessage: text.length > 1 ? MyAMS.i18n.CLIPBOARD_TEXT_COPY_OK\n\t\t\t\t\t: MyAMS.i18n.CLIPBOARD_CHARACTER_COPY_OK,\n\t\t\t\ticon: 'fa-info-circle',\n\t\t\t\ttimeout: 3000\n\t\t\t});\n\t\t});\n\t} else {\n\t\tMyAMS.require('i18n').then(() => {\n\t\t\tprompt(MyAMS.i18n.CLIPBOARD_COPY, text);\n\t\t});\n\t}\n}\n\n\nexport const clipboard = {\n\n\t/**\n\t * Copy given text to system's clipboard\n\t *\n\t * @param text: text to be copied\n\t */\n\tcopy: (text) => {\n\t\tif (typeof text === 'undefined') {\n\t\t\treturn function() {\n\t\t\t\tconst\n\t\t\t\t\tsource = $(this),\n\t\t\t\t\ttext = source.text();\n\t\t\t\tsource.parents('.btn-group').removeClass('open');\n\t\t\t\tdoCopy(text);\n\t\t\t};\n\t\t} else {\n\t\t\tdoCopy(text);\n\t\t}\n\t},\n\n\t/**\n\t * Copy input value or text to system's clipboard\n\t */\n\tcopyText: (event) => {\n\t\tconst\n\t\t\tsource = $(event.currentTarget),\n\t\t\tinput = $(source.data('ams-clipboard-target')),\n\t\t\tvalue = input.val() || input.text();\n\t\tdoCopy(value);\n\t}\n};\n\n\n/**\n * Global module initialization\n */\nif (window.MyAMS) {\n\tif (MyAMS.env.bundle) {\n\t\tMyAMS.config.modules.push('clipboard');\n\t} else {\n\t\tMyAMS.clipboard = clipboard;\n\t\tconsole.debug(\"MyAMS: clipboard module loaded...\");\n\t}\n}\n"],"mappings":"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","ignoreList":[]}