{"version":3,"file":"mod-helpers-dev.js","names":["$","MyAMS","helpers","_exports","clearValue","evt","target","currentTarget","data","val","clearDatetimeValue","picker","date","scrollTo","parent","anchor","props","exists","require","then","ajax","check","fn","env","baseURL","extext","setLoginHash","form","hash","window","location","setSEOStatus","input","progress","siblings","children","length","Math","min","status","removeClassPrefix","addClass","css","select2ChangeHelper","Promise","resolve","reject","source","amsSelect2HelperTarget","params","callback","amsSelect2HelperType","html","amsSelect2HelperArgument","get","amsSelect2HelperUrl","result","core","getFunctionByName","amsSelect2HelperCallback","initContent","empty","catch","executeFunctionByName","refreshElement","options","element","object_id","config","clearContent","document","replaceWith","content","parents","first","hideElement","selector","hide","removeElement","remove","refreshWidget","widget","widget_id","group","refreshTable","table_id","table","hasClass","dtTable","DataTable","destroy","addTableRow","newRow","rows","add","draw","row_id","refreshTableRow","row","deleteTableRow","refreshImage","image","image_id","attr","src","moveElementToParentEnd","detach","appendTo","addElementToParent","scrollParent","hideDropdown","closest","dropdown","bundle","modules","push","console","debug"],"sources":["mod-helpers.js"],"sourcesContent":["/* global MyAMS */\n/**\n * MyAMS generic helpers\n */\n\nconst $ = MyAMS.$;\n\n\nexport const helpers = {\n\n\t/**\n\t * Click handler used to clear input\n\t */\n\tclearValue: (evt) => {\n\t\tconst target = $(evt.currentTarget).data('target');\n\t\tif (target) {\n\t\t\t$(target).val(null);\n\t\t}\n\t},\n\n\t/**\n\t * Click handler used to clear datetime input\n\t */\n\tclearDatetimeValue: (evt) => {\n\t\tconst\n\t\t\ttarget = $(evt.currentTarget).data('target'),\n\t\t\tpicker = $(target).data('datetimepicker');\n\t\tif (picker) {\n\t\t\tpicker.date(null);\n\t\t}\n\t},\n\n\t/**\n\t * Scroll anchor parent element to given anchor\n\t *\n\t * @param anchor: scroll target\n\t * @param parent: scroll parent\n\t * @param props: scroll properties\n\t */\n\tscrollTo: (parent='#content', anchor, {...props}) => {\n\t\tif (typeof anchor === 'string') {\n\t\t\tanchor = $(anchor);\n\t\t}\n\t\tif (anchor.exists()) {\n\t\t\tMyAMS.require('ajax').then(() => {\n\t\t\t\tMyAMS.ajax.check($.fn.scrollTo,\n\t\t\t\t\t`${MyAMS.env.baseURL}../ext/jquery-scrollto${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t\t$(parent).scrollTo(anchor, props);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Store location hash when redirecting to log in form\n\t *\n\t * This helper is used to store window location hash into form input, to redirect\n\t * user correctly after login.\n\t */\n\tsetLoginHash: () => {\n\t\tconst\n\t\t\tform = $('#login_form'),\n\t\t\thash = $(`input[name=\"login_form.widgets.hash\"]`, form);\n\t\thash.val(window.location.hash);\n\t},\n\n\t/**\n\t * SEO input helper\n\t *\n\t * This helper is used to display a small coloured progress bar below a text input\n\t * to display its SEO quality based on text length.\n\t */\n\tsetSEOStatus: (evt) => {\n\t\tconst\n\t\t\tinput = $(evt.target),\n\t\t\tprogress = input.siblings('.progress').children('.progress-bar'),\n\t\t\tlength = Math.min(input.val().length, 100);\n\t\tlet status = 'success';\n\t\tif (length < 20 || length > 80) {\n\t\t\tstatus = 'danger';\n\t\t} else if (length < 40 || length > 66) {\n\t\t\tstatus = 'warning';\n\t\t}\n\t\tprogress.removeClassPrefix('bg-')\n\t\t\t\t.addClass('bg-' + status)\n\t\t\t\t.css('width', length + '%');\n\t},\n\n\t/**\n\t * Select2 change helper\n\t *\n\t * This helper is used to handle a change event on a Select2 input. Data attributes\n\t * defined on Select2 input can be used to define behaviour of this helper:\n\t *  - data-ams-select2-helper-type: can be set to \"html\" when HTML code is loaded via a\n\t *    webservice call, and included into a *target* element\n\t *  - data-ams-select2-helper-url: remote webservice URL\n\t *  - data-ams-select2-helper-target: CSS selector of a DOM element which will receive\n\t *    result of a webservice call\n\t *  - data-ams-select2-helper-argument: name of the argument used to call webservice; if\n\t *    not defined, the used name is 'value'; this argument is filled with the selected value\n\t *    of the Select2 input\n\t *  - data-ams-select2-helper-callback: name of a callback function which can be used to\n\t *    handle webservice result; if no callback is defined, the webservice result will be\n\t *    inserted directly into defined target\n\t */\n\tselect2ChangeHelper: (evt) => {\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tconst\n\t\t\t\tsource = $(evt.currentTarget),\n\t\t\t\tdata = source.data(),\n\t\t\t\ttarget = $(data.amsSelect2HelperTarget),\n\t\t\t\tparams = {};\n\t\t\tlet callback;\n\t\t\tswitch (data.amsSelect2HelperType) {\n\n\t\t\t\tcase 'html':\n\t\t\t\t\ttarget.html('<div class=\"text-center\"><i class=\"fas fa-2x fa-spinner fa-spin\"></i></div>');\n\t\t\t\t\tparams[data.amsSelect2HelperArgument || 'value'] = source.val();\n\t\t\t\t\t$.get(data.amsSelect2HelperUrl, params).then((result) => {\n\t\t\t\t\t\tcallback = MyAMS.core.getFunctionByName(data.amsSelect2HelperCallback) || ((result) => {\n\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\ttarget.html(result);\n\t\t\t\t\t\t\t\tMyAMS.core.initContent(target).then(() => {\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttarget.empty();\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcallback(result);\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\ttarget.empty();\n\t\t\t\t\t\treject();\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tcallback = data.amsSelect2HelperCallback;\n\t\t\t\t\tif (callback) {\n\t\t\t\t\t\tMyAMS.core.executeFunctionByName(callback, source, data);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a DOM element with content provided in\n\t * the <code>options</code> object.\n\t *\n\t * @param form: optional parent element\n\t * @param options: element properties:\n\t *   - object_id: ID of the refreshed element\n\t *   - content: new element content\n\t */\n\trefreshElement: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet element = $(`[id=\"${options.object_id}\"]`);\n\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.clearContent, document, element).then(() => {\n\t\t\t\telement.replaceWith($(options.content));\n\t\t\t\telement = $(`[id=\"${options.object_id}\"]`);\n\t\t\t\tconst parent = element.parents().first();\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent, document, parent).then(() => {\n\t\t\t\t\tresolve(element);\n\t\t\t\t}, reject);\n\t\t\t}, reject);\n\t\t});\n\t},\n\n\t/**\n\t * Hide DOM element\n\t *\n\t * @param form: optional parent element\n\t * @param options: element properties:\n\t *   - selector: JQuery object selector\n\t */\n\thideElement: (form, options) => {\n\t\t$(options.selector, form).hide();\n\t},\n\n\t/**\n\t * Remove DOM element\n\t *\n\t * @param form: optional parent element\n\t * @param options: element properties:\n\t *   - selector: JQuery object selector\n\t */\n\tremoveElement: (form, options) => {\n\t\t$(options.selector, form).remove();\n\t},\n\n\t/**\n\t * Refresh a form widget with content provided in\n\t * the <code>options</code> object\n\t *\n\t * @param form: optional parent form\n\t * @param options: updated widget properties:\n\t *   - widget_id: ID of the refreshed widget\n\t *   - content: new element content\n\t */\n\trefreshWidget: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet widget = $(`[id=\"${options.widget_id}\"]`),\n\t\t\t\tgroup = widget.parents('.widget-group');\n\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.clearContent, document, group).then(() => {\n\t\t\t\tgroup.replaceWith($(options.content));\n\t\t\t\twidget = $(`[id=\"${options.widget_id}\"]`);\n\t\t\t\tgroup = widget.parents('.widget-group');\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent, document, group).then(() => {\n\t\t\t\t\tresolve(widget);\n\t\t\t\t}, reject);\n\t\t\t}, reject);\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a whole table with content provided in\n\t * the <code>options</code> object\n\t *\n\t * @param form: optional parent form\n\t * @param options: updated table properties:\n\t *    - table_id: ID of the refreshed table\n\t *    - content: new table HTML content\n\t */\n\trefreshTable: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst selector = `table[id=\"${options.table_id}\"]`;\n\t\t\tlet table = $(selector);\n\t\t\tif (!table.exists()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (table.hasClass('datatable')) {\n\t\t\t\tconst dtTable = table.DataTable();\n\t\t\t\tif (dtTable) {\n\t\t\t\t\tdtTable.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t\ttable.replaceWith($(options.content));\n\t\t\ttable = $(selector);\n\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent,\n\t\t\t\tdocument, table.parent()).then(() => {\n\t\t\t\tresolve(table);\n\t\t\t}, reject);\n\t\t});\n\t},\n\n\t/**\n\t * Add new row to table\n\t *\n\t * @param form: optional parent form\n\t * @param options: added row properties:\n\t *    - table_id: updated table ID\n\t *    - row_id: updated row ID\n\t *    - data: updated row data\n\t *    - content: updated row HTML content\n\t */\n\taddTableRow: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst\n\t\t\t\tselector = `table[id=\"${options.table_id}\"]`,\n\t\t\t\ttable = $(selector),\n\t\t\t\tdtTable = table.DataTable();\n\t\t\tlet newRow;\n\t\t\tif (options.data) {\n\t\t\t\tdtTable.rows.add(options.data).draw();\n\t\t\t\tnewRow = $(`tr[id=\"${options.row_id}\"]`, table);\n\t\t\t\tresolve(newRow);\n\t\t\t} else {\n\t\t\t\tnewRow = $(options.content);\n\t\t\t\tdtTable.rows.add(newRow).draw();\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent,\n\t\t\t\t\tdocument, newRow).then(() => {\n\t\t\t\t\tresolve(newRow);\n\t\t\t\t}, reject);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a table row with content provided in\n\t * the <code>options</code> object\n\t *\n\t * @param form: optional parent form\n\t * @param options: updated row properties:\n\t *   - row_id: ID of the refreshed row\n\t *   - content: new row content\n\t */\n\trefreshTableRow: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst\n\t\t\t\tselector = `tr[id=\"${options.row_id}\"]`,\n\t\t\t\trow = $(selector),\n\t\t\t\ttable = row.parents('table').first();\n\t\t\tif (options.data) {\n\t\t\t\tif ($.fn.DataTable) {\n\t\t\t\t\tconst dtTable = table.DataTable();\n\t\t\t\t\tif (typeof options.data === 'string') {\n\t\t\t\t\t\tdtTable.row(selector).remove();\n\t\t\t\t\t\tdtTable.row.add($(options.data)).draw();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdtTable.row(selector).data(options.data).draw();\n\t\t\t\t\t}\n\t\t\t\t\tresolve(row);\n\t\t\t\t} else {\n\t\t\t\t\treject('No DataTable plug-in available!');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst newRow = $(options.content);\n\t\t\t\trow.replaceWith(newRow);\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent,\n\t\t\t\t\tdocument, newRow).then(() => {\n\t\t\t\t\tresolve(newRow);\n\t\t\t\t}, reject);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Delete a table row with given ID\n\t *\n\t * @param form: optional parent form\n\t * @param options: removed row properties:\n\t *   - row_id: ID of the deleted row\n\t */\n\tdeleteTableRow: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst\n\t\t\t\tselector = `tr[id=\"${options.row_id}\"]`,\n\t\t\t\trow = $(selector),\n\t\t\t\ttable = row.parents('table').first();\n\t\t\tif ($.fn.DataTable) {\n\t\t\t\tconst dtTable = table.DataTable();\n\t\t\t\tdtTable.row(selector).remove();\n\t\t\t\tdtTable.draw();\n\t\t\t} else {\n\t\t\t\trow.remove();\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a single image with content provided in\n\t * the <code>options</code> object.\n\t *\n\t * @param form: optional parent element\n\t * @param options: image properties:\n\t *   - image_id: ID of the refreshed image\n\t *   - src: new image source URL\n\t */\n\trefreshImage: (form, options) => {\n\t\tconst image = $(`[id=\"${options.image_id}\"]`);\n\t\timage.attr('src', options.src);\n\t},\n\n\t/**\n\t * Move given element to the end of it's parent\n\t *\n\t * @param element: the element to be moved\n\t * @returns {*}\n\t */\n\tmoveElementToParentEnd: (element) => {\n\t\tconst parent = element.parent();\n\t\treturn element.detach()\n\t\t\t.appendTo(parent);\n\t},\n\n\t/**\n\t * Add given element to the end of specified parent\n\t *\n\t * @param source: event source\n\t * @param element: the provided element\n\t * @param parent: the parent to which element should be added\n\t * @param props: additional props\n\t * @returns {*}\n\t */\n\taddElementToParent: (source, {element, parent, ...props}) => {\n\t\telement = $(element);\n\t\tparent = $(parent);\n\t\tconst result = element.appendTo(parent);\n\t\tif (props.scrollTo) {\n\t\t\tMyAMS.helpers.scrollTo(props.scrollParent, element);\n\t\t}\n\t\treturn result;\n\t},\n\n\t/**\n\t * Toggle dropdown associated with given event target\n\t *\n\t * @param evt: source event\n\t */\n\thideDropdown: (evt) => {\n\t\t$(evt.target).closest('.dropdown-menu').dropdown('hide');\n\t}\n};\n\n\n/**\n * Global module initialization\n */\nif (window.MyAMS) {\n\tif (MyAMS.env.bundle) {\n\t\tMyAMS.config.modules.push('helpers');\n\t} else {\n\t\tMyAMS.helpers = helpers;\n\t\tconsole.debug(\"MyAMS: helpers module loaded...\");\n\t}\n}\n"],"mappings":"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","ignoreList":[]}