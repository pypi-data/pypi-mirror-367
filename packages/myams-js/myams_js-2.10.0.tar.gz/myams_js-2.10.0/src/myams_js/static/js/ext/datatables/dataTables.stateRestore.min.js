/*! StateRestore 1.4.1
 * © SpryMedia Ltd - datatables.net/license
 */
!function(e){if("function"==typeof define&&define.amd)define(["jquery","datatables.net"],(function(t){return e(t,window,document)}));else if("object"==typeof exports){var t=require("jquery"),s=function(e,t){t.fn.dataTable||require("datatables.net")(e,t)};"undefined"==typeof window?module.exports=function(o,i){return o||(o=window),i||(i=t(o)),s(o,i),e(i,o,o.document)}:(s(window,t),module.exports=e(t,window,window.document))}else e(jQuery,window,document)}((function(e,t,s){"use strict";var o=e.fn.dataTable;return function(){var t,i;var a,n,r=function(){function e(s,o,a,n,r,c){if(void 0===n&&(n=void 0),void 0===r&&(r=!1),void 0===c&&(c=function(){return null}),!i||!i.versionCheck||!i.versionCheck("1.10.0"))throw new Error("StateRestore requires DataTables 1.10 or newer");if(!i.Buttons)throw new Error("StateRestore requires Buttons");var l=new i.Api(s);this.classes=t.extend(!0,{},e.classes),this.c=t.extend(!0,{},e.defaults,o),this.s={dt:l,identifier:a,isPreDefined:r,savedState:null,tableId:n&&n.stateRestore?n.stateRestore.tableId:void 0},this.dom={background:t('<div class="'+this.classes.background+'"/>'),closeButton:t('<div class="'+this.classes.closeButton+'">&times;</div>'),confirmation:t('<div class="'+this.classes.confirmation+'"/>'),confirmationButton:t('<button class="'+this.classes.confirmationButton+" "+this.classes.dtButton+'">'),confirmationTitleRow:t('<div class="'+this.classes.confirmationTitleRow+'"></div>'),dtContainer:t(this.s.dt.table().container()),duplicateError:t('<span class="'+this.classes.modalError+'">'+this.s.dt.i18n("stateRestore.duplicateError",this.c.i18n.duplicateError)+"</span>"),emptyError:t('<span class="'+this.classes.modalError+'">'+this.s.dt.i18n("stateRestore.emptyError",this.c.i18n.emptyError)+"</span>"),removeContents:t('<div class="'+this.classes.confirmationText+'"><span>'+this.s.dt.i18n("stateRestore.removeConfirm",this.c.i18n.removeConfirm).replace(/%s/g,e.entityEncode(this.s.identifier))+"</span></div>"),removeError:t('<span class="'+this.classes.modalError+'">'+this.s.dt.i18n("stateRestore.removeError",this.c.i18n.removeError)+"</span>"),removeTitle:t('<h2 class="'+this.classes.confirmationTitle+'">'+this.s.dt.i18n("stateRestore.removeTitle",this.c.i18n.removeTitle)+"</h2>"),renameContents:t('<div class="'+this.classes.confirmationText+" "+this.classes.renameModal+'"><label class="'+this.classes.confirmationMessage+'">'+this.s.dt.i18n("stateRestore.renameLabel",this.c.i18n.renameLabel).replace(/%s/g,e.entityEncode(this.s.identifier))+"</label></div>"),renameInput:t('<input class="'+this.classes.input+'" type="text"></input>'),renameTitle:t('<h2 class="'+this.classes.confirmationTitle+'">'+this.s.dt.i18n("stateRestore.renameTitle",this.c.i18n.renameTitle)+"</h2>")},this.save(n,c)}return e.prototype.remove=function(e){var o,i,a=this;if(void 0===e&&(e=!1),!this.c.remove)return!1;var n={action:"remove",stateRestore:(o={},o[this.s.identifier]=this.s.savedState,o)},r=function(){a.dom.confirmation.trigger("dtsr-remove"),t(a.s.dt.table().node()).trigger("stateRestore-change"),a.dom.background.click(),a.dom.confirmation.remove(),t(s).unbind("keyup",(function(e){return a._keyupFunction(e)})),a.dom.confirmationButton.off("click")};return this.c.ajax?"string"==typeof this.c.ajax&&this.s.dt.settings()[0]._bInitComplete?i=function(){return t.ajax({data:n,success:r,type:"POST",url:a.c.ajax}),!0}:"function"==typeof this.c.ajax&&(i=function(){return"function"==typeof a.c.ajax&&a.c.ajax.call(a.s.dt,n,r),!0}):i=function(){try{localStorage.removeItem("DataTables_stateRestore_"+a.s.identifier+"_"+location.pathname+(a.s.tableId?"_"+a.s.tableId:"")),r()}catch(e){return a.dom.confirmation.children("."+a.classes.modalError).remove(),a.dom.confirmation.append(a.dom.removeError),"remove"}return!0},e?(this.dom.confirmation.appendTo(this.dom.dtContainer),t(this.s.dt.table().node()).trigger("dtsr-modal-inserted"),i(),this.dom.confirmation.remove()):this._newModal(this.dom.removeTitle,this.s.dt.i18n("stateRestore.removeSubmit",this.c.i18n.removeSubmit),i,this.dom.removeContents),!0},e.prototype.compare=function(e){if(this.c.saveState.order||(e.order=void 0),this.c.saveState.search||(e.search=void 0),this.c.saveState.columns&&e.columns)for(var t=0,s=e.columns.length;t<s;t++)"boolean"==typeof this.c.saveState.columns||this.c.saveState.columns.visible||(e.columns[t].visible=void 0),"boolean"==typeof this.c.saveState.columns||this.c.saveState.columns.search||(e.columns[t].search=void 0);else this.c.saveState.columns||(e.columns=void 0);this.c.saveState.paging||(e.page=void 0),this.c.saveState.searchBuilder||(e.searchBuilder=void 0),this.c.saveState.searchPanes||(e.searchPanes=void 0),this.c.saveState.select||(e.select=void 0),this.c.saveState.colReorder||(e.ColReorder=void 0),this.c.saveState.scroller||(e.scroller=void 0,void 0!==i.Scroller&&(e.start=0)),this.c.saveState.paging||(e.start=0),this.c.saveState.length||(e.length=void 0),delete e.time;var o=this.s.savedState;return delete o.time,delete o.c,delete o.stateRestore,this._deepCompare(e,o)},e.prototype.destroy=function(){t.each(this.dom,(function(e,t){t.off().remove()}))},e.prototype.load=function(){var e=this,s=this.s.savedState,i=this.s.dt.settings()[0];s.time=+new Date,i.oLoadedState=t.extend(!0,{},s),t("div.dt-button-background").click();var a=function(){e.s.dt.one("preDraw",(function(t,o){setTimeout((function(){var t=o._iDisplayStart/o._iDisplayLength,i=s.start/s.length;t>=0&&i>=0&&t!==i&&e.s.dt.page(i).draw(!1)}),50)})),e.s.dt.draw(!1)};return o.versionCheck("2")?(this.s.dt.state(s),a()):o.ext.oApi._fnImplementState(i,s,a),s},e.prototype.rename=function(e,o){var i=this;if(void 0===e&&(e=null),this.c.rename){var a=function(){var a;if(null===e){var n=t("input."+i.classes.input.replace(/ /g,".")).val();if(0===n.length)return i.dom.confirmation.children("."+i.classes.modalError).remove(),i.dom.confirmation.append(i.dom.emptyError),"empty";if(o.includes(n))return i.dom.confirmation.children("."+i.classes.modalError).remove(),i.dom.confirmation.append(i.dom.duplicateError),"duplicate";e=n}var r={action:"rename",stateRestore:(a={},a[i.s.identifier]=e,a)},c=function(){i.s.identifier=e,i.save(i.s.savedState,(function(){return null}),!1),i.dom.removeContents=t('<div class="'+i.classes.confirmationText+'"><span>'+i.s.dt.i18n("stateRestore.removeConfirm",i.c.i18n.removeConfirm).replace(/%s/g,i.s.identifier)+"</span></div>"),i.dom.confirmation.trigger("dtsr-rename"),i.dom.background.click(),i.dom.confirmation.remove(),t(s).unbind("keyup",(function(e){return i._keyupFunction(e)})),i.dom.confirmationButton.off("click")};if(i.c.ajax)"string"==typeof i.c.ajax&&i.s.dt.settings()[0]._bInitComplete?t.ajax({data:r,success:c,type:"POST",url:i.c.ajax}):"function"==typeof i.c.ajax&&i.c.ajax.call(i.s.dt,r,c);else try{localStorage.removeItem("DataTables_stateRestore_"+i.s.identifier+"_"+location.pathname+(i.s.tableId?"_"+i.s.tableId:"")),c()}catch(e){return i.dom.confirmation.children("."+i.classes.modalError).remove(),i.dom.confirmation.append(i.dom.removeError),!1}return!0};if(null!==e){if(o.includes(e))throw new Error(this.s.dt.i18n("stateRestore.duplicateError",this.c.i18n.duplicateError));if(0===e.length)throw new Error(this.s.dt.i18n("stateRestore.emptyError",this.c.i18n.emptyError));this.dom.confirmation.appendTo(this.dom.dtContainer),t(this.s.dt.table().node()).trigger("dtsr-modal-inserted"),a(),this.dom.confirmation.remove()}else this.dom.renameInput.val(this.s.identifier),this.dom.renameContents.append(this.dom.renameInput),this._newModal(this.dom.renameTitle,this.s.dt.i18n("stateRestore.renameButton",this.c.i18n.renameButton),a,this.dom.renameContents)}},e.prototype.save=function(e,s,o){var a,n=this;if(void 0===o&&(o=!0),this.c.save){var r;if(this.s.dt.state.save(),void 0===e)r=this.s.dt.state();else{if("object"!=typeof e)return;r=e}if(r.stateRestore?(r.stateRestore.isPreDefined=this.s.isPreDefined,r.stateRestore.state=this.s.identifier,r.stateRestore.tableId=this.s.tableId):r.stateRestore={isPreDefined:this.s.isPreDefined,state:this.s.identifier,tableId:this.s.tableId},this.s.savedState=r,this.c.saveState.order||(this.s.savedState.order=void 0),this.c.saveState.search||(this.s.savedState.search=void 0),this.c.saveState.columns&&this.s.savedState.columns)for(var c=0,l=this.s.savedState.columns.length;c<l;c++)"boolean"==typeof this.c.saveState.columns||this.c.saveState.columns.visible||(this.s.savedState.columns[c].visible=void 0),"boolean"==typeof this.c.saveState.columns||this.c.saveState.columns.search||(this.s.savedState.columns[c].search=void 0);else this.c.saveState.columns||(this.s.savedState.columns=void 0);if(this.c.saveState.searchBuilder||(this.s.savedState.searchBuilder=void 0),this.c.saveState.searchPanes||(this.s.savedState.searchPanes=void 0),this.c.saveState.select||(this.s.savedState.select=void 0),this.c.saveState.colReorder||(this.s.savedState.ColReorder=void 0),this.c.saveState.scroller||(this.s.savedState.scroller=void 0,void 0!==i.Scroller&&(this.s.savedState.start=0)),this.c.saveState.paging||(this.s.savedState.start=0),this.c.saveState.length||(this.s.savedState.length=void 0),this.s.savedState.c=this.c,this.s.savedState.c.splitSecondaries.length)for(var d=0,h=this.s.savedState.c.splitSecondaries;d<h.length;d++){var u=h[d];u.parent&&(u.parent=void 0)}if(this.s.isPreDefined)s&&s.call(this);else{var m={action:"save",stateRestore:(a={},a[this.s.identifier]=this.s.savedState,a)},v=function(){s&&s.call(n),n.dom.confirmation.trigger("dtsr-save"),t(n.s.dt.table().node()).trigger("stateRestore-change")};this.c.ajax?"string"==typeof this.c.ajax&&o?this.s.dt.settings()[0]._bInitComplete?t.ajax({data:m,success:v,type:"POST",url:this.c.ajax}):this.s.dt.one("init",(function(){t.ajax({data:m,success:v,type:"POST",url:n.c.ajax})})):"function"==typeof this.c.ajax&&o&&this.c.ajax.call(this.s.dt,m,v):(localStorage.setItem("DataTables_stateRestore_"+this.s.identifier+"_"+location.pathname+(this.s.tableId?"_"+this.s.tableId:""),JSON.stringify(this.s.savedState)),v())}}else s&&s.call(this)},e.entityEncode=function(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):e},e.prototype._deepCompare=function(e,t){var s,o,i=[e,t],a=[Object.keys(e).sort(),Object.keys(t).sort()];for(a[0].includes("scroller")&&(s=a[0].indexOf("start"))&&a[0].splice(s,1),a[1].includes("scroller")&&(s=a[1].indexOf("start"))&&a[1].splice(s,1),o=0;o<a[0].length;o++)0!==a[0][o].indexOf("_")?("baseRowTop"===a[0][o]||"baseScrollTop"===a[0][o]||"scrollTop"===a[0][o]||!this.c.saveState.paging&&"page"===a[0][o])&&(a[0].splice(o,1),o--):(a[0].splice(o,1),o--);for(o=0;o<a[1].length;o++)0!==a[1][o].indexOf("_")?("baseRowTop"===a[1][o]||"baseScrollTop"===a[1][o]||"scrollTop"===a[1][o]||!this.c.saveState.paging&&"page"===a[0][o])&&(a[1].splice(o,1),o--):(a[1].splice(o,1),o--);if(0===a[0].length&&a[1].length>0||0===a[1].length&&a[0].length>0)return!1;for(o=0;o<a[0].length;o++)a[1].includes(a[0][o])||(a[0].splice(o,1),o--);for(o=0;o<a[1].length;o++)a[0].includes(a[1][o])||(a[1].splice(o,1),o--);for(o=0;o<a[0].length;o++){if(a[0][o]!==a[1][o]||typeof i[0][a[0][o]]!=typeof i[1][a[1][o]])return!1;if("object"==typeof i[0][a[0][o]]){if(!this._deepCompare(i[0][a[0][o]],i[1][a[1][o]]))return!1}else if("number"==typeof i[0][a[0][o]]&&"number"==typeof i[1][a[1][o]]){if(Math.round(i[0][a[0][o]])!==Math.round(i[1][a[1][o]]))return!1}else if(i[0][a[0][o]]!==i[1][a[1][o]])return!1}return!0},e.prototype._keyupFunction=function(e){"Enter"===e.key?this.dom.confirmationButton.click():"Escape"===e.key&&t("div."+this.classes.background.replace(/ /g,".")).click()},e.prototype._newModal=function(e,o,i,a){var n=this;this.dom.background.appendTo(this.dom.dtContainer),this.dom.confirmationTitleRow.empty().append(e),this.dom.confirmationButton.html(o),this.dom.confirmation.empty().append(this.dom.confirmationTitleRow).append(a).append(t('<div class="'+this.classes.confirmationButtons+'"></div>').append(this.dom.confirmationButton)).appendTo(this.dom.dtContainer),t(this.s.dt.table().node()).trigger("dtsr-modal-inserted");var r=a.children("input");r.length>0?t(r[0]).focus():this.dom.confirmationButton.focus();var c=t("div."+this.classes.background.replace(/ /g,"."));this.c.modalCloseButton&&(this.dom.confirmation.append(this.dom.closeButton),this.dom.closeButton.on("click",(function(){return c.click()}))),this.dom.confirmationButton.on("click",(function(){return i()})),this.dom.confirmation.on("click",(function(e){e.stopPropagation()})),c.one("click",(function(){n.dom.background.remove(),n.dom.confirmation.remove(),t(s).unbind("keyup",(function(e){return n._keyupFunction(e)}))})),t(s).on("keyup",(function(e){return n._keyupFunction(e)}))},e.version="1.4.1",e.classes={background:"dtsr-background",closeButton:"dtsr-popover-close",confirmation:"dtsr-confirmation",confirmationButton:"dtsr-confirmation-button",confirmationButtons:"dtsr-confirmation-buttons",confirmationMessage:"dtsr-confirmation-message dtsr-name-label",confirmationText:"dtsr-confirmation-text",confirmationTitle:"dtsr-confirmation-title",confirmationTitleRow:"dtsr-confirmation-title-row",dtButton:"dt-button",input:"dtsr-input",modalError:"dtsr-modal-error",renameModal:"dtsr-rename-modal"},e.defaults={_createInSaved:!1,ajax:!1,create:!0,creationModal:!1,i18n:{creationModal:{button:"Create",colReorder:"Column Order:",columns:{search:"Column Search:",visible:"Column Visibility:"},length:"Page Length:",name:"Name:",order:"Sorting:",paging:"Paging:",scroller:"Scroll Position:",search:"Search:",searchBuilder:"SearchBuilder:",searchPanes:"SearchPanes:",select:"Select:",title:"Create New State",toggleLabel:"Includes:"},duplicateError:"A state with this name already exists.",emptyError:"Name cannot be empty.",emptyStates:"No saved states",removeConfirm:"Are you sure you want to remove %s?",removeError:"Failed to remove state.",removeJoiner:" and ",removeSubmit:"Remove",removeTitle:"Remove State",renameButton:"Rename",renameLabel:"New Name for %s:",renameTitle:"Rename State"},modalCloseButton:!0,remove:!0,rename:!0,save:!0,saveState:{colReorder:!0,columns:{search:!0,visible:!0},length:!0,order:!0,paging:!0,scroller:!0,search:!0,searchBuilder:!0,searchPanes:!0,select:!0},splitSecondaries:["updateState","renameState","removeState"],toggle:{colReorder:!1,columns:{search:!1,visible:!1},length:!1,order:!1,paging:!1,scroller:!1,search:!1,searchBuilder:!1,searchPanes:!1,select:!1}},e}();var c,l=function(){function e(t,s){var o=this;if(!n||!n.versionCheck||!n.versionCheck("1.10.0"))throw new Error("StateRestore requires DataTables 1.10 or newer");if(!n.Buttons)throw new Error("StateRestore requires Buttons");var i=new n.Api(t);if(this.classes=a.extend(!0,{},e.classes),void 0===i.settings()[0]._stateRestore){var r;this.c=a.extend(!0,{},e.defaults,s),this.s={dt:i,hasColReorder:void 0!==n.ColReorder,hasScroller:void 0!==n.Scroller,hasSearchBuilder:void 0!==n.SearchBuilder,hasSearchPanes:void 0!==n.SearchPanes,hasSelect:void 0!==n.select,states:[]},this.s.dt.on("xhr",(function(e,t,s){s&&s.stateRestore&&o._addPreDefined(s.stateRestore)})),this.dom={background:a('<div class="'+this.classes.background+'"/>'),checkboxInputRow:a('<div class="'+this.classes.formRow+'"><label class="'+this.classes.nameLabel+'">'+this.s.dt.i18n("stateRestore.creationModal.toggleLabel",this.c.i18n.creationModal.toggleLabel)+'</label><div class="dtsr-input"></div></div>'),closeButton:a('<div class="'+this.classes.closeButton+'">x</div>'),colReorderToggle:a('<div class="'+this.classes.checkLabel+'"><input type="checkbox" class="'+this.classes.colReorderToggle+" "+this.classes.checkBox+'" checked>'+this.s.dt.i18n("stateRestore.creationModal.colReorder",this.c.i18n.creationModal.colReorder)+"</div>"),columnsSearchToggle:a('<div class="'+this.classes.checkLabel+'"><input type="checkbox" class="'+this.classes.columnsSearchToggle+" "+this.classes.checkBox+'" checked>'+this.s.dt.i18n("stateRestore.creationModal.columns.search",this.c.i18n.creationModal.columns.search)+"</div>"),columnsVisibleToggle:a('<div class="'+this.classes.checkLabel+'"><input type="checkbox" class="'+this.classes.columnsVisibleToggle+" "+this.classes.checkBox+'" checked>'+this.s.dt.i18n("stateRestore.creationModal.columns.visible",this.c.i18n.creationModal.columns.visible)+"</div>"),confirmation:a('<div class="'+this.classes.confirmation+'"/>'),confirmationTitleRow:a('<div class="'+this.classes.confirmationTitleRow+'"></div>'),createButtonRow:a('<div class="'+this.classes.formRow+" "+this.classes.modalFoot+'"><button class="'+this.classes.creationButton+" "+this.classes.dtButton+'">'+this.s.dt.i18n("stateRestore.creationModal.button",this.c.i18n.creationModal.button)+"</button></div>"),creation:a('<div class="'+this.classes.creation+'"/>'),creationForm:a('<div class="'+this.classes.creationForm+'"/>'),creationTitle:a('<div class="'+this.classes.creationText+'"><h2 class="'+this.classes.creationTitle+'">'+this.s.dt.i18n("stateRestore.creationModal.title",this.c.i18n.creationModal.title)+"</h2></div>"),dtContainer:a(this.s.dt.table().container()),duplicateError:a('<span class="'+this.classes.modalError+'">'+this.s.dt.i18n("stateRestore.duplicateError",this.c.i18n.duplicateError)+"</span>"),emptyError:a('<span class="'+this.classes.modalError+'">'+this.s.dt.i18n("stateRestore.emptyError",this.c.i18n.emptyError)+"</span>"),lengthToggle:a('<div class="'+this.classes.checkLabel+'"><input type="checkbox" class="'+this.classes.lengthToggle+" "+this.classes.checkBox+'" checked>'+this.s.dt.i18n("stateRestore.creationModal.length",this.c.i18n.creationModal.length)+"</div>"),nameInputRow:a('<div class="'+this.classes.formRow+'"><label class="'+this.classes.nameLabel+'">'+this.s.dt.i18n("stateRestore.creationModal.name",this.c.i18n.creationModal.name)+'</label><div class="dtsr-input"><input class="'+this.classes.nameInput+'" type="text"></div></div>'),orderToggle:a('<div class="'+this.classes.checkLabel+'"><input type="checkbox" class="'+this.classes.orderToggle+" "+this.classes.checkBox+'" checked>'+this.s.dt.i18n("stateRestore.creationModal.order",this.c.i18n.creationModal.order)+"</div>"),pagingToggle:a('<div class="'+this.classes.checkLabel+'"><input type="checkbox" class="'+this.classes.pagingToggle+" "+this.classes.checkBox+'" checked>'+this.s.dt.i18n("stateRestore.creationModal.paging",this.c.i18n.creationModal.paging)+"</div>"),removeContents:a('<div class="'+this.classes.confirmationText+'"><span></span></div>'),removeTitle:a('<div class="'+this.classes.creationText+'"><h2 class="'+this.classes.creationTitle+'">'+this.s.dt.i18n("stateRestore.removeTitle",this.c.i18n.removeTitle)+"</h2></div>"),scrollerToggle:a('<div class="'+this.classes.checkLabel+'"><input type="checkbox" class="'+this.classes.scrollerToggle+" "+this.classes.checkBox+'" checked>'+this.s.dt.i18n("stateRestore.creationModal.scroller",this.c.i18n.creationModal.scroller)+"</div>"),searchBuilderToggle:a('<div class="'+this.classes.checkLabel+'"><input type="checkbox" class="'+this.classes.searchBuilderToggle+" "+this.classes.checkBox+'" checked>'+this.s.dt.i18n("stateRestore.creationModal.searchBuilder",this.c.i18n.creationModal.searchBuilder)+"</div>"),searchPanesToggle:a('<div class="'+this.classes.checkLabel+'"><input type="checkbox" class="'+this.classes.searchPanesToggle+" "+this.classes.checkBox+'" checked>'+this.s.dt.i18n("stateRestore.creationModal.searchPanes",this.c.i18n.creationModal.searchPanes)+"</div>"),searchToggle:a('<div class="'+this.classes.checkLabel+'"><input type="checkbox" class="'+this.classes.searchToggle+" "+this.classes.checkBox+'" checked>'+this.s.dt.i18n("stateRestore.creationModal.search",this.c.i18n.creationModal.search)+"</div>"),selectToggle:a('<div class="'+this.classes.checkLabel+'"><input type="checkbox" class="'+this.classes.selectToggle+" "+this.classes.checkBox+'" checked>'+this.s.dt.i18n("stateRestore.creationModal.select",this.c.i18n.creationModal.select)+"</div>")},i.settings()[0]._stateRestore=this,this._searchForStates(),this._addPreDefined(this.c.preDefined);var c={action:"load"};return"function"==typeof this.c.ajax?r=function(){"function"==typeof o.c.ajax&&o.c.ajax.call(o.s.dt,c,(function(e){return o._addPreDefined(e)}))}:"string"==typeof this.c.ajax&&(r=function(){a.ajax({data:c,success:function(e){o._addPreDefined(e)},type:"POST",url:o.c.ajax})}),"function"==typeof r&&(this.s.dt.settings()[0]._bInitComplete?r():this.s.dt.one("preInit.dtsr",(function(){r()}))),this.s.dt.on("destroy.dtsr",(function(){o.destroy()})),this.s.dt.on("draw.dtsr buttons-action.dtsr",(function(){return o.findActive()})),this}}return e.prototype.addState=function(e,t,s){var o=this;if(this.c.create&&this.c.save){var i=function(e,i){if(0===e.length)return"empty";if(t.includes(e))return"duplicate";o.s.dt.state.save();var n=o,c=o.s.dt.state();if(c.stateRestore={isPredefined:!1,state:e,tableId:o.s.dt.table().node().id},i.saveState){for(var l=o.c.saveState,d=0,h=Object.keys(i.saveState);d<h.length;d++){var u=h[d];if("object"==typeof i.saveState[u])for(var m=0,v=Object.keys(i.saveState[u]);m<v.length;m++){var g=v[m];i.saveState[u][g]||(l[u][g]=!1)}else i.saveState[u]||(l[u]=!1)}o.c.saveState=l}var f=new r(o.s.dt.settings()[0],a.extend(!0,{},o.c,s),e,c,!1,(function(){n.s.states.push(this),n._collectionRebuild()}));return a(o.s.dt.table().node()).on("dtsr-modal-inserted",(function(){f.dom.confirmation.one("dtsr-remove",(function(){return o._removeCallback(f.s.identifier)})),f.dom.confirmation.one("dtsr-rename",(function(){return o._collectionRebuild()})),f.dom.confirmation.one("dtsr-save",(function(){return o._collectionRebuild()}))})),!0};if(null!==this.getState(e))throw new Error(this.s.dt.i18n("stateRestore.duplicateError",this.c.i18n.duplicateError));if(this.c.creationModal||void 0!==s&&s.creationModal)this._creationModal(i,e,s);else{var n=i(e,{});if("empty"===n)throw new Error(this.s.dt.i18n("stateRestore.emptyError",this.c.i18n.emptyError));if("duplicate"===n)throw new Error(this.s.dt.i18n("stateRestore.duplicateError",this.c.i18n.duplicateError))}}},e.prototype.removeAll=function(e){if(0!==this.s.states.length){var t=this.s.states.map((function(e){return e.s.identifier})),s=t[0];t.length>1&&(s=t.slice(0,-1).join(", ")+this.s.dt.i18n("stateRestore.removeJoiner",this.c.i18n.removeJoiner)+t.slice(-1)),a(this.dom.removeContents.children("span")).html(this.s.dt.i18n("stateRestore.removeConfirm",this.c.i18n.removeConfirm).replace(/%s/g,s)),this._newModal(this.dom.removeTitle,this.s.dt.i18n("stateRestore.removeSubmit",this.c.i18n.removeSubmit),e,this.dom.removeContents)}},e.prototype.destroy=function(){for(var e=0,t=this.s.states;e<t.length;e++){t[e].destroy()}a.each(this.dom,(function(e,t){t.off().remove()})),this.s.states=[],this.s.dt.off(".dtsr"),a(this.s.dt.table().node()).off(".dtsr")},e.prototype.findActive=function(){this.s.dt.state.save();for(var e,t=this.s.dt.state(),s=this.s.dt.buttons().nodes(),o=0,i=s;o<i.length;o++)e=i[o],(a(e).hasClass("dtsr-state")||a(e).children().hasClass("dtsr-state"))&&this.s.dt.button(e).active(!1);for(var n=[],r=0,c=this.s.states;r<c.length;r++){var l=c[r];if(l.compare(t)){n.push({data:l.s.savedState,name:l.s.identifier});for(var d=0,h=s;d<h.length;d++){e=h[d];var u=this.s.dt.button(e);if(u.text()===l.s.identifier){u.active(!0);break}}}}return n},e.prototype.getState=function(e){for(var t=0,s=this.s.states;t<s.length;t++){var o=s[t];if(o.s.identifier===e)return o}return null},e.prototype.getStates=function(e){if(void 0===e)return this.s.states;for(var t=[],s=0,o=e;s<o.length;s++){for(var i=o[s],a=!1,n=0,r=this.s.states;n<r.length;n++){var c=r[n];if(i===c.s.identifier){t.push(c),a=!0;break}}a||t.push(void 0)}return t},e.prototype._addPreDefined=function(e){for(var t=this,s=Object.keys(e).sort((function(e,t){return e>t?1:e<t?-1:0})),o=function(s){for(var o=0;o<i.s.states.length;o++)i.s.states[o].s.identifier===s&&i.s.states.splice(o,1);var n=i,c=e[s],l=new r(i.s.dt,a.extend(!0,{},i.c,void 0!==c.c?{saveState:c.c.saveState}:void 0,!0),s,c,!0,(function(){n.s.states.push(this),n._collectionRebuild()}));l.s.savedState=c,a(i.s.dt.table().node()).on("dtsr-modal-inserted",(function(){l.dom.confirmation.one("dtsr-remove",(function(){return t._removeCallback(l.s.identifier)})),l.dom.confirmation.one("dtsr-rename",(function(){return t._collectionRebuild()})),l.dom.confirmation.one("dtsr-save",(function(){return t._collectionRebuild()}))}))},i=this,n=0,c=s;n<c.length;n++){o(c[n])}},e.prototype._collectionRebuild=function(){var e,t=this.s.dt.button("SaveStateRestore:name"),s=[];if(t[0]){var o=t.index().split("-");for(s=t[0].inst.c.buttons,e=0;e<o.length;e++){if(!s[o[e]].buttons){s=[];break}s=s[o[e]].buttons}}for(e=0;e<s.length;e++)"stateRestore"===s[e].extend&&(s.splice(e,1),e--);this.c._createInSaved&&s.push("createState");var i='<span class="'+this.classes.emptyStates+'">'+this.s.dt.i18n("stateRestore.emptyStates",this.c.i18n.emptyStates)+"</span>";if(0===this.s.states.length)s.includes(i)||s.push(i);else{for(;s.includes(i);)s.splice(s.indexOf(i),1);this.s.states=this.s.states.sort((function(e,t){var s=e.s.identifier,o=t.s.identifier;return s>o?1:s<o?-1:0}));for(var n=0,c=this.s.states;n<c.length;n++){var l=c[n],d=this.c.splitSecondaries.slice();!d.includes("updateState")||this.c.save&&l.c.save||d.splice(d.indexOf("updateState"),1),!d.includes("renameState")||this.c.save&&l.c.save&&this.c.rename&&l.c.rename||d.splice(d.indexOf("renameState"),1),!d.includes("removeState")||this.c.remove&&l.c.remove||d.splice(d.indexOf("removeState"),1),s.push({_stateRestore:l,attr:{title:l.s.identifier},config:{split:d},extend:"stateRestore",text:r.entityEncode(l.s.identifier),popoverTitle:r.entityEncode(l.s.identifier)})}}t.collectionRebuild(s);for(var h=0,u=this.s.dt.buttons();h<u.length;h++){var m=u[h];a(m.node).hasClass("dtsr-removeAllStates")&&(0===this.s.states.length?this.s.dt.button(m.node).disable():this.s.dt.button(m.node).enable())}},e.prototype._creationModal=function(e,t,o){var i=this;this.dom.creation.empty(),this.dom.creationForm.empty(),this.dom.nameInputRow.find("input").val(t),this.dom.creationForm.append(this.dom.nameInputRow);var n,r=this.s.dt.settings()[0].oInit,c=[],l=void 0!==o&&void 0!==o.toggle;((!l||void 0===o.toggle.order)&&this.c.toggle.order||l&&o.toggle.order)&&this.c.saveState.order&&(void 0===r.ordering||r.ordering)&&c.push(this.dom.orderToggle),((!l||void 0===o.toggle.search)&&this.c.toggle.search||l&&o.toggle.search)&&this.c.saveState.search&&(void 0===r.searching||r.searching)&&c.push(this.dom.searchToggle),((!l||void 0===o.toggle.paging)&&this.c.toggle.paging||l&&o.toggle.paging)&&this.c.saveState.paging&&(void 0===r.paging||r.paging)&&c.push(this.dom.pagingToggle),((!l||void 0===o.toggle.length)&&this.c.toggle.length||l&&o.toggle.length)&&this.c.saveState.length&&(void 0===r.length||r.length)&&c.push(this.dom.lengthToggle),this.s.hasColReorder&&((!l||void 0===o.toggle.colReorder)&&this.c.toggle.colReorder||l&&o.toggle.colReorder)&&this.c.saveState.colReorder&&c.push(this.dom.colReorderToggle),this.s.hasScroller&&((!l||void 0===o.toggle.scroller)&&this.c.toggle.scroller||l&&o.toggle.scroller)&&this.c.saveState.scroller&&c.push(this.dom.scrollerToggle),this.s.hasSearchBuilder&&((!l||void 0===o.toggle.searchBuilder)&&this.c.toggle.searchBuilder||l&&o.toggle.searchBuilder)&&this.c.saveState.searchBuilder&&c.push(this.dom.searchBuilderToggle),this.s.hasSearchPanes&&((!l||void 0===o.toggle.searchPanes)&&this.c.toggle.searchPanes||l&&o.toggle.searchPanes)&&this.c.saveState.searchPanes&&c.push(this.dom.searchPanesToggle),this.s.hasSelect&&((!l||void 0===o.toggle.select)&&this.c.toggle.select||l&&o.toggle.select)&&this.c.saveState.select&&c.push(this.dom.selectToggle),"boolean"==typeof this.c.toggle.columns&&((!l||void 0===o.toggle.order)&&this.c.toggle.columns||l&&o.toggle.order)&&this.c.saveState.columns?(c.push(this.dom.columnsSearchToggle),c.push(this.dom.columnsVisibleToggle)):(l&&void 0!==o.toggle.columns||"boolean"==typeof this.c.toggle.columns)&&"boolean"==typeof o.toggle.order||("boolean"!=typeof this.c.saveState.columns&&this.c.saveState.columns?((l&&void 0!==o.toggle.columns&&"boolean"!=typeof o.toggle.columns&&o.toggle.columns.search||(!l||void 0===o.toggle.columns||"boolean"!=typeof o.toggle.columns&&void 0===o.toggle.columns.search)&&"boolean"!=typeof this.c.toggle.columns&&this.c.toggle.columns.search)&&this.c.saveState.columns.search&&c.push(this.dom.columnsSearchToggle),(l&&void 0!==o.toggle.columns&&"boolean"!=typeof o.toggle.columns&&o.toggle.columns.visible||(!l||void 0===o.toggle.columns||"boolean"!=typeof o.toggle.columns&&void 0===o.toggle.columns.visible)&&"boolean"!=typeof this.c.toggle.columns&&this.c.toggle.columns.visible)&&this.c.saveState.columns.visible&&c.push(this.dom.columnsVisibleToggle)):this.c.saveState.columns&&(c.push(this.dom.columnsSearchToggle),c.push(this.dom.columnsVisibleToggle))),c.sort((function(e,t){var s=e.text(),o=t.text();return s<o?-1:s>o?1:0}));for(var d=this.dom.checkboxInputRow.appendTo(this.dom.creationForm).find("div.dtsr-input").empty(),h=0,u=c;h<u.length;h++)n=u[h],d.append(n);this.dom.background.appendTo(this.dom.dtContainer),this.dom.creation.append(this.dom.creationTitle).append(this.dom.creationForm).append(this.dom.createButtonRow).appendTo(this.dom.dtContainer),a(this.s.dt.table().node()).trigger("dtsr-modal-inserted");for(var m=0,v=c;m<v.length;m++)n=v[m],a(n.children("label:last-child")).on("click",(function(){n.children("input").prop("checked",!n.children("input").prop("checked"))}));var g=a("button."+this.classes.creationButton.replace(/ /g,".")),f=this.dom.creationForm.find("input");f.length>0?a(f[0]).focus():g.focus();var p=a("div."+this.classes.background.replace(/ /g,".")),b=function(e){"Enter"===e.key?g.click():"Escape"===e.key&&p.click()};this.c.modalCloseButton&&(this.dom.creation.append(this.dom.closeButton),this.dom.closeButton.on("click",(function(){return p.click()}))),g.on("click",(function(){var t={colReorder:i.dom.colReorderToggle.find("input").is(":checked"),columns:{search:i.dom.columnsSearchToggle.find("input").is(":checked"),visible:i.dom.columnsVisibleToggle.find("input").is(":checked")},length:i.dom.lengthToggle.find("input").is(":checked"),order:i.dom.orderToggle.find("input").is(":checked"),paging:i.dom.pagingToggle.find("input").is(":checked"),scroller:i.dom.scrollerToggle.find("input").is(":checked"),search:i.dom.searchToggle.find("input").is(":checked"),searchBuilder:i.dom.searchBuilderToggle.find("input").is(":checked"),searchPanes:i.dom.searchPanesToggle.find("input").is(":checked"),select:i.dom.selectToggle.find("input").is(":checked")},o=e(a("input."+i.classes.nameInput.replace(/ /g,".")).val(),{saveState:t});!0===o?(i.dom.background.remove(),i.dom.creation.remove(),a(s).unbind("keyup",b)):(i.dom.creation.children("."+i.classes.modalError).remove(),i.dom.creation.append(i.dom[o+"Error"]))})),p.one("click",(function(){i.dom.background.remove(),i.dom.creation.remove(),a(s).unbind("keyup",b),i._collectionRebuild()})),a(s).on("keyup",b),this.s.dt.state.save()},e.prototype._removeCallback=function(e){for(var t=0;t<this.s.states.length;t++)this.s.states[t].s.identifier===e&&(this.s.states.splice(t,1),t--);return this._collectionRebuild(),!0},e.prototype._newModal=function(e,t,o,i){var n=this;this.dom.background.appendTo(this.dom.dtContainer),this.dom.confirmationTitleRow.empty().append(e);var r=a('<button class="'+this.classes.confirmationButton+" "+this.classes.dtButton+'">'+t+"</button>");this.dom.confirmation.empty().append(this.dom.confirmationTitleRow).append(i).append(a('<div class="'+this.classes.confirmationButtons+'"></div>').append(r)).appendTo(this.dom.dtContainer),a(this.s.dt.table().node()).trigger("dtsr-modal-inserted");var c=i.children("input");c.length>0?a(c[0]).focus():r.focus();var l=a("div."+this.classes.background.replace(/ /g,".")),d=function(e){"Enter"===e.key?r.click():"Escape"===e.key&&l.click()};r.on("click",(function(){var e=o(!0);!0===e?(n.dom.background.remove(),n.dom.confirmation.remove(),a(s).unbind("keyup",d),r.off("click")):(n.dom.confirmation.children("."+n.classes.modalError).remove(),n.dom.confirmation.append(n.dom[e+"Error"]))})),this.dom.confirmation.on("click",(function(e){e.stopPropagation()})),l.one("click",(function(){n.dom.background.remove(),n.dom.confirmation.remove(),a(s).unbind("keyup",d)})),a(s).on("keyup",d)},e.prototype._searchForStates=function(){for(var e=this,t=Object.keys(localStorage),s=function(t){if(t.match(new RegExp("^DataTables_stateRestore_.*_"+location.pathname+"$"))||t.match(new RegExp("^DataTables_stateRestore_.*_"+location.pathname+"_"+o.s.dt.table().node().id+"$"))){var s=JSON.parse(localStorage.getItem(t));if(s.stateRestore.isPreDefined||s.stateRestore.tableId&&s.stateRestore.tableId!==o.s.dt.table().node().id)return"continue";var i=o,n=new r(o.s.dt,a.extend(!0,{},o.c,{saveState:s.c.saveState}),s.stateRestore.state,s,!1,(function(){this.s.savedState=s,i.s.states.push(this),i._collectionRebuild()}));a(o.s.dt.table().node()).on("dtsr-modal-inserted",(function(){n.dom.confirmation.one("dtsr-remove",(function(){return e._removeCallback(n.s.identifier)})),n.dom.confirmation.one("dtsr-rename",(function(){return e._collectionRebuild()})),n.dom.confirmation.one("dtsr-save",(function(){return e._collectionRebuild()}))}))}},o=this,i=0,n=t;i<n.length;i++){s(n[i])}},e.version="1.0.0",e.classes={background:"dtsr-background",checkBox:"dtsr-check-box",checkLabel:"dtsr-check-label",checkRow:"dtsr-check-row",closeButton:"dtsr-popover-close",colReorderToggle:"dtsr-colReorder-toggle",columnsSearchToggle:"dtsr-columns-search-toggle",columnsVisibleToggle:"dtsr-columns-visible-toggle",confirmation:"dtsr-confirmation",confirmationButton:"dtsr-confirmation-button",confirmationButtons:"dtsr-confirmation-buttons",confirmationMessage:"dtsr-confirmation-message dtsr-name-label",confirmationText:"dtsr-confirmation-text",confirmationTitle:"dtsr-confirmation-title",confirmationTitleRow:"dtsr-confirmation-title-row",creation:"dtsr-creation",creationButton:"dtsr-creation-button",creationForm:"dtsr-creation-form",creationText:"dtsr-creation-text",creationTitle:"dtsr-creation-title",dtButton:"dt-button",emptyStates:"dtsr-emptyStates",formRow:"dtsr-form-row",leftSide:"dtsr-left",lengthToggle:"dtsr-length-toggle",modalError:"dtsr-modal-error",modalFoot:"dtsr-modal-foot",nameInput:"dtsr-name-input",nameLabel:"dtsr-name-label",orderToggle:"dtsr-order-toggle",pagingToggle:"dtsr-paging-toggle",rightSide:"dtsr-right",scrollerToggle:"dtsr-scroller-toggle",searchBuilderToggle:"dtsr-searchBuilder-toggle",searchPanesToggle:"dtsr-searchPanes-toggle",searchToggle:"dtsr-search-toggle",selectToggle:"dtsr-select-toggle",toggleLabel:"dtsr-toggle-title"},e.defaults={_createInSaved:!1,ajax:!1,create:!0,creationModal:!1,i18n:{creationModal:{button:"Create",colReorder:"Column Order",columns:{search:"Column Search",visible:"Column Visibility"},length:"Page Length",name:"Name:",order:"Sorting",paging:"Paging",scroller:"Scroll Position",search:"Search",searchBuilder:"SearchBuilder",searchPanes:"SearchPanes",select:"Select",title:"Create New State",toggleLabel:"Include:"},duplicateError:"A state with this name already exists.",emptyError:"Name cannot be empty.",emptyStates:"No saved states",removeConfirm:"Are you sure you want to remove %s?",removeError:"Failed to remove state.",removeJoiner:" and ",removeSubmit:"Remove",removeTitle:"Remove State",renameButton:"Rename",renameLabel:"New Name for %s:",renameTitle:"Rename State"},modalCloseButton:!0,preDefined:{},remove:!0,rename:!0,save:!0,saveState:{colReorder:!0,columns:{search:!0,visible:!0},length:!0,order:!0,paging:!0,scroller:!0,search:!0,searchBuilder:!0,searchPanes:!0,select:!0},splitSecondaries:["updateState","renameState","removeState"],toggle:{colReorder:!1,columns:{search:!1,visible:!1},length:!1,order:!1,paging:!1,scroller:!1,search:!1,searchBuilder:!1,searchPanes:!1,select:!1}},e}();
/*! StateRestore 1.4.1
     * © SpryMedia Ltd - datatables.net/license
     */t=c=e,i=c.fn.dataTable,function(e){a=e,n=e.fn.dataTable}(e),e.fn.dataTable.StateRestore=r,e.fn.DataTable.StateRestore=r,e.fn.dataTable.StateRestoreCollection=l,e.fn.DataTable.StateRestoreCollection=l;var d=o.Api.register;function h(e,t){u(e,new o.StateRestoreCollection(e,t.config))}function u(t,s){var o,i=t.stateRestore.states(),a=t.button("SaveStateRestore:name"),n=[];if(a[0]){var c=a.index().split("-");for(n=a[0].inst.c.buttons,o=0;o<c.length;o++){if(!n[c[o]].buttons){n=[];break}n=n[c[o]].buttons}}var l=t.settings()[0]._stateRestore.c;for(o=0;o<n.length;o++)"stateRestore"===n[o].extend&&(n.splice(o,1),o--);if(l._createInSaved&&n.push("createState"),void 0===i||0===i.length)n.push('<span class="'+s.classes.emptyStates+'">'+t.i18n("stateRestore.emptyStates",s.c.i18n.emptyStates)+"</span>");else for(var d=0,h=i;d<h.length;d++){var u=h[d],m=l.splitSecondaries.slice();m.includes("updateState")&&!l.save&&m.splice(m.indexOf("updateState"),1),!m.includes("renameState")||l.save&&l.rename||m.splice(m.indexOf("renameState"),1),m.includes("removeState")&&!l.remove&&m.splice(m.indexOf("removeState"),1),n.push({_stateRestore:u,attr:{title:u.s.identifier},config:{split:m},extend:"stateRestore",text:r.entityEncode(u.s.identifier),popoverTitle:r.entityEncode(u.s.identifier)})}t.button("SaveStateRestore:name").collectionRebuild(n);for(var v=0,g=t.buttons();v<g.length;v++){var f=g[v];e(f.node).hasClass("dtsr-removeAllStates")&&(0===i.length?t.button(f.node).disable():t.button(f.node).enable())}}d("stateRestore()",(function(){return this})),d("stateRestore.state()",(function(e){var t=this.context[0];if(!t._stateRestore){var s=o.Api(t);u(s,new o.StateRestoreCollection(s,{}))}return this[0]=t._stateRestore.getState(e),this})),d("stateRestore.state.add()",(function(e,t){var s=this.context[0];if(!s._stateRestore){var i=o.Api(s);u(i,new o.StateRestoreCollection(i,{}))}if(!s._stateRestore.c.create)return this;if(s._stateRestore.addState){for(var a=[],n=0,r=s._stateRestore.s.states;n<r.length;n++){var c=r[n];a.push(c.s.identifier)}return s._stateRestore.addState(e,a,t),this}})),d("stateRestore.states()",(function(e){var t=this.context[0];if(!t._stateRestore){var s=o.Api(t);u(s,new o.StateRestoreCollection(s,{}))}return this.length=0,this.push.apply(this,t._stateRestore.getStates(e)),this})),d("stateRestore.state().save()",(function(){var e=this[0];return e.c.save&&e.save(),this})),d("stateRestore.state().rename()",(function(e){var t=this.context[0],s=this[0];if(s.c.save){for(var o=[],i=0,a=t._stateRestore.s.states;i<a.length;i++){var n=a[i];o.push(n.s.identifier)}s.rename(e,o)}return this})),d("stateRestore.state().load()",(function(){return this[0].load(),this})),d("stateRestore.state().remove()",(function(e){var t=this[0];return t.c.remove&&t.remove(e),this})),d("stateRestore.states().remove()",(function(e){var t=this,s=function(e){for(var s=!0,o=t.toArray();o.length>0;){var i=o[0];if(void 0===i||!i.c.remove)break;var a=i.remove(e);!0!==a?s=a:o.splice(0,1)}return s};return this.context[0]._stateRestore&&this.context[0]._stateRestore.c.remove&&(e?s(e):this.context[0]._stateRestore.removeAll(s)),this})),d("stateRestore.activeStates()",(function(){var e=this.context[0];if(this.length=0,!e._stateRestore){var t=o.Api(e);u(t,new o.StateRestoreCollection(t,{}))}return e._stateRestore&&this.push.apply(this,e._stateRestore.findActive()),this})),o.ext.buttons.stateRestore={action:function(e,t,s,o){o._stateRestore.load(),s.blur()},className:"dtsr-state",config:{split:["updateState","renameState","removeState"]},text:function(e){return e.i18n("buttons.stateRestore","State %d",e.stateRestore.states()[0].length+1)}},o.ext.buttons.updateState={action:function(t,s,o,i){e("div.dt-button-background").click(),i.parent._stateRestore.save()},text:function(e){return e.i18n("buttons.updateState","Update")}},o.ext.buttons.savedStates={buttons:[],extend:"collection",init:function(e,t,s){e.on("stateRestore-change",(function(){e.button(t).text(e.i18n("buttons.savedStates","Saved States",e.stateRestore.states().length))})),void 0===e.settings()[0]._stateRestore&&h(e,s)},name:"SaveStateRestore",text:function(e){return e.i18n("buttons.savedStates","Saved States",0)}},o.ext.buttons.savedStatesCreate={buttons:[],extend:"collection",init:function(e,t,s){e.on("stateRestore-change",(function(){e.button(t).text(e.i18n("buttons.savedStates","Saved States",e.stateRestore.states().length))})),void 0===e.settings()[0]._stateRestore&&(void 0===s.config&&(s.config={}),s.config._createInSaved=!0,h(e,s))},name:"SaveStateRestore",text:function(e){return e.i18n("buttons.savedStates","Saved States",0)}},o.ext.buttons.createState={action:function(t,s,o,i){t.stopPropagation();var a=s.settings()[0]._stateRestore.c,n=s.settings()[0].oLanguage;if(a.create&&a.save){var c,l=s.stateRestore.states().toArray(),d=void 0!==n.buttons&&void 0!==n.buttons.stateRestore?n.buttons.stateRestore:"State ";if(d.indexOf("%d")===d.length-3)c=new RegExp(d.replace(/%d/g,""));else{var h=d.split("%d");c=[];for(var u=0,m=h;u<m.length;u++){var v=m[u];c.push(new RegExp(v))}}var g=function(e){var t;if(Array.isArray(c)){t=e;for(var s=0,o=c;s<o.length;s++){var i=o[s];t=t.replace(i,"")}}else t=e.replace(c,"");return isNaN(+t)||t.length===e?0:+t},f=l.map((function(e){return g(e.s.identifier)})).sort((function(e,t){return+e<+t?1:+e>+t?-1:0})),p=f[0];s.stateRestore.state.add(s.i18n("buttons.stateRestore","State %d",void 0!==p?p+1:1),i.config);for(var b=s.stateRestore.states().sort((function(e,t){var s=+g(e.s.identifier),o=+g(t.s.identifier);return s>o?1:s<o?-1:0})),S=s.button("SaveStateRestore:name"),R=void 0!==S[0]&&void 0!==S[0].inst.c.buttons[0].buttons?S[0].inst.c.buttons[0].buttons:[],y=0;y<R.length;y++)"stateRestore"===R[y].extend&&(R.splice(y,1),y--);a._createInSaved&&R.push("createState");for(var k=0,x=b;k<x.length;k++){var T=x[k],_=a.splitSecondaries.slice();_.includes("updateState")&&!a.save&&_.splice(_.indexOf("updateState"),1),!_.includes("renameState")||a.save&&a.rename||_.splice(_.indexOf("renameState"),1),_.includes("removeState")&&!a.remove&&_.splice(_.indexOf("removeState"),1),R.push({_stateRestore:T,attr:{title:T.s.identifier},config:{split:_},extend:"stateRestore",text:r.entityEncode(T.s.identifier),popoverTitle:r.entityEncode(T.s.identifier)})}s.button("SaveStateRestore:name").collectionRebuild(R),o.blur();for(var w=0,B=s.buttons();w<B.length;w++){var E=B[w];e(E.node).hasClass("dtsr-removeAllStates")&&(0===b.length?s.button(E.node).disable():s.button(E.node).enable())}}},init:function(e,t,s){void 0===e.settings()[0]._stateRestore&&e.button("SaveStateRestore:name").length>1&&h(e,s)},text:function(e){return e.i18n("buttons.createState","Create State")}},o.ext.buttons.removeState={action:function(e,t,s,o){o.parent._stateRestore.remove(),s.blur()},text:function(e){return e.i18n("buttons.removeState","Remove")}},o.ext.buttons.removeAllStates={action:function(e,t,s){t.stateRestore.states().remove(!0),s.blur()},className:"dt-button dtsr-removeAllStates",init:function(t,s){t.settings()[0]._stateRestore&&0!==t.stateRestore.states().length||e(s).addClass("disabled")},text:function(e){return e.i18n("buttons.removeAllStates","Remove All States")}},o.ext.buttons.renameState={action:function(e,t,s,o){for(var i=[],a=0,n=t.settings()[0]._stateRestore.s.states;a<n.length;a++){var r=n[a];i.push(r.s.identifier)}o.parent._stateRestore.rename(void 0,i),s.blur()},text:function(e){return e.i18n("buttons.renameState","Rename")}},e(s).on("preInit.dt.dtsr",(function(e,t){"dt"===e.namespace&&(t.oInit.stateRestore||o.defaults.stateRestore)&&(t._stateRestore||function(e,t){void 0===t&&(t=null);var s=new o.Api(e),i=t||s.init().stateRestore||o.defaults.stateRestore,a=new l(s,i);u(s,a)}(t,null))}))}(),o}));