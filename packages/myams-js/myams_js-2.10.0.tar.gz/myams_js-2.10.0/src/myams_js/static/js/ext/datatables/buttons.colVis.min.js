/*!
 * Column visibility buttons for Buttons and DataTables.
 * Â© SpryMedia Ltd - datatables.net/license
 */
!function(n){if("function"==typeof define&&define.amd)define(["jquery","datatables.net","datatables.net-buttons"],(function(e){return n(e,window,document)}));else if("object"==typeof exports){var e=require("jquery"),t=function(n,e){e.fn.dataTable||require("datatables.net")(n,e),e.fn.dataTable.Buttons||require("datatables.net-buttons")(n,e)};"undefined"==typeof window?module.exports=function(o,i){return o||(o=window),i||(i=e(o)),t(o,i),n(i,o,o.document)}:(t(window,e),module.exports=n(e,window,window.document))}else n(jQuery,window,document)}((function(n,e,t,o){"use strict";var i=n.fn.dataTable;return n.extend(i.ext.buttons,{colvis:function(n,e){var t=null,o={extend:"collection",init:function(n,e){t=e},text:function(n){return n.i18n("buttons.colvis","Column visibility")},className:"buttons-colvis",closeButton:!1,buttons:[{extend:"columnsToggle",columns:e.columns,columnText:e.columnText}]};return n.on("column-reorder.dt"+e.namespace,(function(o,i,l){n.button(null,n.button(null,t).node()).collectionRebuild([{extend:"columnsToggle",columns:e.columns,columnText:e.columnText}])})),o},columnsToggle:function(n,e){return n.columns(e.columns).indexes().map((function(n){return{extend:"columnToggle",columns:n,columnText:e.columnText}})).toArray()},columnToggle:function(n,e){return{extend:"columnVisibility",columns:e.columns,columnText:e.columnText}},columnsVisibility:function(n,e){return n.columns(e.columns).indexes().map((function(n){return{extend:"columnVisibility",columns:n,visibility:e.visibility,columnText:e.columnText}})).toArray()},columnVisibility:{columns:o,text:function(n,e,t){return t._columnText(n,t)},className:"buttons-columnVisibility",action:function(n,e,t,i){var l=e.columns(i.columns),u=l.visible();l.visible(i.visibility!==o?i.visibility:!(u.length&&u[0]))},init:function(n,e,t){var o=this;e.attr("data-cv-idx",t.columns),n.on("column-visibility.dt"+t.namespace,(function(e,i){i.bDestroying||i.nTable!=n.settings()[0].nTable||o.active(n.column(t.columns).visible())})).on("column-reorder.dt"+t.namespace,(function(e,i,l){t.destroying||1===n.columns(t.columns).count()&&(o.text(t._columnText(n,t)),o.active(n.column(t.columns).visible()))})),this.active(n.column(t.columns).visible())},destroy:function(n,e,t){n.off("column-visibility.dt"+t.namespace).off("column-reorder.dt"+t.namespace)},_columnText:function(n,e){var t=n.column(e.columns).index(),o=n.settings()[0].aoColumns[t].sTitle;return o||(o=n.column(t).header().innerHTML),o=o.replace(/\n/g," ").replace(/<br\s*\/?>/gi," ").replace(/<select(.*?)<\/select>/g,"").replace(/<!\-\-.*?\-\->/g,"").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,""),e.columnText?e.columnText(n,t,o):o}},colvisRestore:{className:"buttons-colvisRestore",text:function(n){return n.i18n("buttons.colvisRestore","Restore visibility")},init:function(n,e,t){t._visOriginal=n.columns().indexes().map((function(e){return n.column(e).visible()})).toArray()},action:function(n,e,t,o){e.columns().every((function(n){var t=e.colReorder&&e.colReorder.transpose?e.colReorder.transpose(n,"toOriginal"):n;this.visible(o._visOriginal[t])}))}},colvisGroup:{className:"buttons-colvisGroup",action:function(n,e,t,o){e.columns(o.show).visible(!0,!1),e.columns(o.hide).visible(!1,!1),e.columns.adjust()},show:[],hide:[]}}),i}));