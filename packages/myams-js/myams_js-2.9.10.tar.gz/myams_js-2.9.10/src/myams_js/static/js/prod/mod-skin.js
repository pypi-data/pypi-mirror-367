!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.modSkin=n.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.skin=void 0;var t=void 0;const n=MyAMS.$;let a=!1;const o=e.skin={init:()=>{a||(a=!0,MyAMS.config.enableTooltips&&MyAMS.dom.root.tooltip({selector:".hint",html:MyAMS.config.enableHtmlTooltips}),n(".hint").mousedown((e=>{n(e.currentTarget).tooltip("hide")})),n(document).on("clear.ams.content",(()=>{n(".tooltip").remove()})),o.checkURL(),n(window).on("hashchange",o.checkURL))},initElement:e=>{MyAMS.config.enableTooltips||n(".hint",e).tooltip({html:MyAMS.config.enableHtmlTooltips})},checkURL:()=>new Promise(((e,t)=>{const a=MyAMS.dom.nav;let o=location.hash,i=o.replace(/^#/,""),s=null;const l=i.indexOf("!");let r;if(l>0&&(o=o.substring(0,l+1),s=i.substring(l+1),i=i.substring(0,l)),i){let l=n("#content");l.exists()||(l=MyAMS.dom.root),r=n(`a[href="${o}"]`,a),MyAMS.skin.loadURL(i,l).then((()=>{const t=n("html head title").data("ams-title-prefix"),a=t?`${t} > `:"";if(document.title=`${a}${n("[data-ams-page-title]:first",l).data("ams-page-title")||r.attr("title")||r.text().trim()||document.title}`,s){const e=n(`#${s}`);e.exists()&&MyAMS.require("helpers").then((()=>{MyAMS.helpers.scrollTo("#main",e,{offset:-15})}))}r.exists()?MyAMS.require("nav").then((()=>{MyAMS.nav.setActiveMenu(r),MyAMS.nav.drawBreadcrumbs()})).then(e):e()}),t)}else{const o=n("[data-ams-active-menu]").data("ams-active-menu");r=o?n(`a[href="${o}"]`,a):n('ul li a[href!="#"]',a).first(),r.length>0?MyAMS.require("nav").then((()=>{MyAMS.nav.setActiveMenu(r),o?MyAMS.nav.drawBreadcrumbs():window.location.replace(window.location.href+r.attr("href"))})).then(e,t):e()}})),loadURL:function(e,a){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((i,s)=>{e.startsWith("#")&&(e=e.substr(1)),a=n(a),MyAMS.core.executeFunctionByName(MyAMS.config.clearContent,document,a).then((l=>{if(!l)return;const r={type:"GET",url:e,dataType:"html",cache:!1,beforeSend:()=>{a.html(`<h1 class="loading"><i class="fa fa-cog fa-spin"></i> ${MyAMS.i18n.LOADING}</h1>`),o&&o.preLoadCallback&&MyAMS.core.executeFunctionByName(o.preLoadCallback,t,o.preLoadCallbackOptions),"content"===a.attr("id")&&MyAMS.require("nav").then((()=>{const e=n("html head title").data("ams-title-prefix"),t=e?`${e} > `:"";document.title=`${t}${n(".breadcrumb li:last-child").text()}`,MyAMS.dom.root.animate({scrollTop:0},"fast")}))}},c=n.extend({},r,o),M={veto:!1};a.trigger("before-load.ams.content",[c,M]),M.veto||n.ajax(c).then(((e,l,r)=>{n.isArray(e)&&([e,l,r]=e),MyAMS.require("ajax").then((()=>{const e=MyAMS.ajax.getResponse(r);if(e){const c=e.contentType,M=e.data;switch(n(".loading",a).remove(),c){case"json":MyAMS.ajax.handleJSON(M,a),i(M,l,r);break;case"script":case"xml":i(M,l,r);break;default:a.parents(".hidden").removeClass("hidden"),MyAMS.core.executeFunctionByName(a.data("ams-clear-content")||MyAMS.config.clearContent,document,a).then((()=>{a.css({opacity:"0.0"}).html(M).removeClass("hidden").delay(30).animate({opacity:"1.0"},300),MyAMS.core.executeFunctionByName(a.data("ams-init-content")||MyAMS.config.initContent,window,a).then((()=>{MyAMS.form&&MyAMS.form.setFocus(a),o&&o.afterLoadCallback?MyAMS.core.executeFunctionByName(o.afterLoadCallback,t,o.afterLoadCallbackOptions).then((()=>{a.trigger("after-load.ams.content"),i(M,l,r)}),s):(a.trigger("after-load.ams.content"),i(M,l,r))}),s)}),s)}MyAMS.stats&&MyAMS.stats.logPageview()}}))}),((e,t,n)=>{a.html(`<h3 class="error"><i class="fa fa-exclamation-triangle text-danger"></i> \n\t\t\t\t\t\t\t\t${MyAMS.i18n.ERROR} ${n}</h3>${e.responseText}`),s(n)}))}))}))}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("skin"):(MyAMS.skin=o,console.debug("MyAMS: skin module loaded...")))}));