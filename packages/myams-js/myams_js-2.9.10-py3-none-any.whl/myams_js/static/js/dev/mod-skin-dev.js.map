{"version":3,"file":"mod-skin-dev.js","names":["$","MyAMS","_initialized","skin","_exports","init","config","enableTooltips","dom","root","tooltip","selector","html","enableHtmlTooltips","mousedown","evt","currentTarget","document","on","remove","checkURL","window","initElement","element","Promise","resolve","reject","nav","hash","location","url","replace","tag","tagPosition","indexOf","substring","menu","container","exists","loadURL","then","prefix","data","fullPrefix","title","attr","text","trim","anchor","require","helpers","scrollTo","offset","setActiveMenu","drawBreadcrumbs","activeUrl","first","length","href","target","options","arguments","undefined","startsWith","substr","core","executeFunctionByName","clearContent","status","defaults","type","dataType","cache","beforeSend","i18n","LOADING","preLoadCallback","_this","preLoadCallbackOptions","animate","scrollTop","settings","extend","veto","trigger","ajax","result","xhr","isArray","response","getResponse","contentType","handleJSON","parents","removeClass","css","opacity","delay","initContent","form","setFocus","afterLoadCallback","afterLoadCallbackOptions","stats","logPageview","error","ERROR","responseText","env","bundle","modules","push","console","debug"],"sources":["mod-skin.js"],"sourcesContent":["/* global MyAMS */\n/**\n * MyAMS generic skin features\n */\n\nconst $ = MyAMS.$;\n\n\nlet _initialized = false;\n\n\nexport const skin = {\n\n\t/**\n\t * Main *skin* module initialization\n\t */\n\tinit: () => {\n\n\t\tif (_initialized) {\n\t\t\treturn;\n\t\t}\n\t\t_initialized = true;\n\n\t\t// handle tooltips\n\t\tif (MyAMS.config.enableTooltips) {\n\t\t\tMyAMS.dom.root.tooltip({\n\t\t\t\tselector: '.hint',\n\t\t\t\thtml: MyAMS.config.enableHtmlTooltips\n\t\t\t});\n\t\t}\n\t\t$('.hint').mousedown((evt) => {\n\t\t\t$(evt.currentTarget).tooltip('hide');\n\t\t});\n\t\t$(document).on('clear.ams.content', () => {\n\t\t\t$('.tooltip').remove();\n\t\t});\n\n\t\t// check URL when hash is changed\n\t\tskin.checkURL();\n\t\t$(window).on('hashchange', skin.checkURL);\n\t},\n\n\t/**\n\t * Specific content initialization\n\t *\n\t * @param element: the element to initialize\n\t */\n\tinitElement: (element) => {\n\t\tif (!MyAMS.config.enableTooltips) {\n\t\t\t$('.hint', element).tooltip({\n\t\t\t\thtml: MyAMS.config.enableHtmlTooltips\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * URL checking function.\n\t *\n\t * This function is an event handler for window's \"hashchange\" event, which is\n\t * triggered when the window location hash is modified; this can notably occur when a\n\t * navigation menu, for example, is clicked.\n\t */\n\tcheckURL: () => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst nav = MyAMS.dom.nav;\n\t\t\tlet hash = location.hash,\n\t\t\t\turl = hash.replace(/^#/, ''),\n\t\t\t\ttag = null;\n\t\t\tconst tagPosition = url.indexOf('!');\n\t\t\tif (tagPosition > 0) {\n\t\t\t\thash = hash.substring(0, tagPosition + 1);\n\t\t\t\ttag = url.substring(tagPosition + 1);\n\t\t\t\turl = url.substring(0, tagPosition);\n\t\t\t}\n\t\t\tlet menu;\n\t\t\tif (url) {\n\t\t\t\t// new hash\n\t\t\t\tlet container = $('#content');\n\t\t\t\tif (!container.exists()) {\n\t\t\t\t\tcontainer = MyAMS.dom.root;\n\t\t\t\t}\n\t\t\t\tmenu = $(`a[href=\"${hash}\"]`, nav);\n\t\t\t\t// load specified URL into '#content'\n\t\t\t\tMyAMS.skin.loadURL(url, container).then(() => {\n\t\t\t\t\tconst\n\t\t\t\t\t\tprefix = $('html head title').data('ams-title-prefix'),\n\t\t\t\t\t\tfullPrefix = prefix ? `${prefix} > ` : '';\n\t\t\t\t\tdocument.title = `${fullPrefix}${$('[data-ams-page-title]:first', container).data('ams-page-title') ||\n\t\t\t\t\t\tmenu.attr('title') || menu.text().trim() || document.title}`;\n\t\t\t\t\tif (tag) {\n\t\t\t\t\t\tconst anchor = $(`#${tag}`);\n\t\t\t\t\t\tif (anchor.exists()) {\n\t\t\t\t\t\t\tMyAMS.require('helpers').then(() => {\n\t\t\t\t\t\t\t\tMyAMS.helpers.scrollTo('#main', anchor, { offset: -15 });\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// try to activate matching navigation menu\n\t\t\t\t\tif (menu.exists()) {\n\t\t\t\t\t\tMyAMS.require('nav').then(() => {\n\t\t\t\t\t\t\tMyAMS.nav.setActiveMenu(menu);\n\t\t\t\t\t\t\tMyAMS.nav.drawBreadcrumbs();\n\t\t\t\t\t\t}).then(resolve);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t}, reject);\n\t\t\t} else {\n\t\t\t\t// empty hash! We try to check if a specific menu was activated with a custom\n\t\t\t\t// data attribute, otherwise we go to the first navigation menu!\n\t\t\t\tconst activeUrl = $('[data-ams-active-menu]').data('ams-active-menu');\n\t\t\t\tif (activeUrl) {\n\t\t\t\t\tmenu = $(`a[href=\"${activeUrl}\"]`, nav);\n\t\t\t\t} else {\n\t\t\t\t\tmenu = $('ul li a[href!=\"#\"]', nav).first();\n\t\t\t\t}\n\t\t\t\tif (menu.length > 0) {\n\t\t\t\t\tMyAMS.require('nav').then(() => {\n\t\t\t\t\t\tMyAMS.nav.setActiveMenu(menu);\n\t\t\t\t\t\tif (activeUrl) {\n\t\t\t\t\t\t\tMyAMS.nav.drawBreadcrumbs();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// we use location.replace to avoid storing intermediate URL\n\t\t\t\t\t\t\t// into browser's history\n\t\t\t\t\t\t\twindow.location.replace(window.location.href + menu.attr('href'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}).then(resolve, reject);\n\t\t\t\t} else {\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Load specific URL into given container target.\n\t *\n\t * The function returns a Promise which is resolved when the remote content is actually\n\t * loaded and initialized\n\t *\n\t * @param url: remote content URL\n\t * @param target: jQuery selector or target container\n\t * @param options: additional options to AJAX call\n\t * @returns {Promise<string>}\n\t */\n\tloadURL: (url, target, options={}) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (url.startsWith('#')) {\n\t\t\t\turl = url.substr(1);\n\t\t\t}\n\t\t\ttarget = $(target);\n\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.clearContent, document, target).then((status) => {\n\t\t\t\tif (!status) {  // applied veto!\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst defaults = {\n\t\t\t\t\ttype: 'GET',\n\t\t\t\t\turl: url,\n\t\t\t\t\tdataType: 'html',\n\t\t\t\t\tcache: false,\n\t\t\t\t\tbeforeSend: () => {\n\t\t\t\t\t\ttarget.html(`<h1 class=\"loading\"><i class=\"fa fa-cog fa-spin\"></i> ${MyAMS.i18n.LOADING}</h1>`);\n\t\t\t\t\t\tif (options && options.preLoadCallback) {\n\t\t\t\t\t\t\tMyAMS.core.executeFunctionByName(options.preLoadCallback, this, options.preLoadCallbackOptions);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (target.attr('id') === 'content') {\n\t\t\t\t\t\t\tMyAMS.require('nav').then(() => {\n\t\t\t\t\t\t\t\tconst\n\t\t\t\t\t\t\t\t\tprefix = $('html head title').data('ams-title-prefix'),\n\t\t\t\t\t\t\t\t\tfullPrefix = prefix ? `${prefix} > ` : '';\n\t\t\t\t\t\t\t\tdocument.title = `${fullPrefix}${$('.breadcrumb li:last-child').text()}`;\n\t\t\t\t\t\t\t\tMyAMS.dom.root.animate({scrollTop: 0}, 'fast');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tconst\n\t\t\t\t\tsettings = $.extend({}, defaults, options),\n\t\t\t\t\tveto = { veto: false };\n\t\t\t\ttarget.trigger('before-load.ams.content', [settings, veto]);\n\t\t\t\tif (veto.veto) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t$.ajax(settings).then((result, status, xhr) => {\n\t\t\t\t\tif ($.isArray(result)) {\n\t\t\t\t\t\t[result, status, xhr] = result;\n\t\t\t\t\t}\n\t\t\t\t\tMyAMS.require('ajax').then(() => {\n\t\t\t\t\t\tconst response = MyAMS.ajax.getResponse(xhr);\n\t\t\t\t\t\tif (response) {\n\t\t\t\t\t\t\tconst\n\t\t\t\t\t\t\t\tdataType = response.contentType,\n\t\t\t\t\t\t\t\tresult = response.data;\n\t\t\t\t\t\t\t$('.loading', target).remove();\n\t\t\t\t\t\t\tswitch (dataType) {\n\t\t\t\t\t\t\t\tcase 'json':\n\t\t\t\t\t\t\t\t\tMyAMS.ajax.handleJSON(result, target);\n\t\t\t\t\t\t\t\t\tresolve(result, status, xhr);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'script':\n\t\t\t\t\t\t\t\tcase 'xml':\n\t\t\t\t\t\t\t\t\tresolve(result, status, xhr);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'html':\n\t\t\t\t\t\t\t\tcase 'text':\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\ttarget.parents('.hidden').removeClass('hidden');\n\t\t\t\t\t\t\t\t\tMyAMS.core.executeFunctionByName(target.data('ams-clear-content') ||\n\t\t\t\t\t\t\t\t\t\tMyAMS.config.clearContent, document, target).then(() => {\n\t\t\t\t\t\t\t\t\t\ttarget.css({opacity: '0.0'})\n\t\t\t\t\t\t\t\t\t\t\t.html(result)\n\t\t\t\t\t\t\t\t\t\t\t.removeClass('hidden')\n\t\t\t\t\t\t\t\t\t\t\t.delay(30)\n\t\t\t\t\t\t\t\t\t\t\t.animate({opacity: '1.0'}, 300);\n\t\t\t\t\t\t\t\t\t\tMyAMS.core.executeFunctionByName(target.data('ams-init-content') ||\n\t\t\t\t\t\t\t\t\t\t\tMyAMS.config.initContent, window, target).then(() => {\n\t\t\t\t\t\t\t\t\t\t\tMyAMS.form && MyAMS.form.setFocus(target);\n\t\t\t\t\t\t\t\t\t\t\tif (options && options.afterLoadCallback) {\n\t\t\t\t\t\t\t\t\t\t\t\tMyAMS.core.executeFunctionByName(options.afterLoadCallback, this, options.afterLoadCallbackOptions).then(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttarget.trigger('after-load.ams.content');\n\t\t\t\t\t\t\t\t\t\t\t\t\tresolve(result, status, xhr);\n\t\t\t\t\t\t\t\t\t\t\t\t}, reject);\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\ttarget.trigger('after-load.ams.content');\n\t\t\t\t\t\t\t\t\t\t\t\tresolve(result, status, xhr);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}, reject);\n\t\t\t\t\t\t\t\t\t}, reject);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tMyAMS.stats && MyAMS.stats.logPageview();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, (xhr, status, error) => {\n\t\t\t\t\ttarget.html(`<h3 class=\"error\"><i class=\"fa fa-exclamation-triangle text-danger\"></i> \n\t\t\t\t\t\t\t\t${MyAMS.i18n.ERROR} ${error}</h3>${xhr.responseText}`);\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n};\n\n\n/**\n * Global module initialization\n */\nif (window.MyAMS) {\n\tif (MyAMS.env.bundle) {\n\t\tMyAMS.config.modules.push('skin');\n\t} else {\n\t\tMyAMS.skin = skin;\n\t\tconsole.debug(\"MyAMS: skin module loaded...\");\n\t}\n}\n"],"mappings":"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","ignoreList":[]}