image: python:latest

variables:
    PIP_CACHE_DIR: "$CI_PROJECT_DIR/.cache/pip"

cache:
    paths:
        - ".cache/pip"

test:
    before_script:
        - python3 -m pip install '.[ar,resolver,psl,report,milter]'
    script:
        - python3 -V
        - python3 -m unittest -v
        - python3 -m doctest README.md
