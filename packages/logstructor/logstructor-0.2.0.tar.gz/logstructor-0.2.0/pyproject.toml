[project]
name = "logstructor"
version = "0.2.0"
description = "Bringing structure to your logs with simple, Pythonic structured logging"
readme = "README.md"
requires-python = ">=3.11"
dependencies = []

[tool.uv]
default-groups = "all"

[dependency-groups]
docs = [
    "myst-parser>=4.0.1",
    "sphinx-book-theme>=1.1.4",
    "sphinx-copybutton>=0.5.2",
]
linting = ["mypy>=1.17.1", "ruff>=0.12.7"]
test = [
    "pytest>=8.4.1",
    "pytest-cov>=6.2.1",
    "pytest-asyncio>=0.24.0",
]

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.mypy]
python_version = "3.11"
exclude = ["docs", "tests", "examples"]
strict = false
show_error_codes = true

[tool.ruff]
exclude = [
    ".mypy_cache",
    ".pytest_cache",
    ".ruff_cache",
    ".venv",
    "docs",
    "examples",
]
line-length = 110
target-version = "py311"

[tool.ruff.lint]
select = ["E", "F", "I", "N", "W"]
extend-ignore = [
    "N812",
    "N803",
] # N812: lowercase imported as non-lowercase, N803: argument name should be lowercase

[tool.pytest.ini_options]
testpaths = ["tests"]

[tool.coverage.run]
source = ["logstructor"]

[tool.semantic_release]
commit_message = "chore(release): {version} [skip ci]\n\nAutomatically generated by python-semantic-release"
commit_parser = "conventional"
major_on_zero = false
allow_zero_version = true
version_toml = ["pyproject.toml:project.version"]
version_variables = ["logstructor/__init__.py:__version__"]

[tool.semantic_release.changelog]
exclude_commit_patterns = ["Merge branch*", "chore(release)*"]

[tool.semantic_release.commit_parser_options]
allowed_tags = [
    "build",
    "chore",
    "ci",
    "docs",
    "feat",
    "fix",
    "perf",
    "style",
    "refactor",
    "test",
]
minor_tags = ["feat"]
patch_tags = ["fix", "perf", "refactor"]

[tool.semantic_release.branches.main]
match = "main"
